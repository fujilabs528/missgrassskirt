/*! For license information please see main.c22ed774.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},764:function(e,t,n){!function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function i(){}function a(){}a.resetWarningCache=i;var o=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n},u=n((function(e){e.exports=o()}));function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){return d(e)||p(e,t)||v(e,t)||m()}function d(e){if(Array.isArray(e))return e}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}function v(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},k=function(e){return null!==e&&"object"===s(e)},b=function(e){return k(e)&&"function"===typeof e.then},w=function(e){return k(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},A="[object Object]",x=function e(t,n){if(!k(t)||!k(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===A;if(i!==(Object.prototype.toString.call(n)===A))return!1;if(!i&&!r)return t===n;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(var u={},s=0;s<a.length;s+=1)u[a[s]]=!0;for(var c=0;c<o.length;c+=1)u[o[c]]=!0;var l=Object.keys(u);if(l.length!==a.length)return!1;var f=t,h=n,d=function(t){return e(f[t],h[t])};return l.every(d)},_=function(e,t,n){return k(e)?Object.keys(e).reduce((function(r,i){var a=!k(t)||!x(e[i],t[i]);return n.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):a?f(f({},r||{}),{},c({},i,e[i])):r}),null):null},E="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",I=function(e){if(null===e||w(e))return e;throw new Error(E)},T=function(e){if(b(e))return{tag:"async",stripePromise:Promise.resolve(e).then(I)};var t=I(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},S=t.createContext(null);S.displayName="ElementsContext";var C=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},N=function(e){var n=e.stripe,r=e.options,i=e.children,a=t.useRef(!1),o=t.useRef(!0),u=t.useMemo((function(){return T(n)}),[n]),s=h(t.useState((function(){return{stripe:null,elements:null}})),2),c=s[0],l=s[1],f=g(n);null!==f&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),a.current||("sync"===u.tag&&(a.current=!0,l({stripe:u.stripe,elements:u.stripe.elements(r)})),"async"===u.tag&&(a.current=!0,u.stripePromise.then((function(e){e&&o.current&&l({stripe:e,elements:e.elements(r)})}))));var d=g(r);return t.useEffect((function(){if(c.elements){var e=_(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}}),[r,d,c.elements]),t.useEffect((function(){return function(){o.current=!1}}),[]),t.useEffect((function(){var e=c.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),t.createElement(S.Provider,{value:c},i)};N.propTypes={stripe:u.any,options:u.object};var O=function(e){var n=t.useContext(S);return C(n,e)},P=function(){return O("calls useElements()").elements},R=function(){return O("calls useStripe()").stripe},D=function(e){return(0,e.children)(O("mounts <ElementsConsumer>"))};D.propTypes={children:u.func.isRequired};var L=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},M=function(){},j=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},F=function(e,n){var r="".concat(j(e),"Element"),i=n?function(e){O("mounts <".concat(r,">"));var n=e.id,i=e.className;return t.createElement("div",{id:n,className:i})}:function(n){var i=n.id,a=n.className,o=n.options,u=void 0===o?{}:o,s=n.onBlur,c=void 0===s?M:s,l=n.onFocus,f=void 0===l?M:l,h=n.onReady,d=void 0===h?M:h,p=n.onChange,v=void 0===p?M:p,y=n.onEscape,m=void 0===y?M:y,k=n.onClick,b=void 0===k?M:k,w=O("mounts <".concat(r,">")).elements,A=t.useRef(null),x=t.useRef(null),E=L(d),I=L(c),T=L(f),S=L(b),C=L(v),N=L(m);t.useLayoutEffect((function(){if(null==A.current&&w&&null!=x.current){var t=w.create(e,u);A.current=t,t.mount(x.current),t.on("ready",(function(){return E(t)})),t.on("change",C),t.on("blur",I),t.on("focus",T),t.on("escape",N),t.on("click",S)}}));var P=g(u);return t.useEffect((function(){if(A.current){var e=_(u,P,["paymentRequest"]);e&&A.current.update(e)}}),[u,P]),t.useLayoutEffect((function(){return function(){A.current&&A.current.destroy()}}),[]),t.createElement("div",{id:i,className:a,ref:x})};return i.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onClick:u.func,options:u.object},i.displayName=r,i.__elementType=e,i},U="undefined"===typeof window,V=F("auBankAccount",U),B=F("card",U),q=F("cardNumber",U),z=F("cardExpiry",U),W=F("cardCvc",U),K=F("fpxBank",U),H=F("iban",U),G=F("idealBank",U),Q=F("p24Bank",U),Y=F("epsBank",U),J=F("payment",U),X=F("paymentRequestButton",U),$=F("linkAuthentication",U),Z=F("shippingAddress",U),ee=F("affirmMessage",U),te=F("afterpayClearpayMessage",U);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=V,e.CardCvcElement=W,e.CardElement=B,e.CardExpiryElement=z,e.CardNumberElement=q,e.Elements=N,e.ElementsConsumer=D,e.EpsBankElement=Y,e.FpxBankElement=K,e.IbanElement=H,e.IdealBankElement=G,e.LinkAuthenticationElement=$,e.P24BankElement=Q,e.PaymentElement=J,e.PaymentRequestButtonElement=X,e.ShippingAddressElement=Z,e.useElements=P,e.useStripe=R,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(791))},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function A(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return A(e)||w(e)===l},t.isConcurrentMode=A,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=60103,x=60106,_=60107,E=60108,I=60114,T=60109,S=60110,C=60112,N=60113,O=60120,P=60115,R=60116,D=60121,L=60128,M=60129,j=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;A=U("react.element"),x=U("react.portal"),_=U("react.fragment"),E=U("react.strict_mode"),I=U("react.profiler"),T=U("react.provider"),S=U("react.context"),C=U("react.forward_ref"),N=U("react.suspense"),O=U("react.suspense_list"),P=U("react.memo"),R=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),j=U("react.offscreen"),F=U("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function K(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case D:return G(e._render);case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Se=null,Ce=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Oe(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Pe(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,je=!1,Fe=!1;function Ue(){null===Se&&null===Ce||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ke=null,He=!1,Ge=null,Qe={onError:function(e){We=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,u,s){We=!1,Ke=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function At(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},It={};function Tt(e){if(Et[e])return Et[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Et[e]=n[t];return e}f&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var St=Tt("animationend"),Ct=Tt("animationiteration"),Nt=Tt("animationstart"),Ot=Tt("transitionend"),Pt=new Map,Rt=new Map,Dt=["abort","abort",St,"animationEnd",Ct,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function jt(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=jt(s),i=Mt):0!==(u&=a)&&(r=jt(u),i=Mt)}else 0!==(a=n&~o)?(r=jt(a),i=Mt):0!==u&&(r=jt(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(jt(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Ht|0)|0},Kt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){je||Le();var i=$t,a=je;je=!0;try{De(i,e,t,n,r)}finally{(je=a)||Ue()}}function Xt(e,t,n,r){Qt(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Ie(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),An=sn(wn),xn=sn(i({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Tn}var Cn=i({},pn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Cn),On=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],jn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Un=f&&"TextEvent"in window&&!Fn,Vn=f&&(!jn||Fn&&8<Fn&&11>=Fn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){Oe(r),0<(t=jr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Cr(e,0)}function $n(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&$n(Jn)){var t=[];if(Qn(t,Jn,e,Ie(e)),e=Xn,je)e(t);else{je=!0;try{Re(e,t)}finally{je=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Jn)}function sr(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,Ar=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ar||null==kr||kr!==$(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=jr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<_r.length;Er++)Rt.set(_r[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ke;We=!1,Ke=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Sr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Sr(i,u,c),a=s}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Or]||(e[Or]=!0,u.forEach((function(t){Tr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Me(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=a,i=Ie(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case St:case Ct:case Nt:s=bn;break;case Ot:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=An;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Gn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(jn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(m=jr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!jn&&zn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[$r])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function Ai(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,_i=null,Ei=a.unstable_runWithPriority,Ii=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Si=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Ni=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,ji={},Fi=void 0!==Ci?Ci:function(){},Ui=null,Vi=null,Bi=!1,qi=Ni(),zi=1e4>qi?Ni:function(){return Ni()-qi};function Wi(){switch(Oi()){case Pi:return 99;case Ri:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Ki(e),Ei(e,t)}function Gi(e,t,n){return e=Ki(e),Ii(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}Yi()}function Yi(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ii(Pi,Qi),n}finally{Bi=!1}}}var Ji=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(jo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Aa=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case A:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xs(t,e.mode,n)).return=e,t}if(Aa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===i?n.type===_?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(Aa(n)||q(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case A:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Aa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===_&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case A:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===_){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===_?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(Aa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ia=Ea(!0),Ta=Ea(!1),Sa={},Ca=ci(Sa),Na=ci(Sa),Oa=ci(Sa);function Pa(e){if(e===Sa)throw Error(o(174));return e}function Ra(e,t){switch(fi(Oa,t),fi(Na,e),fi(Ca,Sa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Ca),fi(Ca,t)}function Da(){li(Ca),li(Na),li(Oa)}function La(e){Pa(Oa.current);var t=Pa(Ca.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Ca,n))}function Ma(e){Na.current===e&&(li(Ca),li(Na))}var ja=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,Ba=!1;function qa(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);qa(Ua,n)}Ua=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ha(e){if(e!==Ua)return!1;if(!Ba)return Ka(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Ua=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,$a=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Po,t=null!==eo&&null!==eo.next,$a=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(jo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(jo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Wt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Oo.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function Ao(e,t){return bo(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function To(){}function So(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Wi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Oo(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:Ao,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return Ao((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:So,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:_o,useMemo:Co,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:So,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:_o,useMemo:Co,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,jo=!1;function Fo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Ia(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ks(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(jo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(jo=!0)}return Wo(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},As(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},As(t,e),null;t.memoizedState={baseLanes:0},As(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,As(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ko(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ba(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&Ai(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&Ai(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Qo,Yo,Jo,Xo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=ja.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(ja,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=ja.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(ja,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Ca.current),Ha(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Nr(Ir[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in _e(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Nr(Ir[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}_e(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?Ae(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Oa.current),Pa(Ca.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return li(ja),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&ja.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Ru||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(ja),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(ja,1&ja.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=ja.current,fi(ja,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(ja),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(ja),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Ca.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$u?$u=new Set([this]):$u.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(js(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&At(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))js(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function Au(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):_u(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Iu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?Ae(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,At(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ku=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Su(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Cu=Math.ceil,Nu=w.ReactCurrentDispatcher,Ou=w.ReactCurrentOwner,Pu=0,Ru=null,Du=null,Lu=0,Mu=0,ju=ci(0),Fu=0,Uu=null,Vu=0,Bu=0,qu=0,zu=0,Wu=null,Ku=0,Hu=1/0;function Gu(){Hu=zi()+500}var Qu,Yu=null,Ju=!1,Xu=null,$u=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===ss&&(ss=Vu),0!==Ji.transition){0!==cs&&(cs=null!==Wu?Wu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Pu)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ru&&(qu|=t,4===Fu&&gs(e,Lu));var r=Wi();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ys(e,n),0===Pu&&(Gu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Wu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Wt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,jt(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==ji&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&Ti(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],Vi=Ii(Pi,Yi)):Ui.push(n),n=ji):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Is();for(Ru===e&&Lu===r||(Gu(),_s(e,r));;)try{Cs();break}catch(s){Es(e,s)}if(na(),Nu.current=a,Pu=i,null!==Du?r=0:(Ru=null,Lu=0,r=Fu),0!==(Vu&qu))_s(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ts(e,n))),1===r)throw t=Uu,_s(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Ku+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Wt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cu(n/1960))-n)){e.timeoutHandle=Kr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&qu)&&(n=Ts(e,t=Ft(e,t)))}else n=Ts(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ts(e,t))),1===n)throw n=Uu,_s(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ys(e,zi()),null}function bs(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function ws(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function As(e,t){fi(ju,Mu),Mu|=t,Vu|=t}function xs(){Mu=ju.current,li(ju)}function _s(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(ja);break;case 10:ra(r);break;case 23:case 24:xs()}n=n.return}Ru=e,Du=Hs(e.current,null),Lu=Mu=Vu=t,Fu=0,Uu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Du;try{if(na(),Ja.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Za=null,ro=!1,Ou.current=null,null===n||null===n.return){Fu=1,Uu=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&ja.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,A=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===$u||!$u.has(A)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(x){t=x,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Is(){var e=Nu.current;return Nu.current=Po,null===e?Po:e}function Ts(e,t){var n=Pu;Pu|=16;var r=Is();for(Ru===e&&Lu===t||_s(e,t);;)try{Ss();break}catch(i){Es(e,i)}if(na(),Pu=n,Nu.current=r,null!==Du)throw Error(o(261));return Ru=null,Lu=0,Fu}function Ss(){for(;null!==Du;)Ns(Du)}function Cs(){for(;null!==Du&&!Si();)Ns(Du)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Os(e):Du=t,Ou.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Fu&&(Fu=5)}function Ps(e){var t=Wi();return Hi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Du=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ou.current=null,Br=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(I){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ds()}catch(I){if(null===Yu)throw Error(o(330));Vs(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var b=Yu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:Au(Yu),Yu.flags&=-3;break;case 6:Au(Yu),Yu.flags&=-3,Iu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Iu(Yu.alternate,Yu);break;case 4:Iu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var A=s.alternate;bu(s),null!==A&&bu(A)}Yu=Yu.nextEffect}}catch(I){if(null===Yu)throw Error(o(330));Vs(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);if(w=qr,b=yr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,A=Math.min(u.start,s),u=void 0===u.end?A:Math.min(u.end,s),!w.extend&&A>u&&(s=u,u=A,A=s),s=pr(k,A),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),A>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Br,qr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var x=Yu.flags;if(36&x&&mu(k,Yu.alternate,Yu),128&x){b=void 0;var _=Yu.ref;if(null!==_){var E=Yu.stateNode;Yu.tag,b=E,"function"===typeof _?_(b):_.current=b}}Yu=Yu.nextEffect}}catch(I){if(null===Yu)throw Error(o(330));Vs(Yu,I),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Fi(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&($u=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(I){}if(ys(e,zi()),Ju)throw Ju=!1,e=Xu,Xu=null,e;return 0!==(8&Pu)||Qi(),null}function Ds(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Su(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Hi(e,Fs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function js(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function Us(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)Us(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Us(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Fu||3===Fu&&(62914560&Lu)===Lu&&500>zi()-Ku?_s(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(e,t,n,r){return new zs(e,t,n,r)}function Ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Ws(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ks(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case I:return(e=Ws(12,n,t,8|i)).elementType=I,e.type=I,e.lanes=a,e;case N:return(e=Ws(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case O:return(e=Ws(19,n,t,i)).elementType=O,e.lanes=a,e;case j:return Ys(n,i,a,t);case F:return(e=Ws(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ws(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ws(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ws(23,e,r,t)).elementType=j,e.lanes=n,e}function Js(e,t,n){return(e=Ws(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ws(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $s(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $s(e,t,null!=n&&!0===n.hydrate),t=Ws(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)jo=!0;else{if(0===(n&r)){switch(jo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(fi(ja,1&ja.current),null!==(t=au(e,t,n))?t.sibling:null);fi(ja,1&ja.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(ja,ja.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}jo=0!==(16384&e.flags)}else jo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Wr(r,i)?u=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return $o(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ia(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=bs,De=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Gu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Oe,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),_i=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},77:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var u,s,c,l=t(e),f=t(o);if(l&&f){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(!a(e[u],o[u]))return!1;return!0}if(l!=f)return!1;var h=e instanceof Date,d=o instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var y=n(e);if((s=y.length)!==n(o).length)return!1;for(u=s;0!==u--;)if(!r.call(o,y[u]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(u=s;0!==u--;)if(("_owner"!==(c=y[u])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,A="+"===k||"*"===k,x="?"===k||"*"===k,_=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:_,optional:x,repeat:A,partial:w,asterisk:!!b,pattern:E?c(E):b?".*":"[^"+s(_)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function A(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!A.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+I(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+I(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+I(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function S(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function C(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function O(){var e=N.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:S,forEach:function(e,t,n){S(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!A.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==n&&r.call(w,a)&&(k=w);var A=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(A,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},x(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(A),s(A,u,"Generator"),s(A,a,(function(){return this})),s(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function A(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],T=[],S=1,C=null,N=3,O=!1,P=!1,R=!1;function D(e){for(var t=x(T);null!==t;){if(null===t.callback)_(T);else{if(!(t.startTime<=e))break;_(T),t.sortIndex=t.expirationTime,A(I,t)}t=x(T)}}function L(e){if(R=!1,D(e),!P)if(null!==x(I))P=!0,n(M);else{var t=x(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,R&&(R=!1,i()),O=!0;var a=N;try{for(D(n),C=x(I);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=C.callback;if("function"===typeof o){C.callback=null,N=C.priorityLevel;var u=o(C.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?C.callback=u:C===x(I)&&_(I),D(n)}else _(I);C=x(I)}if(null!==C)var s=!0;else{var c=x(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{C=null,N=a,O=!1}}var j=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(I)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:S++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,A(T,e),null===x(I)&&e===x(T)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,A(I,e),P||O||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},300:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAACHqAAAh6gGpbivZAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAwBQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACyO34QAAAP90Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+6wjZNQAAEVtJREFUeNrt3WuMVOUdx/EzO7MX9n6bAZaLilZQEJUoKpcmkNo0rdgUSzAQjTFirakNWiGRpFHfmMZQtNJEoYk1Ba33qriKjULrrYhWaRGX9bIJBVfY+429zs4pvNAYw7LPOed5zvM/M9/fC1/o8cwzz/+z/+eZMzNnYk7OJTZ15qy6stKyEznxD6e3r/dETvyj+WDjETf3ZiOXnmzxuTNnzZx1bsmYBxz/9GDjwcZP+wGQfSldvGTpxXlKh2Y+2rX7rT4AZE+KFixdMj/h6X9J7929691Bh0Q/E2/fPej6yuDu2ycyfxH/219ZP+IGyEj9yiJmMbJZtLXLDZyurYuYyShm6t1fuJryxd1Tmc+IZcbWIVdjhrbMYE4jlPO3pV3NGfnLLOY1Ipn3XMY1kNGnL2RuI5ArXnGNZcd85ld4Jm13TSbzWJI5Fpz4r7pcw+n8ZR7zLDWXfeiGkA8uZaZFpnpLxg0lo49UMdvyckOrG1pab2C+haX8KTfUPFXOnEvKxZ+5Ieezi5l1Obll0A09g7cw70JS9qRrJU+WMfcSctGnrqV8ehGzbz/XDbjWMnAd82876zOuxWTWUwGriW1yLWdTjCrYS/5213q251MHWynZ6QrIzhIqYSe1e10R2VtLLWxkeqMrJI3TI7yLiu7f/9szxYylcVFbVKcxsp9uKKmXU39nZn0JAELe/z8r6uN585+N6muBeERXrseWyxrQOWe9AIAQs1HcW3FzS/8OgNBy593yxrTg+Lu8MgspqzOuwGRW8zIwnFzw3gQt5xk+eWcg5+SNggq0nG/gsv0ACCGlHwR8Aegeajx5K6C24W/+TUHtyZsHzTwj4Gw0XpIrN5axmkBvAGX2bVpWMdaZK65+4D+BVpftVMd81vivT8+j19SMd/ranz/W6/8R1lAf4y+3+n3WJr1zleLWoXj1a6M+H6R/LhUyvAE46K8yh9fXeXmYuvWH/T3OwVJqZDSP+7vHyxrP+/yCNf7uMPM4NTKZVX5q0nB9ws9jJa5v8PNoq6iSuVQc9fE9vht9v+GVd6OP7xseraBOxrLZ+zd5Hw70Td6qh71vBzdTJ1OZ5/nWT+9fEvQxL3nf88uNeVTKTGJ7PJZi+E4NH3fIu3PY48Pu4ZPiZnKzx0IculzP415+yOMD30ytTKS23VsZXtR2H4+qF709cjsfEzaRR72txHfofOw7vO0+HqVaBnaAnt6m6V+m99GXeboCnWEfqD/Pe6lAx0LdD7+ww8vjP0+9dGe2lwZweLaBAXh5dyAzm4ppjpdPATROMzGCaV6+icQnAzTnbA+7sCOGvqk1/YiHPejZ1Exr/uThZq5zTA1iTqf6KP5EzbS2X/Wff+g3+Asvi9RfCwxNo2oa85B6773a5DiuVl+JHqJq+pJS/8szfNOe9eqdKEXdtGWd8rTXG34jJlavPJR11E1bPla+AFBjeig1ypcDPqZuujJPdc5HFpofzELlX6LkerCuPKg65XeFMZq7VEfzIJXTk8QxxRnfF8p3neP7FIdzLEHttOQq1QvwC8IZzwLVtyWuonZa8oy0d+FVP5nwDLXTkUrFHwPoCO0X3ZKKbw0PVsqf3QjcJGplodpxG1rDGlHrBrXjClfy56shO9T+3JpC3HIlmtTGtIPqadh0dwv8KK7iB5S749QvcOYrXgMsCHNQBYrXA+X/1rD8PcBStcPuHw5zUMP3ax08OU1eU/tK5oRwRzVB7Wuqr9EBAjdbtc93PDIQ7rAGHlE6bFEBf8EBs1htsZ0R9rhmqI1rMR0glC3A201hj6vp7ezYBIgHsETpqG3hD2ybxuFbjPRvMucdL1I4amhSV+gjqzyqcoVysCRDBwiSM1Xq7+wIv/5Ol9JlvqIzWQICZZbSUfU2hlav8QkAYKyo3RZ4t42h7db4BAAQ6A+o6ZCNoR1qogMI6QC77IxtFx1ASAeQDEB6BxCeCqXLbXV2BlenNLgKOoDpBtDRbGdwzR1Z0AKEA1BaQQ/aGt1BbU8BAGNksspBjbZG16jtKQBgjJRGvwOUASBAyqLfAUoBkNsA6ADGAbTbGl07AEQA6LU1ul4ASNgEpgdtjW4wDQABHcDir3X2aTIMgCAAeu0Nr5cOAAAAmIzKx+pH7A1vRNNTAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAUY/ZX1usLAp4ApWfM0hMEj17saDDG+g2+RRM/WBE/IofL54yuYi/MA0Z+OrIP199LxMlALXrb6qicFrTvnVjR1QAlGz4dSkV056eB383EAkAs585j2oZyf4V+u+Ip/9VwOq91N9QLvhghfwOcO0TMSplLKPXvCgcwJUv82OpRl8RXPmOaADTPy6jSEbTdn6r3tfreoe37QJKZDbFk/4muAMsf44KGc8P3pAL4BNeAJjPnivEvgxcSP1DyOWzxQK4ieqEEa3TrHMJiHXzEiCMHJkmtAPMoP6hZGqNUAAXUptwcqFQAFwDCCkXCAUwldKEtAYIBTCR0oSTiQAAAAAAAAAABI/GC0Hl3ZQmnIwWZCR2ABpAWIlrvBIEgBxfAwAAAAAAAAAAAAAAAAAAAAAAAAAAQO4A0HcpuKSPwoSVkQKBHYAGEF7yqwHAGqAniXDH9PkBbyf9icL4enZbq8OS8vGPSdd7O+dFZ6hMdoM8lL9wFfJbjyftUjjnPnvPeZ/C8Lo8nvP3KvO4MqpLwDG6t5YpmggAAAAAAAAAAAAAECEAff0UeLy0uNEEUFROA9CStModYVPyALAChLkGFFUAgE0AAAAAAAAAAAAAyD0AKQDQAQAAAAAAIEoABnop7/hpiSSA/CoagKYMdUURACtAuGtASQkA2AQAAAAAAAAAACAAQAoAdAAAAAAAAAAAAMbIcBfFzVYA8VoagLYovWUiDEAyBoBwW0B5kSgAbAGiugYIBzCq6RhDMTQ8AHj6X47J/lM9BoAAU/GVpmMMxdDwAPBNmjUdYyiGhpetAFq8n7dB0zGGYmh4LXSAr7Nj/EPSr9oD8Gpay1NgCRgz+5vGPeTNTnsAOt8c95Cm/QD4+k+13ceJn9dwhMGYGV7INwnRwSitcG87X5u1yX3jnPXLYptPvPjLcYbXN9nPafsVprNDUgeoiZt6vf7VxnEOuMfqXWf67xnngI2+XqSqTFVVgaAOMEfl7pY7fZ26tPm0J/0kbveZxz85fdcr9XXWPSrzOVVQBzD4VkDfypHT/NfeFaN2AYyuON1bdyMr/d1DP8RNgHgAzlu3jf3fMqsOOJZzYNVpfsb1trccAAQF4GwZcxvgrn3Z/vL38tox7+u2cYsDgOAAnHW3nvp6S9/yzRI2QJuXn7rPp29d58gHoCd/Vtm0XOn//EuOneJ8n8+V8vTnfn6K4R1b4v+EK1Tm8wFBAF5RGXCQepXd+93rAa1rBb0MKljb+t3X//eWBTjf91Xm8wlBAP6tMuBgLWvifQ3fOteHG8odUSnf8OG3htdwX7AnO1NlPt/QMnA9vxp2ZMr4x2QKgr5i+96y8+rqqlubmz9+6X+OvEy/ek5dXbKjublhx2cBT1Wp8v7GgTliAMSG8sc/qIVflVLPYOH4x7QlxbwKqFKoPx8J9RKVTwTUJMQA4DPBuqMyWbEkAHIagJ4LAQAAAAAAAAAAAAAAAAAAAABgCIDbQllzGkBHmrKqR2m2xACoKNRlmnjpl7V5QgCwBbCzBijdlwcAbAIAAAAAAAAAAAAAAAAAAAAAwAYArgTnNoCuIYrqJW2j0QFQWqxLNPkmmTaFg5IxEQDYAthaA/KrAcAmAAAAAAAAAAAAAAAAAAAAAAAAAABxAHoHKKm3tLpRATChjAZgIEr3Vk9JAMAKYG8NKKwEAJuASADg0wCe05JVAOgAOd4BAAAAAgACAAIAog9AKiIABnopaLZ2gIJKGoCRDHdFAwArgM0WUFwKANYAAAAAAAAAAAAAAAAAAAAAAAAAAEQBGOqinNkKIKHyFXU+EOYnSm+gWAeQiumyTPxMW9kEywDYAkR8DQAAAAAAAAAAAAAAAAAAAAAAAABAM4B0B8XMVgB5Kj9c1eJSTD/p65cPIJmnSzLxN3GVhVYBsAWwvgakAMAmAAAAAAAAAAAAAAAAAAAAAAAkAVD6ASwSSQCxpMJBrRlK6S/dQ9IB1CRYAWy3gOqERQBsAewDiKUAwCbAFoAUAHIbAB0AAAAAAAAAAAAAAAAAp4zbSiFzGkB7mkL6TeeIbACVBQoHcXsQ/1HqnrVxawDYAkhYA5S+mwEANgEAAAAAAAAAAAAAAAAAAAAAAAAAmAfQNUwZ/adtVDIApfvU0gCCROk7FcmYJQCsADLWgEQNANgEAAAAAAAAAAAAAAAAAAAAAAAAACAAQO8ARQySVlcugOJSGoDxpNsVDkrZAcAKIGUNKKgCAJsAAAAAAAAAAAAAAAAAAAAAAAAAAKwD6O+jhMHSIhZAYQUNIIQMdyoclLIBgBVAzhowoQwAbAIAAAAAAAAAAAAAAAAAAAAAAAAAsAxgqJsCZiuA/CoaQCgZ7JEJIBUDgJwWUFocOgC2ANmxBgAAAAAAAAAAAAAAAAAAmgHwe0Ea0kIHoANEFMBIB+XLVgBxlduTKt3egoyTvn6JAJJ5uuwSHdNYURQyALYAwtaAFADYBAAAAAAAAAAAAAAAAAAAAACAXQCjbRQvWwHkJRUOastQPB3pHpQHoCbOChBeVN4QrsoPFQBbAGlrQCwFADYBAAAAAAAAAAAAAAAAAAAAAGATgNtK6bIWgMpVh/Y0pdOTzhFpAKrzdbklKr1U5Vqw0tV5XQDYAshbA5TenwMAmwAAAAAAAAAAAAAAAAAAAAAAMAWA+8NkLwCVK8GdwxROV9pHZQFQuhsBK4C+ZFTeV0vmhQaALYDENUDprj0AYBMAAAAAAAAAAAAAAAAAAAAAAGYAcCU4twH0DFA2fWnNSAKg9BtlrAA6M9qucFAqLABsAWSuAfnVIQFIASB7NgF0AAAAAAC8CpSeFjoAHQAAAAAAAAAAgCgA6O+jaNkKYEI5DSD0jHQqHJQKBwAXAqW2gKKKUACwBcimNQAAAABA1gBIAYAOAAAAAAAAAAAAAABgD8BQNyXLVgAFVTQACxnskQKAK8FyW0BJSQgA2AJk1RoAAAAAAAAAAAAAAAAAAAAAAAAAQODHUPoII4kkgITKDUlbXAqmO8ePywCQjLECyG0B5UXGAbAFyK41AAAAAAAAAAAAAAAAAAAAAAAAAICgj6B0Y1MSSQB5tQoHKd3amHhMz6AEALVxVgDJLaCqwDAAtgDC14AUANgEAAAAAAAAAAAAAAAAAAAAAEC4ANxWipWtAGIq1xnaRimWiXSO2AdQnWAFkN0CahJGAfBzQTajMrGxpH0AdIAIbQIAAAAAAAAAAAAAAAAAAAAAgOsAABg7KleCO4cplZm0j9oGUFnICmAxGZV32WrzDAJgCyB/DYjXAoBNgHoS+gEs/geVMpTzlYq03zKAyZOplM146wB5Bs9NAEAAQABAAEAAQCQCiHk5uKyH6ZWfkULXVAegAUQh+dUOAFgDAAAAAAAAAAAAAAAAAAAA5FCSxgAUMblRSMoYgDSTG4VUAyC302kMwAiTG4U0GwPQwOTmNoB3mdwopNEYgHeY3CjkZWMAmg4xu/JzoMkYAGcz0ys/L3g62tMngpzyw+VMsPAcP+eouQ7Qs4UJlp5NRw12AKfio7OYYtFpPbvXMdcBnO5ruRgkOqOrvdXfiXt8gC8HfsgsC87tf3XMAnD+VbSIaRabP97jmAbgvN7+oxgzLbP//+ZuxzwAZ+9/l5Yw2QLT/rMnnDAAOAe3xi9JMN/CMvSHFQeccAA4Q68/HqurYM4FpWX7tU8P+vkffS/nsUt/et6UKZPizL3thb+lufmTl/b4/cH2/wPRuJkUOEDQEAAAAABJRU5ErkJggg=="},375:function(e,t,n){"use strict";e.exports=n.p+"static/media/studio-bag.0f3196edd8f96de6d41c.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".341f04ca.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-ecommerce:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[o[c]]=0},r=self.webpackChunkreact_ecommerce=self.webpackChunkreact_ecommerce||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return At},SDK_VERSION:function(){return yn},_DEFAULT_ENTRY_NAME:function(){return en},_addComponent:function(){return an},_addOrOverwriteComponent:function(){return on},_apps:function(){return nn},_clearComponents:function(){return ln},_components:function(){return rn},_getProvider:function(){return sn},_registerComponent:function(){return un},_removeServiceInstance:function(){return cn},deleteApp:function(){return bn},getApp:function(){return gn},getApps:function(){return kn},initializeApp:function(){return mn},onLog:function(){return xn},registerVersion:function(){return An},setLogLevel:function(){return _n}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(7),u=n.n(o);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var f=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&c(e),o=t&&c(t),u=a||o;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?l(i,h):".."===d?(l(i,h),f++):f&&(l(i,h),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},h="Invariant failed";function d(e,t){if(!e)throw new Error(h)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function k(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=s({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=f(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function b(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function A(e,t){t(window.confirm(e))}var x="popstate",_="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),w||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?A:u,l=i.keyLength,f=void 0===l?6:l,h=e.basename?m(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=y(a,h)),k(a,r,n)}function I(){return Math.random().toString(36).substr(2,f)}var T=b();function S(e){s(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(v(e.state))}function N(){P(v(E()))}var O=!1;function P(e){if(O)O=!1,S();else{T.confirmTransitionTo(e,"POP",c,(function(t){t?S({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,M(i))}(e)}))}}var R=v(E()),D=[R.key];function L(e){return h+g(e)}function M(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?(window.addEventListener(x,C),r&&window.addEventListener(_,N)):0===j&&(window.removeEventListener(x,C),r&&window.removeEventListener(_,N))}var U=!1;var V={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",a=k(e,r,I(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),D=l,S({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=k(e,r,I(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),S({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=T.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var T="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(C(window.location.href)+"#"+e)}function P(e){void 0===e&&{},w||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?A:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?m(p(e.basename)):"",c=S[o],l=c.encodePath,f=c.decodePath;function h(){var e=f(N());return u&&y(e,u),k(e)}var v=b();function x(e){s(V,e),V.length=t.length,v.notifyListeners(V.location,V.action)}var _=!1,E=null;function I(){var e,t,n=N(),r=l(n);if(n!==r)O(r);else{var a=h(),o=V.location;if(!_&&(a,o.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===g(a))return;null,function(e){if(_)!1,x();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?x({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(a)}}var P=N(),R=l(P);P!==R&&O(R);var D=h(),L=[g(D)];function M(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?window.addEventListener(T,I):0===j&&window.removeEventListener(T,I)}var U=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&C(window.location.href),n+"#"+l(u+g(e))},push:function(e,t){var n="PUSH",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);if(N()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(g(V.location)),o=L.slice(0,a+1);o.push(t),o,x({action:n,location:r})}else x()}}))},replace:function(e,t){var n="REPLACE",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);N()!==i&&(t,O(i));var a=L.indexOf(g(V.location));-1!==a&&(L[a]=t),x({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return U||(F(1),!0),function(){return U&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function R(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=b();function f(e){s(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=R(o,0,i.length-1),p=i.map((function(e){return k(e,void 0,"string"===typeof e?h():e.key||h())})),v=g;function y(e){var t=R(m.index+e,0,m.entries.length-1),r=m.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m}var L=1073741823,M="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function j(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var F=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return M[e]=(M[e]||0)+1}()+"__",s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=j(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):L,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);s.childContextTypes=((r={})[o]=u().object.isRequired,r);var c=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?L:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?L:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return c.contextTypes=((i={})[o]=u().object,i),{Provider:s,Consumer:c}},U=F,V=n(239),B=n.n(V);n(228);function q(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var z=n(110),W=n.n(z),K=function(e){var t=U();return t.displayName=e,t},H=K("Router-History"),G=function(e){var t=U();return t.displayName=e,t},Q=G("Router"),Y=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(Q.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(H.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var J={},X=0;function $(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=J[n]||(J[n]={});if(r[e])return r[e];var i=[],a={regexp:B()(e,i,t),keys:i};return X<1e4&&(r[e]=a,X++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var Z=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Q.Consumer,null,(function(n){n||d(!1);var r=e.props.location||n.location,i=s({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?$(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,c=a.render;return Array.isArray(o)&&0===o.length&&(o=null),t.createElement(Q.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):c?c(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ee(e){return"/"===e.charAt(0)?e:"/"+e}function te(e,t){if(!e)return t;var n=ee(e);return 0!==t.pathname.indexOf(n)?t:s({},t,{pathname:t.pathname.substr(n.length)})}function ne(e){return"string"===typeof e?e:g(e)}function re(e){return function(){d(!1)}}function ie(){}t.Component;var ae=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Q.Consumer,null,(function(n){n||d(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?$(a.pathname,s({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);function oe(e){var n="withRouter("+(e.displayName||e.name)+")",r=function(n){var r=n.wrappedComponentRef,i=q(n,["wrappedComponentRef"]);return t.createElement(Q.Consumer,null,(function(n){return n||d(!1),t.createElement(e,s({},i,n,{ref:r}))}))};return r.displayName=n,r.WrappedComponent=e,W()(r,e)}t.useContext;var ue=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=I(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(Y,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var se=function(e,t){return"function"===typeof e?e(t):e},ce=function(e,t){return"string"===typeof e?k(e,null,null,t):e},le=function(e){return e},fe=t.forwardRef;"undefined"===typeof fe&&(fe=le);var he=fe((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=q(e,["innerRef","navigate","onClick"]),u=o.target,c=s({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=le!==fe&&n||r,t.createElement("a",c)}));var de=fe((function(e,n){var r=e.component,i=void 0===r?he:r,a=e.replace,o=e.to,u=e.innerRef,c=q(e,["component","replace","to","innerRef"]);return t.createElement(Q.Consumer,null,(function(e){e||d(!1);var r=e.history,l=ce(se(o,e.location),e.location),f=l?r.createHref(l):"",h=s({},c,{href:f,navigate:function(){var t=se(o,e.location);(a?r.replace:r.push)(t)}});return le!==fe?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),pe=function(e){return e},ve=t.forwardRef;"undefined"===typeof ve&&(ve=pe);ve((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,p=e.sensitive,v=e.strict,y=e.style,m=e.to,g=e.innerRef,k=q(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Q.Consumer,null,(function(e){e||d(!1);var r=h||e.location,a=ce(se(m,r),r),b=a.pathname,w=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),A=w?$(r.pathname,{path:w,exact:l,sensitive:p,strict:v}):null,x=!!(f?f(A,r):A),_=x?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,o):c,E=x?s({},y,{},u):y,I=s({"aria-current":x&&i||null,className:_,style:E,to:a},k);return pe!==ve?I.ref=n||g:I.innerRef=g,t.createElement(de,I)}))}));var ye=n(300);function me(e){if(Array.isArray(e))return e}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){if(e){if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function be(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function we(e,t){return me(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||ke(e,t)||be()}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ie(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||Ee(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Te=function(e){return function(e){var t=e.length>0?e:[];localStorage.setItem("cart",JSON.stringify(t))}(e),{itemCount:e.reduce((function(e,t){return e+t.quantity}),0),total:e.reduce((function(e,t){return e+t.price*t.quantity}),0)}},Se=function(e,t){switch(t.type){case"ADD_ITEM":return e.cartItems.find((function(e){return e.id===t.payload.id}))||e.cartItems.push(_e(_e({},t.payload),{},{quantity:1})),_e(_e({},e),{},{cartItems:Ie(e.cartItems)},Te(e.cartItems));case"INCREASE":var n=e.cartItems.findIndex((function(e){return e.id===t.payload.id}));return e.cartItems[n].quantity++,_e(_e({},e),{},{cartItems:Ie(e.cartItems)},Te(e.cartItems));case"DECREASE":var r=e.cartItems.findIndex((function(e){return e.id===t.payload.id})),i=e.cartItems[r];return i.quantity>1&&i.quantity--,_e(_e({},e),{},{cartItems:Ie(e.cartItems)},Te(e.cartItems));case"REMOVE_ITEM":var a=e.cartItems.filter((function(e){return e.id!==t.payload.id}));return _e(_e({},e),{},{cartItems:Ie(a)},Te(a));case"CLEAR":return localStorage.removeItem("cart"),{cartItems:[],itemCount:0,total:0};default:return e}},Ce=n(184),Ne=(0,t.createContext)(),Oe=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],Pe=_e({cartItems:Oe},Te(Oe)),Re=function(e){var n=e.children,r=we((0,t.useReducer)(Se,Pe),2),i=r[0],a=r[1],o=_e(_e({},i),{},{addProduct:function(e){return a({type:"ADD_ITEM",payload:e})},increase:function(e){return a({type:"INCREASE",payload:e})},decrease:function(e){return a({type:"DECREASE",payload:e})},removeProduct:function(e){return a({type:"REMOVE_ITEM",payload:e})},clearCart:function(e){return a({type:"CLEAR"})}});return(0,Ce.jsx)(Ne.Provider,{value:o,children:n})},De=oe((function(e){var n=e.history,r=(0,t.useContext)(Ne),i=r.itemCount,a=r.cartItems;return console.log("cartItems",a),(0,Ce.jsxs)("div",{className:"cart-container",onClick:function(){return n.push("/cart")},children:[(0,Ce.jsx)("img",{src:ye,alt:"shopping-cart-icon"}),i>0?(0,Ce.jsx)("span",{className:"cart-count",children:i}):null]})})),Le=function(){return(0,Ce.jsxs)("nav",{className:"nav-menu container",children:[(0,Ce.jsx)("div",{className:"logo",children:(0,Ce.jsx)(de,{to:"/",children:"NOMAD"})}),(0,Ce.jsxs)("ul",{children:[(0,Ce.jsx)("li",{children:(0,Ce.jsx)(de,{to:"/",children:"Home"})}),(0,Ce.jsx)("li",{children:(0,Ce.jsx)(de,{to:"/shop",children:"Shop"})})]}),(0,Ce.jsx)(De,{})]})},Me=function(){var e=(new Date).getFullYear();return(0,Ce.jsxs)("div",{className:"footer",children:[e," \xa9 NOMAD Store"]})},je=function(e){var t=e.children;return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(Le,{}),(0,Ce.jsx)("main",{children:t}),(0,Ce.jsx)(Me,{})]})},Fe=oe((function(e){var t=e.history;return(0,Ce.jsx)("section",{className:"hero is-info is-large hero-image",children:(0,Ce.jsx)("div",{className:"hero-body",children:(0,Ce.jsxs)("div",{className:"container",children:[(0,Ce.jsx)("h1",{className:"hero-title",children:"Bags Reimagined"}),(0,Ce.jsx)("div",{className:"shop-now-btn",children:(0,Ce.jsx)("button",{onClick:function(){return t.push("/shop")},className:"button is-black",id:"shop-now",children:"SHOP NOW"})})]})})})})),Ue=n(375),Ve=oe((function(e){var t=e.history;return(0,Ce.jsx)("div",{className:"main-section-container",children:(0,Ce.jsxs)("div",{className:"main-section-middle",children:[(0,Ce.jsx)("div",{className:"ms-m-image",children:(0,Ce.jsx)("img",{src:Ue,alt:"studio bag"})}),(0,Ce.jsxs)("div",{className:"ms-m-description",children:[(0,Ce.jsx)("h2",{children:"Designed for fashion. Crafted for sport."}),(0,Ce.jsx)("p",{children:"We make products that effortlessly transition from day to night. From the board room to the fitness studio, and everywhere in between, each Nomads piece is thoughtfully created to be the perfect balance of form and function."}),(0,Ce.jsx)("button",{className:"button is-black",id:"shop-now",onClick:function(){return t.push("/product/1")},children:"STUDIO BAG"})]})]})})})),Be=[{id:1,title:"Studio Bag",description:"The Studio Bag is identical to its predecessor plus a few more inches to love. Transition it from satchel to backpack to crossbody simply by changing straps. Carry it wherever you go - it will be ready to adapt to your needs and keep up with your lifestyle.",imageUrl:"https://i.ibb.co/PcXVJ8m/studiobag.jpg",price:15},{id:2,title:"Cumulus",description:"Light as air. The Cumulus is encased in cloud-like waterproof nylon and has a spacious main interior. Collapse it for easy travel and snap it shut with magnetic closures.",imageUrl:"https://i.ibb.co/NtpJ0XQ/cumulus-olive.png",price:28},{id:3,title:"Dance Bag Nylon",description:"For days when you just need to grab and go. The Dance Bag is a compact, gumdrop-shaped backpack wrapped in water-repellent nylon. It\u2019s the perfect carry-all for your life in motion.",imageUrl:"https://i.ibb.co/yRKyXPJ/dance-nylon.png",price:35},{id:4,title:"Stratus Backpack",description:"The Stratus is encased in cloud-like waterproof nylon and features exterior + interior pockets for your water bottle, umbrella, and laptop. Reach around to the side for on-the-go access to the main compartment. Collapse it for easy travel. Your backpack just got an upgrade.",imageUrl:"https://i.ibb.co/Br2W7F0/stratus-backpack.png",price:30},{id:5,title:"Cirrus",description:"The Cirrus rucksack is encased in cloud-like waterproof nylon and features ample interior and exterior pockets, including built-in phone + battery pockets to stay powered up on the go. Luggage slip and secure passport sleeve make it the perfect travel companion. Adventure away.",imageUrl:"https://i.ibb.co/CPv6xTF/cirrus1.jpg",price:65},{id:6,title:"Mini Circle",description:"The Mini Circle is the ultimate multipurpose grab and go style. Transfer it from crossbody to waistbelt to wristlet simply by changing straps. Internal built-in battery that can charge your USB device. Vegan friendly.",imageUrl:"https://i.ibb.co/LNNw217/mini-circle.png",price:40},{id:7,title:"Studio Bag Vaqueta",description:"You\u2019re not any one thing, why should your bag be? The Studio Bag Vaqueta features everything you know and love about the Studio Bag wrapped up in colorful Italian nylon and exquisite vaqueta leather. ",imageUrl:"https://i.ibb.co/QmGdpLf/studio-bag-vaqueta.jpg",price:75},{id:8,title:"Sling",description:"The Sling is encased in cloud-like waterproof nylon, features eight pockets, and can be worn as a waistbag or crossbody sling. Five colors, multiple carrying modes, all you. Vegan friendly + made for everyone.",imageUrl:"https://i.ibb.co/LzyPnF3/sling.png",price:25}],qe=(0,t.createContext)(),ze=function(e){var n=e.children,r=we((0,t.useState)(Be),1)[0];return(0,Ce.jsx)(qe.Provider,{value:{products:r},children:n})};function We(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){We(a,r,i,o,u,"next",e)}function u(e){We(a,r,i,o,u,"throw",e)}o(void 0)}))}}var He=n(757),Ge=n.n(He);function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ke(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&i(e,t)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){if(t&&("object"===nt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}function it(e){var t=tt();return function(){var n,r=et(e);if(t){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt(this,n)}}function at(e,t,n){return at=tt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},at.apply(null,arguments)}function ot(e){var t="function"===typeof Map?new Map:void 0;return ot=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return at(e,arguments,et(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},ot(e)}var ut=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},st={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ut(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ct=function(e){return function(e){var t=ut(e);return st.encodeByteArray(t,!0)}(e).replace(/\./g,"")},lt=function(e){try{return st.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ft(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&ht(n)&&(e[n]=ft(e[n],t[n]));return e}function ht(e){return"__proto__"!==e}var dt=function(){function e(){var t=this;Qe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Je(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function pt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(a)),""].join(".")}function vt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function mt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function gt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function kt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function bt(){var e=vt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wt(){return"object"===typeof indexedDB}var At=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf($e(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace($e(a),xt.prototype.create),a}return Je(n)}(ot(Error)),xt=function(){function e(t,n,r){Qe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Je(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?_t(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new At(n,a,t);return o}}]),e}();function _t(e,t){return e.replace(Et,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Et=/\{\$([^}]+)}/g;function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Tt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(St(u)&&St(s)){if(!Tt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function St(e){return null!==e&&"object"===typeof e}function Ct(e){for(var t=[],n=function(){var e=we(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Nt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=we(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ot(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Pt(e,t){var n=new Rt(e,t);return n.subscribe.bind(n)}var Rt=function(){function e(t,n){var r=this;Qe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Je(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Xe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Dt),void 0===r.error&&(r.error=Dt),void 0===r.complete&&(r.complete=Dt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Dt(){}function Lt(e){return e&&e._delegate?e._delegate:e}var Mt=function(){function e(t,n,r){Qe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Je(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),jt="[DEFAULT]",Ft=function(){function e(t,n){Qe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Je(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new dt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jt})}catch(s){}var t,n=Xe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=we(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ke(He.mark((function e(){var t;return He.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ie(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ie(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Xe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=we(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch($p){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===jt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch($p){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.component?this.component.multipleInstances?e:jt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ut,Vt,Bt=function(){function e(t){Qe(this,e),this.name=t,this.providers=new Map}return Je(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ft(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),qt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vt||(Vt={}));var zt,Wt,Kt={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},Ht=Vt.INFO,Gt=(Ae(Ut={},Vt.DEBUG,"log"),Ae(Ut,Vt.VERBOSE,"log"),Ae(Ut,Vt.INFO,"info"),Ae(Ut,Vt.WARN,"warn"),Ae(Ut,Vt.ERROR,"error"),Ut),Qt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Yt=function(){function e(t){Qe(this,e),this.name=t,this._logLevel=Ht,this._logHandler=Qt,this._userLogHandler=null,qt.push(this)}return Je(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Vt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Kt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Vt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Vt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vt.INFO].concat(t)),this._logHandler.apply(this,[this,Vt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vt.WARN].concat(t)),this._logHandler.apply(this,[this,Vt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Vt.ERROR].concat(t)),this._logHandler.apply(this,[this,Vt.ERROR].concat(t))}}]),e}();var Jt=function(){function e(t){Qe(this,e),this.container=t}return Je(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Xt="@firebase/app",$t="0.7.11",Zt=new Yt("@firebase/app"),en="[DEFAULT]",tn=(Ae(zt={},Xt,"fire-core"),Ae(zt,"@firebase/app-compat","fire-core-compat"),Ae(zt,"@firebase/analytics","fire-analytics"),Ae(zt,"@firebase/analytics-compat","fire-analytics-compat"),Ae(zt,"@firebase/app-check","fire-app-check"),Ae(zt,"@firebase/app-check-compat","fire-app-check-compat"),Ae(zt,"@firebase/auth","fire-auth"),Ae(zt,"@firebase/auth-compat","fire-auth-compat"),Ae(zt,"@firebase/database","fire-rtdb"),Ae(zt,"@firebase/database-compat","fire-rtdb-compat"),Ae(zt,"@firebase/functions","fire-fn"),Ae(zt,"@firebase/functions-compat","fire-fn-compat"),Ae(zt,"@firebase/installations","fire-iid"),Ae(zt,"@firebase/installations-compat","fire-iid-compat"),Ae(zt,"@firebase/messaging","fire-fcm"),Ae(zt,"@firebase/messaging-compat","fire-fcm-compat"),Ae(zt,"@firebase/performance","fire-perf"),Ae(zt,"@firebase/performance-compat","fire-perf-compat"),Ae(zt,"@firebase/remote-config","fire-rc"),Ae(zt,"@firebase/remote-config-compat","fire-rc-compat"),Ae(zt,"@firebase/storage","fire-gcs"),Ae(zt,"@firebase/storage-compat","fire-gcs-compat"),Ae(zt,"@firebase/firestore","fire-fst"),Ae(zt,"@firebase/firestore-compat","fire-fst-compat"),Ae(zt,"fire-js","fire-js"),Ae(zt,"firebase","fire-js-all"),zt),nn=new Map,rn=new Map;function an(e,t){try{e.container.addComponent(t)}catch(n){Zt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function on(e,t){e.container.addOrOverwriteComponent(t)}function un(e){var t=e.name;if(rn.has(t))return Zt.debug("There were multiple attempts to register component ".concat(t,".")),!1;rn.set(t,e);var n,r=Xe(nn.values());try{for(r.s();!(n=r.n()).done;){an(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function sn(e,t){return e.container.getProvider(t)}function cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en;sn(e,t).clearInstance(n)}function ln(){rn.clear()}var fn,hn,dn=(Ae(Wt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ae(Wt,"bad-app-name","Illegal App name: '{$appName}"),Ae(Wt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ae(Wt,"app-deleted","Firebase App named '{$appName}' already deleted"),Ae(Wt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ae(Wt,"invalid-log-argument","First argument to `onLog` must be null or a function."),Wt),pn=new xt("app","Firebase",dn),vn=function(){function e(t,n,r){var i=this;Qe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",(function(){return i}),"PUBLIC"))}return Je(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}]),e}(),yn="9.6.1";function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:en,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw pn.create("bad-app-name",{appName:String(i)});var a=nn.get(i);if(a){if(Tt(e,a.options)&&Tt(r,a.config))return a;throw pn.create("duplicate-app",{appName:i})}var o,u=new Bt(i),s=Xe(rn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new vn(e,r,u);return nn.set(i,l),l}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=nn.get(e);if(!t)throw pn.create("no-app",{appName:e});return t}function kn(){return Array.from(nn.values())}function bn(e){return wn.apply(this,arguments)}function wn(){return(wn=Ke(He.mark((function e(t){var n;return He.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!nn.has(n)){e.next=6;break}return nn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t,n){var r,i=null!==(r=tn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Zt.warn(u.join(" "))}un(new Mt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function xn(e,t){if(null!==e&&"function"!==typeof e)throw pn.create("invalid-log-argument");!function(e,t){var n,r=Xe(qt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Kt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Vt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function _n(e){var t;t=e,qt.forEach((function(e){e.setLogLevel(t)}))}fn="",un(new Mt("platform-logger",(function(e){return new Jt(e)}),"PRIVATE")),An(Xt,$t,fn),An(Xt,$t,"esm2017"),An("fire-js","");var En=function(){function e(t,n){var r=this;Qe(this,e),this._delegate=t,this.firebase=n,an(t,new Mt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Je(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),bn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:en;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){an(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){on(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),In=(Ae(hn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ae(hn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),hn),Tn=new xt("app-compat","Firebase",In);var Sn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=mn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(It(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:An,setLogLevel:_n,onLog:xn,apps:null,SDK_VERSION:yn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(un(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Tn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ft(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!It(n,e=e||en))throw Tn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(En);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ft(n,e)},createSubscribe:Pt,ErrorFactory:xt,deepExtend:ft}),n}(),Cn=new Yt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Cn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Nn=self.firebase.SDK_VERSION;Nn&&Nn.indexOf("LITE")>=0&&Cn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var On=Sn;!function(e){An("@firebase/app-compat","0.1.12",e)}();function Pn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=et(e)););return e}function Rn(){return Rn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Pn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Rn.apply(this,arguments)}On.registerVersion("firebase","9.6.1","app-compat");var Dn,Ln="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Mn={},jn=jn||{},Fn=Ln||self;function Un(){}function Vn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Bn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qn="closure_uid_"+(1e9*Math.random()>>>0),zn=0;function Wn(e,t,n){return e.call.apply(e.bind,arguments)}function Kn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Hn(e,t,n){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wn:Kn).apply(null,arguments)}function Gn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Qn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Yn(){this.s=this.s,this.o=this.o}var Jn={};Yn.prototype.s=!1,Yn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,qn)&&e[qn]||(e[qn]=++zn)}(this);delete Jn[e]}},Yn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},$n=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Zn(e){return Array.prototype.concat.apply([],arguments)}function er(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function tr(e){return/^[\s\xa0]*$/.test(e)}var nr,rr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ir(e,t){return-1!=e.indexOf(t)}function ar(e,t){return e<t?-1:e>t?1:0}e:{var or=Fn.navigator;if(or){var ur=or.userAgent;if(ur){nr=ur;break e}}nr=""}function sr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function cr(e){var t={};for(var n in e)t[n]=e[n];return t}var lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<lr.length;a++)n=lr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hr(e){return hr[" "](e),e}hr[" "]=Un;var dr,pr=ir(nr,"Opera"),vr=ir(nr,"Trident")||ir(nr,"MSIE"),yr=ir(nr,"Edge"),mr=yr||vr,gr=ir(nr,"Gecko")&&!(ir(nr.toLowerCase(),"webkit")&&!ir(nr,"Edge"))&&!(ir(nr,"Trident")||ir(nr,"MSIE"))&&!ir(nr,"Edge"),kr=ir(nr.toLowerCase(),"webkit")&&!ir(nr,"Edge");function br(){var e=Fn.document;return e?e.documentMode:void 0}e:{var wr="",Ar=function(){var e=nr;return gr?/rv:([^\);]+)(\)|;)/.exec(e):yr?/Edge\/([\d\.]+)/.exec(e):vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):kr?/WebKit\/(\S+)/.exec(e):pr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ar&&(wr=Ar?Ar[1]:""),vr){var xr=br();if(null!=xr&&xr>parseFloat(wr)){dr=String(xr);break e}}dr=wr}var _r,Er={};function Ir(){return function(e){var t=Er;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=rr(String(dr)).split("."),n=rr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ar(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ar(0==a[2].length,0==o[2].length)||ar(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Fn.document&&vr){var Tr=br();_r=Tr||(parseInt(dr,10)||void 0)}else _r=void 0;var Sr=_r,Cr=function(){if(!Fn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Fn.addEventListener("test",Un,t),Fn.removeEventListener("test",Un,t)}catch(n){}return e}();function Nr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Or(e,t){if(Nr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gr){e:{try{hr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Pr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Or.Z.h.call(this)}}Nr.prototype.h=function(){this.defaultPrevented=!0},Qn(Or,Nr);var Pr={2:"touch",3:"pen",4:"mouse"};Or.prototype.h=function(){Or.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Rr="closure_listenable_"+(1e6*Math.random()|0),Dr=0;function Lr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dr,this.ca=this.fa=!1}function Mr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function jr(e){this.src=e,this.g={},this.h=0}function Fr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Xn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Mr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ur(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}jr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ur(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Lr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Vr="closure_lm_"+(1e6*Math.random()|0),Br={};function qr(e,t,n,r,i){if(r&&r.once)return Wr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qr(e,t[a],n,r,i);return null}return n=Xr(n),e&&e[Rr]?e.N(t,n,Bn(r)?!!r.capture:!!r,i):zr(e,t,n,!1,r,i)}function zr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Bn(i)?!!i.capture:!!i,u=Yr(e);if(u||(e[Vr]=u=new jr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Qr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Cr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wr(e,t[a],n,r,i);return null}return n=Xr(n),e&&e[Rr]?e.O(t,n,Bn(r)?!!r.capture:!!r,i):zr(e,t,n,!0,r,i)}function Kr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Kr(e,t[a],n,r,i);else r=Bn(r)?!!r.capture:!!r,n=Xr(n),e&&e[Rr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ur(a=e.g[t],n,r,i))&&(Mr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ur(t,n,r,i)),(n=-1<e?t[e]:null)&&Hr(n))}function Hr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Rr])Fr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yr(t))?(Fr(n,e),0==n.h&&(n.src=null,t[Vr]=null)):Mr(e)}}}function Gr(e){return e in Br?Br[e]:Br[e]="on"+e}function Qr(e,t){if(e.ca)e=!0;else{t=new Or(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Hr(e),e=n.call(r,t)}return e}function Yr(e){return(e=e[Vr])instanceof jr?e:null}var Jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(e){return"function"===typeof e?e:(e[Jr]||(e[Jr]=function(t){return e.handleEvent(t)}),e[Jr])}function $r(){Yn.call(this),this.i=new jr(this),this.P=this,this.I=null}function Zr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Nr(t,e);else if(t instanceof Nr)t.target=t.target||e;else{var i=t;fr(t=new Nr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ei(o,r,!0,t)&&i}if(i=ei(o=t.g=e,r,!0,t)&&i,i=ei(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ei(o=t.g=n[a],r,!1,t)&&i}function ei(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Fr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Qn($r,Yn),$r.prototype[Rr]=!0,$r.prototype.removeEventListener=function(e,t,n,r){Kr(this,e,t,n,r)},$r.prototype.M=function(){if($r.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mr(n[r]);delete t.g[e],t.h--}}this.I=null},$r.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$r.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ti=Fn.JSON.stringify;function ni(){var e=li,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ri,ii=function(){function e(){Qe(this,e),this.h=this.g=null}return Je(e,[{key:"add",value:function(e,t){var n=ai.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ai=new(function(){function e(t,n){Qe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Je(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new oi}),(function(e){return e.reset()})),oi=function(){function e(){Qe(this,e),this.next=this.g=this.h=null}return Je(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ui(e){Fn.setTimeout((function(){throw e}),0)}function si(e,t){ri||function(){var e=Fn.Promise.resolve(void 0);ri=function(){e.then(fi)}}(),ci||(ri(),ci=!0),li.add(e,t)}var ci=!1,li=new ii;function fi(){for(var e;e=ni();){try{e.h.call(e.g)}catch(n){ui(n)}var t=ai;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ci=!1}function hi(e,t){$r.call(this),this.h=e||1,this.g=t||Fn,this.j=Hn(this.kb,this),this.l=Date.now()}function di(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function pi(e,t,n){if("function"===typeof e)n&&(e=Hn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Hn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Fn.setTimeout(e,t||0)}function vi(e){e.g=pi((function(){e.g=null,e.i&&(e.i=!1,vi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Qn(hi,$r),(Dn=hi.prototype).da=!1,Dn.S=null,Dn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zr(this,"tick"),this.da&&(di(this),this.start()))}},Dn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dn.M=function(){hi.Z.M.call(this),di(this),delete this.g};var yi=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Je(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vi(this)}},{key:"M",value:function(){Rn(et(n.prototype),"M",this).call(this),this.g&&(Fn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Yn);function mi(e){Yn.call(this),this.h=e,this.g={}}Qn(mi,Yn);var gi=[];function ki(e,t,n,r){Array.isArray(n)||(n&&(gi[0]=n.toString()),n=gi);for(var i=0;i<n.length;i++){var a=qr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function bi(e){sr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hr(e)}),e),e.g={}}function wi(){this.g=!0}function Ai(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ti(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}mi.prototype.M=function(){mi.Z.M.call(this),bi(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wi.prototype.Aa=function(){this.g=!1},wi.prototype.info=function(){};var xi={},_i=null;function Ei(){return _i=_i||new $r}function Ii(e){Nr.call(this,xi.Ma,e)}function Ti(e){var t=Ei();Zr(t,new Ii(t,e))}function Si(e,t){Nr.call(this,xi.STAT_EVENT,e),this.stat=t}function Ci(e){var t=Ei();Zr(t,new Si(t,e))}function Ni(e,t){Nr.call(this,xi.Na,e),this.size=t}function Oi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Fn.setTimeout((function(){e()}),t)}xi.Ma="serverreachability",Qn(Ii,Nr),xi.STAT_EVENT="statevent",Qn(Si,Nr),xi.Na="timingevent",Qn(Ni,Nr);var Pi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ri={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Di(){}function Li(e){return e.h||(e.h=e.i())}function Mi(){}Di.prototype.h=null;var ji,Fi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ui(){Nr.call(this,"d")}function Vi(){Nr.call(this,"c")}function Bi(){}function qi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new mi(this),this.P=Wi,e=mr?125:void 0,this.W=new hi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new zi}function zi(){this.i=null,this.g="",this.h=!1}Qn(Ui,Nr),Qn(Vi,Nr),Qn(Bi,Di),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},ji=new Bi;var Wi=45e3,Ki={},Hi={};function Gi(e,t,n){e.K=1,e.v=ya(la(t)),e.s=n,e.U=!0,Qi(e,null)}function Qi(e,t){e.F=Date.now(),$i(e),e.A=la(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ca(n.h,"t",r),e.C=0,n=e.l.H,e.h=new zi,e.g=Po(e.l,n?t:null,!e.s),0<e.O&&(e.L=new yi(Hn(e.Ia,e,e.g),e.O)),ki(e.V,e.g,"readystatechange",e.gb),t=e.H?cr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ti(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Yi(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ji(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xi(e,n))==Hi){4==t&&(e.o=4,Ci(14),i=!1),Ai(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ki){e.o=4,Ci(15),Ai(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ai(e.j,e.m,r,null),ra(e,r)}Yi(e)&&r!=Hi&&r!=Ki&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ci(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_o(t),t.L=!0,Ci(11))):(Ai(e.j,e.m,n,"[Invalid Chunked Response]"),na(e),ta(e))}function Xi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hi:(n=Number(t.substring(n,r)),isNaN(n)?Ki:(r+=1)+n>t.length?Hi:(t=t.substr(r,n),e.C=r+n,t))}function $i(e){e.Y=Date.now()+e.P,Zi(e,e.P)}function Zi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Oi(Hn(e.eb,e),t)}function ea(e){e.B&&(Fn.clearTimeout(e.B),e.B=null)}function ta(e){0==e.l.G||e.I||To(e.l,e)}function na(e){ea(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,di(e.W),bi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ra(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ja(n.i,e)))if(n.I=e.N,!e.J&&ja(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Io(n),vo(n)}xo(n),Ci(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Oi(Hn(n.ab,n),6e3));if(1>=Ma(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Co(n,11)}else if((e.J||n.g==e)&&Io(n),!tr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ir(l,"spdy")||ir(l,"quic")||ir(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Fa(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,va(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Oo(r,r.H?r.la:null,r.W),d.J){Ua(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ea(p),$i(p)),r.g=d}else Ao(r);0<n.l.length&&go(n)}else"stop"!=a[0]&&"close"!=a[0]||Co(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Co(n,7):po(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ti(4)}catch(a){}}function ia(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Vn(e)||"string"===typeof e)$n(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Vn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Vn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function aa(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof aa)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function oa(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ua(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ua(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ua(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Dn=qi.prototype).setTimeout=function(e){this.P=e},Dn.gb=function(e){e=e.target;var t=this.L;t&&3==so(e)?t.l():this.Ia(e)},Dn.Ia=function(e){try{if(e==this.g)e:{var t=so(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||mr||this.g&&(this.h.h||this.g.ga()||co(this.g)))){this.I||4!=t||7==n||Ti(8==n||0>=r?3:2),ea(this);var i=this.g.ba();this.N=i;t:if(Yi(this)){var a=co(this.g);e="";var o=a.length,u=4==so(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){na(this),ta(this);var s="";break t}this.h.i=new Fn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tr(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ci(12),na(this),ta(this);break e}Ai(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ra(this,i)}this.U?(Ji(this,t,s),mr&&this.i&&3==t&&(ki(this.V,this.W,"tick",this.fb),this.W.start())):(Ai(this.j,this.m,s,null),ra(this,s)),4==t&&na(this),this.i&&!this.I&&(4==t?To(this.l,this):(this.i=!1,$i(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),na(this),ta(this)}}}catch(t){}},Dn.fb=function(){if(this.g){var e=so(this.g),t=this.g.ga();this.C<t.length&&(ea(this),Ji(this,e,t),this.i&&4!=e&&$i(this))}},Dn.cancel=function(){this.I=!0,na(this)},Dn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ti(3),Ci(17)),na(this),this.o=2,ta(this)):Zi(this,this.Y-e)},(Dn=aa.prototype).R=function(){oa(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Dn.T=function(){return oa(this),this.g.concat()},Dn.get=function(e,t){return ua(this.h,e)?this.h[e]:t},Dn.set=function(e,t){ua(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Dn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var sa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ca(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ca){this.g=void 0!==t?t:e.g,fa(this,e.j),this.s=e.s,ha(this,e.i),da(this,e.m),this.l=e.l,t=e.h;var n=new Ea;n.i=t.i,t.g&&(n.g=new aa(t.g),n.h=t.h),pa(this,n),this.o=e.o}else e&&(n=String(e).match(sa))?(this.g=!!t,fa(this,n[1]||"",!0),this.s=ma(n[2]||""),ha(this,n[3]||"",!0),da(this,n[4]),this.l=ma(n[5]||"",!0),pa(this,n[6]||"",!0),this.o=ma(n[7]||"")):(this.g=!!t,this.h=new Ea(null,this.g))}function la(e){return new ca(e)}function fa(e,t,n){e.j=n?ma(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ha(e,t,n){e.i=n?ma(t,!0):t}function da(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function pa(e,t,n){t instanceof Ea?(e.h=t,function(e,t){t&&!e.j&&(Ia(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ta(this,t),Ca(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ga(t,xa)),e.h=new Ea(t,e.g))}function va(e,t,n){e.h.set(t,n)}function ya(e){return va(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ma(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ga(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ka),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ka(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ca.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ga(t,ba,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ga(t,ba,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ga(n,"/"==n.charAt(0)?Aa:wa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ga(n,_a)),e.join("")};var ba=/[#\/\?@]/g,wa=/[#\?:]/g,Aa=/[#\?]/g,xa=/[#\?@]/g,_a=/#/g;function Ea(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ia(e){e.g||(e.g=new aa,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ta(e,t){Ia(e),t=Na(e,t),ua(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ua((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&oa(e)))}function Sa(e,t){return Ia(e),t=Na(e,t),ua(e.g.h,t)}function Ca(e,t,n){Ta(e,t),0<n.length&&(e.i=null,e.g.set(Na(e,t),er(n)),e.h+=n.length)}function Na(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dn=Ea.prototype).add=function(e,t){Ia(this),this.i=null,e=Na(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dn.forEach=function(e,t){Ia(this),this.g.forEach((function(n,r){$n(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Dn.T=function(){Ia(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Dn.R=function(e){Ia(this);var t=[];if("string"===typeof e)Sa(this,e)&&(t=Zn(t,this.g.get(Na(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Zn(t,e[n])}return t},Dn.set=function(e,t){return Ia(this),this.i=null,Sa(this,e=Na(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Dn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Oa=Je((function e(t,n){Qe(this,e),this.h=t,this.g=n}));function Pa(e){this.l=e||Da,Fn.PerformanceNavigationTiming?e=0<(e=Fn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Fn.g&&Fn.g.Ea&&Fn.g.Ea()&&Fn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ra,Da=10;function La(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ma(e){return e.h?1:e.g?e.g.size:0}function ja(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fa(e,t){e.g?e.g.add(t):e.h=t}function Ua(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Va(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Xe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return er(e.i)}function Ba(){}function qa(){this.g=new Ba}function za(e,t,n){var r=n||"";try{ia(e,(function(e,n){var i=e;Bn(e)&&(i=ti(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ka(e){this.l=e.$b||null,this.j=e.ib||!1}function Ha(e,t){$r.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pa.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Xe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ba.prototype.stringify=function(e){return Fn.JSON.stringify(e,void 0)},Ba.prototype.parse=function(e){return Fn.JSON.parse(e,void 0)},Qn(Ka,Di),Ka.prototype.g=function(){return new Ha(this.l,this.j)},Ka.prototype.i=(Ra={},function(){return Ra}),Qn(Ha,$r);var Ga=0;function Qa(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ya(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ja(e)}function Ja(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dn=Ha.prototype).open=function(e,t){if(this.readyState!=Ga)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ja(this)},Dn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Fn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Dn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ya(this)),this.readyState=Ga},Dn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Fn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qa(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Dn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ya(this):Ja(this),3==this.readyState&&Qa(this)}},Dn.Ua=function(e){this.g&&(this.response=this.responseText=e,Ya(this))},Dn.Ta=function(e){this.g&&(this.response=e,Ya(this))},Dn.ha=function(){this.g&&Ya(this)},Dn.setRequestHeader=function(e,t){this.v.append(e,t)},Dn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xa=Fn.JSON.parse;function $a(e){$r.call(this),this.headers=new aa,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Za,this.K=this.L=!1}Qn($a,$r);var Za="",eo=/^https?$/i,to=["POST","PUT"];function no(e){return"content-type"==e.toLowerCase()}function ro(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,io(e),oo(e)}function io(e){e.D||(e.D=!0,Zr(e,"complete"),Zr(e,"error"))}function ao(e){if(e.h&&"undefined"!=typeof jn&&(!e.C[1]||4!=so(e)||2!=e.ba()))if(e.v&&4==so(e))pi(e.Fa,0,e);else if(Zr(e,"readystatechange"),4==so(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(sa)[1]||null;if(!a&&Fn.self&&Fn.self.location){var o=Fn.self.location.protocol;a=o.substr(0,o.length-1)}i=!eo.test(a?a.toLowerCase():"")}t=i}if(t)Zr(e,"complete"),Zr(e,"success");else{e.m=6;try{var u=2<so(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",io(e)}}finally{oo(e)}}}function oo(e,t){if(e.g){uo(e);var n=e.g,r=e.C[0]?Un:null;e.g=null,e.C=null,t||Zr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function uo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Fn.clearTimeout(e.A),e.A=null)}function so(e){return e.g?e.g.readyState:0}function co(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Za:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function lo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return sr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):va(e,t,n))}function fo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ho(e){this.za=0,this.l=[],this.h=new wi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fo("baseRetryDelayMs",5e3,e),this.$a=fo("retryDelaySeedMs",1e4,e),this.Ya=fo("forwardChannelMaxRetries",2,e),this.ra=fo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Pa(e&&e.concurrentRequestLimit),this.Ca=new qa,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function po(e){if(yo(e),3==e.G){var t=e.V++,n=la(e.F);va(n,"SID",e.J),va(n,"RID",t),va(n,"TYPE","terminate"),bo(e,n),(t=new qi(e,e.h,t,void 0)).K=2,t.v=ya(la(n)),n=!1,Fn.navigator&&Fn.navigator.sendBeacon&&(n=Fn.navigator.sendBeacon(t.v.toString(),"")),!n&&Fn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Po(t.l,null),t.g.ea(t.v)),t.F=Date.now(),$i(t)}No(e)}function vo(e){e.g&&(_o(e),e.g.cancel(),e.g=null)}function yo(e){vo(e),e.u&&(Fn.clearTimeout(e.u),e.u=null),Io(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Fn.clearTimeout(e.m),e.m=null)}function mo(e,t){e.l.push(new Oa(e.Za++,t)),3==e.G&&go(e)}function go(e){La(e.i)||e.m||(e.m=!0,si(e.Ha,e),e.C=0)}function ko(e,t){var n;n=t?t.m:e.V++;var r=la(e.F);va(r,"SID",e.J),va(r,"RID",n),va(r,"AID",e.U),bo(e,r),e.o&&e.s&&lo(r,e.o,e.s),n=new qi(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=wo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Fa(e.i,n),Gi(n,r,t)}function bo(e,t){e.j&&ia({},(function(e,n){va(t,n,e)}))}function wo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Hn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{za(l,o,"req"+c+"_")}catch(lu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ao(e){e.g||e.u||(e.Y=1,si(e.Ga,e),e.A=0)}function xo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Oi(Hn(e.Ga,e),So(e,e.A)),e.A++,!0)}function _o(e){null!=e.B&&(Fn.clearTimeout(e.B),e.B=null)}function Eo(e){e.g=new qi(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=la(e.oa);va(t,"RID","rpc"),va(t,"SID",e.J),va(t,"CI",e.N?"0":"1"),va(t,"AID",e.U),bo(e,t),va(t,"TYPE","xmlhttp"),e.o&&e.s&&lo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ya(la(t)),n.s=null,n.U=!0,Qi(n,e)}function Io(e){null!=e.v&&(Fn.clearTimeout(e.v),e.v=null)}function To(e,t){var n=null;if(e.g==t){Io(e),_o(e),e.g=null;var r=2}else{if(!ja(e.i,t))return;n=t.D,Ua(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Zr(r=Ei(),new Ni(r,n,t,i)),go(e)}else Ao(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ma(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Oi(Hn(e.Ha,e,t),So(e,e.C)),e.C++,!0))}(e,t)||2==r&&xo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Co(e,5);break;case 4:Co(e,10);break;case 3:Co(e,6);break;default:Co(e,2)}}function So(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Co(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Hn(e.jb,e);n||(n=new ca("//www.google.com/images/cleardot.gif"),Fn.location&&"http"==Fn.location.protocol||fa(n,"https"),ya(n)),function(e,t){var n=new wi;if(Fn.Image){var r=new Image;r.onload=Gn(Wa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Gn(Wa,n,r,"TestLoadImage: error",!1,t),r.onabort=Gn(Wa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Gn(Wa,n,r,"TestLoadImage: timeout",!1,t),Fn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ci(2);e.G=0,e.j&&e.j.va(t),No(e),yo(e)}function No(e){e.G=0,e.I=-1,e.j&&(0==Va(e.i).length&&0==e.l.length||(e.i.i.length=0,er(e.l),e.l.length=0),e.j.ua())}function Oo(e,t,n){var r=function(e){return e instanceof ca?la(e):new ca(e,void 0)}(n);if(""!=r.i)t&&ha(r,t+"."+r.i),da(r,r.m);else{var i=Fn.location;r=function(e,t,n,r){var i=new ca(null,void 0);return e&&fa(i,e),t&&ha(i,t),n&&da(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&sr(e.aa,(function(e,t){va(r,t,e)})),t=e.D,n=e.sa,t&&n&&va(r,t,n),va(r,"VER",e.ma),bo(e,r),r}function Po(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new $a(new Ka({ib:!0})):new $a(e.qa)).L=e.H,t}function Ro(){}function Do(){if(vr&&!(10<=Number(Sr)))throw Error("Environmental error: no available transport.")}function Lo(e,t){$r.call(this),this.g=new ho(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!tr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!tr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Fo(this)}function Mo(e){Ui.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jo(){Vi.call(this),this.status=1}function Fo(e){this.g=e}(Dn=$a.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ji.g(),this.C=this.u?Li(this.u):Li(ji),this.g.onreadystatechange=Hn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ro(this,a)}e=n||"";var i=new aa(this.headers);r&&ia(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=no,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Fn.FormData&&e instanceof Fn.FormData,!(0<=Xn(to,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uo(this),0<this.B&&((this.K=function(e){return vr&&Ir()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.pa,this)):this.A=pi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ro(this,a)}},Dn.pa=function(){"undefined"!=typeof jn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},Dn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zr(this,"complete"),Zr(this,"abort"),oo(this))},Dn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oo(this,!0)),$a.Z.M.call(this)},Dn.Fa=function(){this.s||(this.F||this.v||this.l?ao(this):this.cb())},Dn.cb=function(){ao(this)},Dn.ba=function(){try{return 2<so(this)?this.g.status:-1}catch(Ra){return-1}},Dn.ga=function(){try{return this.g?this.g.responseText:""}catch(Ra){return""}},Dn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xa(t)}},Dn.Da=function(){return this.m},Dn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dn=ho.prototype).ma=8,Dn.G=1,Dn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Dn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new qi(this,this.h,e,void 0),n=this.s;if(this.P&&(n?fr(n=cr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=wo(this,t,r),va(i=la(this.F),"RID",e),va(i,"CVER",22),this.D&&va(i,"X-HTTP-Session-Id",this.D),bo(this,i),this.o&&n&&lo(i,this.o,n),Fa(this.i,t),this.Ra&&va(i,"TYPE","init"),this.ja?(va(i,"$req",r),va(i,"SID","null"),t.$=!0,Gi(t,i,null)):Gi(t,i,r),this.G=2}}else 3==this.G&&(e?ko(this,e):0==this.l.length||La(this.i)||ko(this))},Dn.Ga=function(){if(this.u=null,Eo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Oi(Hn(this.bb,this),e)}},Dn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ci(10),vo(this),Eo(this))},Dn.ab=function(){null!=this.v&&(this.v=null,vo(this),xo(this),Ci(19))},Dn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ci(2)):(this.h.info("Failed to ping google.com"),Ci(1))},(Dn=Ro.prototype).xa=function(){},Dn.wa=function(){},Dn.va=function(){},Dn.ua=function(){},Dn.Oa=function(){},Do.prototype.g=function(e,t){return new Lo(e,t)},Qn(Lo,$r),Lo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),si(Hn(e.hb,e,t))),Ci(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Oo(e,null,e.W),go(e)},Lo.prototype.close=function(){po(this.g)},Lo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,mo(this.g,t)}else this.v?((t={}).__data__=ti(e),mo(this.g,t)):mo(this.g,e)},Lo.prototype.M=function(){this.g.j=null,delete this.j,po(this.g),delete this.g,Lo.Z.M.call(this)},Qn(Mo,Ui),Qn(jo,Vi),Qn(Fo,Ro),Fo.prototype.xa=function(){Zr(this.g,"a")},Fo.prototype.wa=function(e){Zr(this.g,new Mo(e))},Fo.prototype.va=function(e){Zr(this.g,new jo(e))},Fo.prototype.ua=function(){Zr(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Lo.prototype.send=Lo.prototype.u,Lo.prototype.open=Lo.prototype.m,Lo.prototype.close=Lo.prototype.close,Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,Ri.COMPLETE="complete",Mi.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",$r.prototype.listen=$r.prototype.N,$a.prototype.listenOnce=$a.prototype.O,$a.prototype.getLastError=$a.prototype.La,$a.prototype.getLastErrorCode=$a.prototype.Da,$a.prototype.getStatus=$a.prototype.ba,$a.prototype.getResponseJson=$a.prototype.Qa,$a.prototype.getResponseText=$a.prototype.ga,$a.prototype.send=$a.prototype.ea;var Uo=Mn.createWebChannelTransport=function(){return new Do},Vo=Mn.getStatEventTarget=function(){return Ei()},Bo=Mn.ErrorCode=Pi,qo=Mn.EventType=Ri,zo=Mn.Event=xi,Wo=Mn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ko=Mn.FetchXmlHttpFactory=Ka,Ho=Mn.WebChannel=Mi,Go=Mn.XhrIo=$a,Qo="@firebase/firestore",Yo=function(){function e(t){Qe(this,e),this.uid=t}return Je(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Yo.UNAUTHENTICATED=new Yo(null),Yo.GOOGLE_CREDENTIALS=new Yo("google-credentials-uid"),Yo.FIRST_PARTY=new Yo("first-party-uid"),Yo.MOCK_USER=new Yo("mock-user");var Jo="9.6.1",Xo=new Yt("@firebase/firestore");function $o(){return Xo.logLevel}function Zo(e){if(Xo.logLevel<=Vt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nu);Xo.debug.apply(Xo,["Firestore (".concat(Jo,"): ").concat(e)].concat(Ie(i)))}}function eu(e){if(Xo.logLevel<=Vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nu);Xo.error.apply(Xo,["Firestore (".concat(Jo,"): ").concat(e)].concat(Ie(i)))}}function tu(e){if(Xo.logLevel<=Vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nu);Xo.warn.apply(Xo,["Firestore (".concat(Jo,"): ").concat(e)].concat(Ie(i)))}}function nu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Jo,") INTERNAL ASSERTION FAILED: ")+e;throw eu(t),new Error(t)}function iu(e,t){e||ru()}function au(e,t){return e}var ou={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uu=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Je(n)}(ot(Error)),su=Je((function e(){var t=this;Qe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),cu=Je((function e(t,n){Qe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),lu=function(){function e(){Qe(this,e)}return Je(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fu=function(){function e(t){Qe(this,e),this.token=t,this.changeListener=null}return Je(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),hu=function(){function e(t){Qe(this,e),this.t=t,this.currentUser=Yo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Je(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new su;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new su,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Zo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Zo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new su)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Zo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(iu("string"==typeof n.accessToken),new cu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return iu(null===e||"string"==typeof e),new Yo(e)}}]),e}(),du=Je((function e(t,n,r){Qe(this,e),this.type="FirstParty",this.user=Yo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),pu=function(){function e(t,n,r){Qe(this,e),this.h=t,this.l=n,this.m=r}return Je(e,[{key:"getToken",value:function(){return Promise.resolve(new du(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),vu=Je((function e(t){Qe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),yu=function(){function e(t){Qe(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return Je(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Zo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Zo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Zo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(iu("string"==typeof e.token),new vu(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),mu=function(){function e(t,n){var r=this;Qe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Je(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function gu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}mu.I=-1;var ku=function(){function e(){Qe(this,e)}return Je(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=gu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function bu(e,t){return e<t?-1:e>t?1:0}function wu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Au(e){return e+"\0"}var xu=function(){function e(t,n){if(Qe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new uu(ou.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new uu(ou.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new uu(ou.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uu(ou.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Je(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?bu(this.nanoseconds,e.nanoseconds):bu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_u=function(){function e(t){Qe(this,e),this.timestamp=t}return Je(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xu(0,0))}}]),e}();function Eu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Iu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Su=function(){function e(t,n,r){Qe(this,e),void 0===n?n=0:n>t.length&&ru(),void 0===r?r=t.length-n:r>t.length-n&&ru(),this.segments=t,this.offset=n,this.len=r}return Je(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Cu=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new uu(ou.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ie(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Su),Nu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ou=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Nu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new uu(ou.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new uu(ou.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new uu(ou.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new uu(ou.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Su),Pu=function(){function e(t){Qe(this,e),this.fields=t,t.sort(Ou.comparator)}return Je(e,[{key:"covers",value:function(e){var t,n=Xe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Ru=function(){function e(t){Qe(this,e),this.binaryString=t}return Je(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return bu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();Ru.EMPTY_BYTE_STRING=new Ru("");var Du=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lu(e){if(iu(!!e),"string"==typeof e){var t=0,n=Du.exec(e);if(iu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Mu(e.seconds),nanos:Mu(e.nanos)}}function Mu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ju(e){return"string"==typeof e?Ru.fromBase64String(e):Ru.fromUint8Array(e)}function Fu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Uu(e){var t=e.mapValue.fields.__previous_value__;return Fu(t)?Uu(t):t}function Vu(e){var t=Lu(e.mapValue.fields.__local_write_time__.timestampValue);return new xu(t.seconds,t.nanos)}function Bu(e){return null==e}function qu(e){return 0===e&&1/e==-1/0}function zu(e){return"number"==typeof e&&Number.isInteger(e)&&!qu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Wu=function(){function e(t){Qe(this,e),this.path=t}return Je(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Cu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Cu.fromString(t))}},{key:"fromName",value:function(t){return new e(Cu.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Cu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Cu(t.slice()))}}]),e}();function Ku(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fu(e)?4:10:ru()}function Hu(e,t){var n=Ku(e);if(n!==Ku(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vu(e).isEqual(Vu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Lu(e.timestampValue),r=Lu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ju(e.bytesValue).isEqual(ju(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mu(e.geoPointValue.latitude)===Mu(t.geoPointValue.latitude)&&Mu(e.geoPointValue.longitude)===Mu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mu(e.integerValue)===Mu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Mu(e.doubleValue),r=Mu(t.doubleValue);return n===r?qu(n)===qu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wu(e.arrayValue.values||[],t.arrayValue.values||[],Hu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Eu(n)!==Eu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hu(n[i],r[i])))return!1;return!0}(e,t);default:return ru()}}function Gu(e,t){return void 0!==(e.values||[]).find((function(e){return Hu(e,t)}))}function Qu(e,t){var n=Ku(e),r=Ku(t);if(n!==r)return bu(n,r);switch(n){case 0:return 0;case 1:return bu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Mu(e.integerValue||e.doubleValue),r=Mu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yu(e.timestampValue,t.timestampValue);case 4:return Yu(Vu(e),Vu(t));case 5:return bu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ju(e),r=ju(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=bu(n[i],r[i]);if(0!==a)return a}return bu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=bu(Mu(e.latitude),Mu(t.latitude));return 0!==n?n:bu(Mu(e.longitude),Mu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Qu(n[i],r[i]);if(a)return a}return bu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=bu(r[o],a[o]);if(0!==u)return u;var s=Qu(n[r[o]],i[a[o]]);if(0!==s)return s}return bu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ru()}}function Yu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bu(e,t);var n=Lu(e),r=Lu(t),i=bu(n.seconds,r.seconds);return 0!==i?i:bu(n.nanos,r.nanos)}function Ju(e){return Xu(e)}function Xu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Lu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ju(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Xe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Xu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Xe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Xu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ru();var t,n}function $u(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zu(e){return!!e&&"integerValue"in e}function es(e){return!!e&&"arrayValue"in e}function ts(e){return!!e&&"nullValue"in e}function ns(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rs(e){return!!e&&"mapValue"in e}function is(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Iu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=is(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=is(e.arrayValue.values[r]);return n}return Object.assign({},e)}var as=function(){function e(t){Qe(this,e),this.value=t}return Je(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rs(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=is(t)}},{key:"setAll",value:function(e){var t=this,n=Ou.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=is(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());rs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Hu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Iu(t,(function(t,n){return e[t]=n}));var r,i=Xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(is(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function os(e){var t=[];return Iu(e.fields,(function(e,n){var r=new Ou([e]);if(rs(n)){var i=os(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Xe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Pu(t)}var us=function(){function e(t,n,r,i,a){Qe(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return Je(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_u.min(),as.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,as.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,as.empty(),2)}}]),e}(),ss=Je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Qe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null}));function cs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ss(e,t,n,r,i,a,o)}function ls(e){var t=au(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Ju(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Bu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=xs(t.startAt)),t.endAt&&(n+="|ub:",n+=xs(t.endAt)),t.R=n}return t.R}function fs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Es(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Hu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ts(e.startAt,t.startAt)&&Ts(e.endAt,t.endAt)}function hs(e){return Wu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ds=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Qu(t,this.value)):null!==t&&Ku(this.value)===Ku(t)&&this.v(Qu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ru()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new ps(e,t,r):"array-contains"===t?new gs(e,r):"in"===t?new ks(e,r):"not-in"===t?new bs(e,r):"array-contains-any"===t?new ws(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new vs(e,n):new ys(e,n)}}]),n}(function(){return Je((function e(){Qe(this,e)}))}());var ps=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,e,r,i)).key=Wu.fromName(i.referenceValue),a}return Je(n,[{key:"matches",value:function(e){var t=Wu.comparator(e.key,this.key);return this.v(t)}}]),n}(ds),vs=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,"in",r)).keys=ms("in",r),i}return Je(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ds),ys=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,"not-in",r)).keys=ms("not-in",r),i}return Je(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ds);function ms(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wu.fromName(e.referenceValue)}))}var gs=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"array-contains",r)}return Je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return es(t)&&Gu(t.arrayValue,this.value)}}]),n}(ds),ks=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"in",r)}return Je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Gu(this.value.arrayValue,t)}}]),n}(ds),bs=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"not-in",r)}return Je(n,[{key:"matches",value:function(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Gu(this.value.arrayValue,t)}}]),n}(ds),ws=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"array-contains-any",r)}return Je(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!es(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Gu(t.value.arrayValue,e)}))}}]),n}(ds),As=Je((function e(t,n){Qe(this,e),this.position=t,this.before=n}));function xs(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Ju(e)})).join(","))}var _s=Je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Qe(this,e),this.field=t,this.dir=n}));function Es(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Is(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Wu.comparator(Wu.fromName(o.referenceValue),n.key):Qu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ts(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Hu(e.position[n],t.position[n]))return!1;return!0}var Ss=Je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Qe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.S=null,this.D=null,this.startAt,this.endAt}));function Cs(e,t,n,r,i,a,o,u){return new Ss(e,t,n,r,i,a,o,u)}function Ns(e){return new Ss(e)}function Os(e){return!Bu(e.limit)&&"F"===e.limitType}function Ps(e){return!Bu(e.limit)&&"L"===e.limitType}function Rs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ds(e){var t,n=Xe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ls(e){return null!==e.collectionGroup}function Ms(e){var t=au(e);if(null===t.S){t.S=[];var n=Ds(t),r=Rs(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new _s(n)),t.S.push(new _s(Ou.keyField(),"asc"));else{var i,a=!1,o=Xe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new _s(Ou.keyField(),s))}}}return t.S}function js(e){var t=au(e);if(!t.D)if("F"===t.limitType)t.D=cs(t.path,t.collectionGroup,Ms(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Xe(Ms(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new _s(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new As(t.endAt.position,!t.endAt.before):null,s=t.startAt?new As(t.startAt.position,!t.startAt.before):null;t.D=cs(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function Fs(e,t,n){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Us(e,t){return fs(js(e),js(t))&&e.limitType===t.limitType}function Vs(e){return"".concat(ls(js(e)),"|lt:").concat(e.limitType)}function Bs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Ju(t.value));var t})).join(", "),"]")),Bu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+xs(e.startAt)),e.endAt&&(t+=", endAt: "+xs(e.endAt)),"Target(".concat(t,")")}(js(e)),"; limitType=").concat(e.limitType,")")}function qs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Xe(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Xe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!Is(e.startAt,Ms(e),t))&&(!e.endAt||!Is(e.endAt,Ms(e),t))}(e,t)}function zs(e){return function(t,n){var r,i=!1,a=Xe(Ms(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ws(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ws(e,t,n){var r=e.field.isKeyField()?Wu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Qu(r,i):ru()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ru()}}function Ks(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(t)?"-0":t}}function Hs(e){return{integerValue:""+e}}function Gs(e,t){return zu(t)?Hs(t):Ks(e,t)}var Qs=Je((function e(){Qe(this,e),this._=void 0}));function Ys(e,t,n){return e instanceof $s?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zs?ec(e,t):e instanceof tc?nc(e,t):function(e,t){var n=Xs(e,t),r=ic(n)+ic(e.N);return Zu(n)&&Zu(e.N)?Hs(r):Ks(e.k,r)}(e,t)}function Js(e,t,n){return e instanceof Zs?ec(e,t):e instanceof tc?nc(e,t):n}function Xs(e,t){return e instanceof rc?Zu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var $s=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n)}(Qs),Zs=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).elements=e,r}return Je(n)}(Qs);function ec(e,t){var n,r=ac(t),i=Xe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Hu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tc=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).elements=e,r}return Je(n)}(Qs);function nc(e,t){var n,r=ac(t),i=Xe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Hu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var rc=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).k=e,i.N=r,i}return Je(n)}(Qs);function ic(e){return Mu(e.integerValue||e.doubleValue)}function ac(e){return es(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var oc=Je((function e(t,n){Qe(this,e),this.field=t,this.transform=n}));var uc=Je((function e(t,n){Qe(this,e),this.version=t,this.transformResults=n})),sc=function(){function e(t,n){Qe(this,e),this.updateTime=t,this.exists=n}return Je(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function cc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var lc=Je((function e(){Qe(this,e)}));function fc(e,t,n){e instanceof yc?function(e,t,n){var r=e.value.clone(),i=kc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mc?function(e,t,n){if(cc(e.precondition,t)){var r=kc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(gc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hc(e,t,n){e instanceof yc?function(e,t,n){if(cc(e.precondition,t)){var r=e.value.clone(),i=bc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof mc?function(e,t,n){if(cc(e.precondition,t)){var r=bc(e.fieldTransforms,n,t),i=t.data;i.setAll(gc(e)),i.setAll(r),t.convertToFoundDocument(vc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){cc(e.precondition,t)&&t.convertToNoDocument(_u.min())}(e,t)}function dc(e,t){var n,r=null,i=Xe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Xs(a.transform,o||null);null!=u&&(null==r&&(r=as.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zs&&t instanceof Zs||e instanceof tc&&t instanceof tc?wu(e.elements,t.elements,Hu):e instanceof rc&&t instanceof rc?Hu(e.N,t.N):e instanceof $s&&t instanceof $s}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vc(e){return e.isFoundDocument()?e.version:_u.min()}var yc=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Qe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Je(n)}(lc),mc=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Qe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Je(n)}(lc);function gc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function kc(e,t,n){var r=new Map;iu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Js(o,u,n[i]))}return r}function bc(e,t,n){var r,i=new Map,a=Xe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ys(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var wc,Ac,xc=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Je(n)}(lc),_c=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Je(n)}(lc),Ec=Je((function e(t){Qe(this,e),this.count=t}));function Ic(e){switch(e){default:return ru();case ou.CANCELLED:case ou.UNKNOWN:case ou.DEADLINE_EXCEEDED:case ou.RESOURCE_EXHAUSTED:case ou.INTERNAL:case ou.UNAVAILABLE:case ou.UNAUTHENTICATED:return!1;case ou.INVALID_ARGUMENT:case ou.NOT_FOUND:case ou.ALREADY_EXISTS:case ou.PERMISSION_DENIED:case ou.FAILED_PRECONDITION:case ou.ABORTED:case ou.OUT_OF_RANGE:case ou.UNIMPLEMENTED:case ou.DATA_LOSS:return!0}}function Tc(e){if(void 0===e)return eu("GRPC error has no .code"),ou.UNKNOWN;switch(e){case wc.OK:return ou.OK;case wc.CANCELLED:return ou.CANCELLED;case wc.UNKNOWN:return ou.UNKNOWN;case wc.DEADLINE_EXCEEDED:return ou.DEADLINE_EXCEEDED;case wc.RESOURCE_EXHAUSTED:return ou.RESOURCE_EXHAUSTED;case wc.INTERNAL:return ou.INTERNAL;case wc.UNAVAILABLE:return ou.UNAVAILABLE;case wc.UNAUTHENTICATED:return ou.UNAUTHENTICATED;case wc.INVALID_ARGUMENT:return ou.INVALID_ARGUMENT;case wc.NOT_FOUND:return ou.NOT_FOUND;case wc.ALREADY_EXISTS:return ou.ALREADY_EXISTS;case wc.PERMISSION_DENIED:return ou.PERMISSION_DENIED;case wc.FAILED_PRECONDITION:return ou.FAILED_PRECONDITION;case wc.ABORTED:return ou.ABORTED;case wc.OUT_OF_RANGE:return ou.OUT_OF_RANGE;case wc.UNIMPLEMENTED:return ou.UNIMPLEMENTED;case wc.DATA_LOSS:return ou.DATA_LOSS;default:return ru()}}(Ac=wc||(wc={}))[Ac.OK=0]="OK",Ac[Ac.CANCELLED=1]="CANCELLED",Ac[Ac.UNKNOWN=2]="UNKNOWN",Ac[Ac.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ac[Ac.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ac[Ac.NOT_FOUND=5]="NOT_FOUND",Ac[Ac.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ac[Ac.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ac[Ac.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ac[Ac.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ac[Ac.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ac[Ac.ABORTED=10]="ABORTED",Ac[Ac.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ac[Ac.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ac[Ac.INTERNAL=13]="INTERNAL",Ac[Ac.UNAVAILABLE=14]="UNAVAILABLE",Ac[Ac.DATA_LOSS=15]="DATA_LOSS";var Sc=function(){function e(t,n){Qe(this,e),this.comparator=t,this.root=n||Nc.EMPTY}return Je(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Cc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Cc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Cc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Cc(this.root,e,this.comparator,!0)}}]),e}(),Cc=function(){function e(t,n,r,i){Qe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Je(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Nc=function(){function e(t,n,r,i,a){Qe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Je(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ru();if(this.right.isRed())throw ru();var e=this.left.check();if(e!==this.right.check())throw ru();return e+(this.isRed()?0:1)}}]),e}();Nc.EMPTY=null,Nc.RED=!0,Nc.BLACK=!1,Nc.EMPTY=new(function(){function e(){Qe(this,e),this.size=0}return Je(e,[{key:"key",get:function(){throw ru()}},{key:"value",get:function(){throw ru()}},{key:"color",get:function(){throw ru()}},{key:"left",get:function(){throw ru()}},{key:"right",get:function(){throw ru()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Nc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Oc=function(){function e(t){Qe(this,e),this.comparator=t,this.data=new Sc(this.comparator)}return Je(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Pc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Pc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Pc=function(){function e(t){Qe(this,e),this.iter=t}return Je(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Rc=new Sc(Wu.comparator);function Dc(){return Rc}var Lc=new Sc(Wu.comparator);function Mc(){return Lc}var jc=new Sc(Wu.comparator);function Fc(){return jc}var Uc=new Oc(Wu.comparator);function Vc(){for(var e=Uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Bc=new Oc(bu);function qc(){return Bc}var zc=function(){function e(t,n,r,i,a){Qe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Je(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Wc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(_u.min(),r,qc(),Dc(),Vc())}}]),e}(),Wc=function(){function e(t,n,r,i,a){Qe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Je(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ru.EMPTY_BYTE_STRING,n,Vc(),Vc(),Vc())}}]),e}(),Kc=Je((function e(t,n,r,i){Qe(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),Hc=Je((function e(t,n){Qe(this,e),this.targetId=t,this.O=n})),Gc=Je((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ru.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Qe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Qc=function(){function e(){Qe(this,e),this.M=0,this.L=Xc(),this.B=Ru.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return Je(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=Vc(),t=Vc(),n=Vc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ru()}})),new Wc(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=Xc()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Yc=function(){function e(t){Qe(this,e),this.et=t,this.nt=new Map,this.st=Dc(),this.it=Jc(),this.rt=new Oc(bu)}return Je(e,[{key:"ot",value:function(e){var t,n=Xe(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Xe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:ru()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(hs(i))if(0===n){var a=new Wu(i.path);this.ct(t,a,us.newNoDocument(a,_u.min()))}else iu(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&hs(a.target)){var o=new Wu(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,us.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=Vc();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new zc(e,n,this.rt,this.st,r);return this.st=Dc(),this.it=Jc(),this.rt=new Oc(bu),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Qc,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Oc(bu),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Zo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Qc),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Jc(){return new Sc(Wu.comparator)}function Xc(){return new Sc(Wu.comparator)}var $c={asc:"ASCENDING",desc:"DESCENDING"},Zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},el=Je((function e(t,n){Qe(this,e),this.databaseId=t,this.C=n}));function tl(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function nl(e,t){return e.C?t.toBase64():t.toUint8Array()}function rl(e,t){return tl(e,t.toTimestamp())}function il(e){return iu(!!e),_u.fromTimestamp(function(e){var t=Lu(e);return new xu(t.seconds,t.nanos)}(e))}function al(e,t){return function(e){return new Cu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ol(e){var t=Cu.fromString(e);return iu(Ol(t)),t}function ul(e,t){return al(e.databaseId,t.path)}function sl(e,t){var n=ol(t);if(n.get(1)!==e.databaseId.projectId)throw new uu(ou.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uu(ou.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wu(hl(n))}function cl(e,t){return al(e.databaseId,t)}function ll(e){var t=ol(e);return 4===t.length?Cu.emptyPath():hl(t)}function fl(e){return new Cu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hl(e){return iu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function dl(e,t,n){return{name:ul(e,t),fields:n.value.mapValue.fields}}function pl(e,t,n){var r=sl(e,t.name),i=il(t.updateTime),a=new as({mapValue:{fields:t.fields}}),o=us.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function vl(e,t){return"found"in t?function(e,t){iu(!!t.found),t.found.name,t.found.updateTime;var n=sl(e,t.found.name),r=il(t.found.updateTime),i=new as({mapValue:{fields:t.found.fields}});return us.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){iu(!!t.missing),iu(!!t.readTime);var n=sl(e,t.missing),r=il(t.readTime);return us.newNoDocument(n,r)}(e,t):ru()}function yl(e,t){var n;if(t instanceof yc)n={update:dl(e,t.key,t.value)};else if(t instanceof xc)n={delete:ul(e,t.key)};else if(t instanceof mc)n={update:dl(e,t.key,t.data),updateMask:Nl(t.fieldMask)};else{if(!(t instanceof _c))return ru();n={verify:ul(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof $s)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rc)return{fieldPath:t.field.canonicalString(),increment:n.N};throw ru()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ru()}(e,t.precondition)),n}function ml(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?sc.updateTime(il(e.updateTime)):void 0!==e.exists?sc.exists(e.exists):sc.none()}(t.currentDocument):sc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)iu("REQUEST_TIME"===t.setToServerValue),n=new $s;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Zs(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new tc(i)}else"increment"in t?n=new rc(e,t.increment):ru();var a=Ou.fromServerFormat(t.fieldPath);return new oc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=sl(e,t.update.name),a=new as({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Pu(t.map((function(e){return Ou.fromServerFormat(e)})))}(t.updateMask);return new mc(i,a,o,n,r)}return new yc(i,a,n,r)}if(t.delete){var u=sl(e,t.delete);return new xc(u,n)}if(t.verify){var s=sl(e,t.verify);return new _c(s,n)}return ru()}function gl(e,t){return{documents:[cl(e,t.path)]}}function kl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=cl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=cl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ns(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NAN"}};if(ts(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ns(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NOT_NAN"}};if(ts(e.value))return{unaryFilter:{field:Il(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(e.field),op:El(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Il(e.field),direction:_l(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||Bu(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Al(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Al(t.endAt)),n}function bl(e){var t=ll(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){iu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=wl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new _s(Tl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Bu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=xl(n.startAt));var l=null;return n.endAt&&(l=xl(n.endAt)),Cs(t,i,u,o,s,"F",c,l)}function wl(e){return e?void 0!==e.unaryFilter?[Cl(e)]:void 0!==e.fieldFilter?[Sl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return wl(e)})).reduce((function(e,t){return e.concat(t)})):ru():[]}function Al(e){return{before:e.before,values:e.position}}function xl(e){var t=!!e.before,n=e.values||[];return new As(n,t)}function _l(e){return $c[e]}function El(e){return Zc[e]}function Il(e){return{fieldPath:e.canonicalString()}}function Tl(e){return Ou.fromServerFormat(e.fieldPath)}function Sl(e){return ds.create(Tl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ru()}}(e.fieldFilter.op),e.fieldFilter.value)}function Cl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Tl(e.unaryFilter.field);return ds.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Tl(e.unaryFilter.field);return ds.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Tl(e.unaryFilter.field);return ds.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Tl(e.unaryFilter.field);return ds.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ru()}}function Nl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ol(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Pl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Dl(t)),t=Rl(e.get(n),t);return Dl(t)}function Rl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Dl(e){return e+"\x01\x01"}function Ll(e){var t=e.length;if(iu(t>=2),2===t)return iu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Cu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ru(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ru()}a=o+2}return new Cu(r)}var Ml=Je((function e(t,n){Qe(this,e),this.seconds=t,this.nanoseconds=n})),jl=Je((function e(t,n,r){Qe(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));jl.store="owner",jl.key="owner";var Fl=Je((function e(t,n,r){Qe(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Fl.store="mutationQueues",Fl.keyPath="userId";var Ul=Je((function e(t,n,r,i,a){Qe(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Ul.store="mutations",Ul.keyPath="batchId",Ul.userMutationsIndex="userMutationsIndex",Ul.userMutationsKeyPath=["userId","batchId"];var Vl=function(){function e(){Qe(this,e)}return Je(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Pl(t)]}},{key:"key",value:function(e,t,n){return[e,Pl(t),n]}}]),e}();Vl.store="documentMutations",Vl.PLACEHOLDER=new Vl;var Bl=Je((function e(t,n){Qe(this,e),this.path=t,this.readTime=n})),ql=Je((function e(t,n){Qe(this,e),this.path=t,this.version=n})),zl=Je((function e(t,n,r,i,a,o){Qe(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));zl.store="remoteDocuments",zl.readTimeIndex="readTimeIndex",zl.readTimeIndexPath="readTime",zl.collectionReadTimeIndex="collectionReadTimeIndex",zl.collectionReadTimeIndexPath=["parentPath","readTime"];var Wl=Je((function e(t){Qe(this,e),this.byteSize=t}));Wl.store="remoteDocumentGlobal",Wl.key="remoteDocumentGlobalKey";var Kl=Je((function e(t,n,r,i,a,o,u){Qe(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));Kl.store="targets",Kl.keyPath="targetId",Kl.queryTargetsIndexName="queryTargetsIndex",Kl.queryTargetsKeyPath=["canonicalId","targetId"];var Hl=Je((function e(t,n,r){Qe(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Hl.store="targetDocuments",Hl.keyPath=["targetId","path"],Hl.documentTargetsIndex="documentTargetsIndex",Hl.documentTargetsKeyPath=["path","targetId"];var Gl=Je((function e(t,n,r,i){Qe(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Gl.key="targetGlobalKey",Gl.store="targetGlobal";var Ql=Je((function e(t,n){Qe(this,e),this.collectionId=t,this.parent=n}));Ql.store="collectionParents",Ql.keyPath=["collectionId","parent"];var Yl=Je((function e(t,n,r,i){Qe(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Yl.store="clientMetadata",Yl.keyPath="clientId";var Jl=Je((function e(t,n,r){Qe(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Jl.store="bundles",Jl.keyPath="bundleId";var Xl=Je((function e(t,n,r){Qe(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));Xl.store="namedQueries",Xl.keyPath="name";var $l=[Fl.store,Ul.store,Vl.store,zl.store,Kl.store,jl.store,Gl.store,Hl.store].concat([Yl.store]).concat([Wl.store]).concat([Ql.store]).concat([Jl.store,Xl.store]),Zl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ef=function(){function e(){Qe(this,e),this.onCommittedListeners=[]}return Je(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),tf=function(){function e(t){var n=this;Qe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Je(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ru(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Xe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),nf=function(){function e(t,n){var r=this;Qe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new su,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new of(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=ff(e.target.error);r.It.reject(new of(t,n))}}return Je(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Zo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new sf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new of(n,t)}}}]),e}(),rf=function(){function e(t,n,r){Qe(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(vt())&&eu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Je(e,[{key:"Ct",value:function(){var e=Ke(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Zo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new of(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uu(ou.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new uu(ou.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new of(t,n))},i.onupgradeneeded=function(e){Zo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Zo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ge().mark((function e(){var n,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=nf.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),tf.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Zo("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Zo("SimpleDb","Removing database:",e),cf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!wt())return!1;if(e.vt())return!0;var t=vt(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUBLISHABLE_KEY:"pk_test_51JCr8WEPBHX2DtKyQOxVQoHK8PfoakHuygut8PJ9YICaFFrzebSXz6AXxeAz9O5ORVpwLeIAsvF4wSN80LXt2WZ100sFt7JkY5"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),af=function(){function e(t){Qe(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return Je(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return cf(this.$t.delete())}}]),e}(),of=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,ou.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Je(n)}(uu);function uf(e){return"IndexedDbTransactionError"===e.name}var sf=function(){function e(t){Qe(this,e),this.store=t}return Je(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Zo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cf(n)}},{key:"add",value:function(e){return Zo("SimpleDb","ADD",this.store.name,e,e),cf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return cf(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Zo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Zo("SimpleDb","DELETE",this.store.name,e),cf(this.store.delete(e))}},{key:"count",value:function(){return Zo("SimpleDb","COUNT",this.store.name),cf(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Zo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new tf((function(n,r){t.onerror=function(e){var t=ff(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new tf((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new af(i),o=t(i.primaryKey,i.value,a);if(o instanceof tf){var u=o.catch((function(e){return a.done(),tf.reject(e)}));n.push(u)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return tf.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function cf(e){return new tf((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ff(e.target.error);n(t)}}))}var lf=!1;function ff(e){var t=rf.Pt(vt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new uu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lf||(lf=!0,setTimeout((function(){throw r}),0)),r}}return e}var hf=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return Je(n)}(ef);function df(e,t){var n=au(e);return rf.Dt(n.Wt,t)}var pf=function(){function e(t,n,r,i){Qe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Je(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&fc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Xe(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&hc(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Xe(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&hc(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_u.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Vc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wu(this.mutations,e.mutations,(function(e,t){return pc(e,t)}))&&wu(this.baseMutations,e.baseMutations,(function(e,t){return pc(e,t)}))}}]),e}(),vf=function(){function e(t,n,r,i){Qe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Je(e,null,[{key:"from",value:function(t,n,r){iu(t.mutations.length===r.length);for(var i=Fc(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),yf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_u.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_u.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ru.EMPTY_BYTE_STRING;Qe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Je(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),mf=Je((function e(t){Qe(this,e),this.Gt=t}));function gf(e,t){if(t.document)return pl(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Wu.fromSegments(t.noDocument.path),r=xf(t.noDocument.readTime),i=us.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Wu.fromSegments(t.unknownDocument.path),o=xf(t.unknownDocument.version);return us.newUnknownDocument(a,o)}return ru()}function kf(e,t,n){var r=bf(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:ul(e,t.key),fields:t.data.value.mapValue.fields,updateTime:tl(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new zl(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=Af(t.version),c=t.hasCommittedMutations;return new zl(null,new Bl(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Af(t.version);return new zl(new ql(l,f),null,null,!0,r,i)}return ru()}function bf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function wf(e){var t=new xu(e[0],e[1]);return _u.fromTimestamp(t)}function Af(e){var t=e.toTimestamp();return new Ml(t.seconds,t.nanoseconds)}function xf(e){var t=new xu(e.seconds,e.nanoseconds);return _u.fromTimestamp(t)}function _f(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ml(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ml(e.Gt,t)})),u=xu.fromMillis(t.localWriteTimeMs);return new pf(t.batchId,u,n,o)}function Ef(e){var t,n,r=xf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?xf(e.lastLimboFreeSnapshotVersion):_u.min();return void 0!==e.query.documents?(iu(1===(n=e.query).documents.length),t=js(Ns(ll(n.documents[0])))):t=function(e){return js(bl(e))}(e.query),new yf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ru.fromBase64String(e.resumeToken))}function If(e,t){var n,r=Af(t.snapshotVersion),i=Af(t.lastLimboFreeSnapshotVersion);n=hs(t.target)?gl(e.Gt,t.target):kl(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Kl(t.targetId,ls(t.target),r,a,t.sequenceNumber,i,n)}function Tf(e){var t=bl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fs(t,t.limit,"L"):t}var Sf=function(){function e(){Qe(this,e)}return Je(e,[{key:"getBundleMetadata",value:function(e,t){return Cf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:xf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Cf(e).put({bundleId:(n=t).id,createTime:Af(il(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Nf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Tf(t.bundledQuery),readTime:xf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Nf(e).put(function(e){return{name:e.name,readTime:Af(il(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Cf(e){return df(e,Jl.store)}function Nf(e){return df(e,Xl.store)}var Of=function(){function e(){Qe(this,e),this.zt=new Pf}return Je(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),tf.resolve()}},{key:"getCollectionParents",value:function(e,t){return tf.resolve(this.zt.getEntries(t))}}]),e}(),Pf=function(){function e(){Qe(this,e),this.index={}}return Je(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Oc(Cu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Oc(Cu.comparator)).toArray()}}]),e}(),Rf=function(){function e(){Qe(this,e),this.Ht=new Pf}return Je(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:Pl(i)};return Df(e).put(a)}return tf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Au(t),""],!1,!0);return Df(e).Bt(r).next((function(e){var r,i=Xe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ll(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Df(e){return df(e,Ql.store)}var Lf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mf=function(){function e(t,n,r){Qe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Je(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function jf(e,t,n){var r=e.store(Ul.store),i=e.store(Vl.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){iu(1===u)})));var c,l=[],f=Xe(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Vl.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return tf.waitFor(a).next((function(){return l}))}function Ff(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ru();t=e.noDocument}return JSON.stringify(t).length}Mf.DEFAULT_COLLECTION_PERCENTILE=10,Mf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mf.DEFAULT=new Mf(41943040,Mf.DEFAULT_COLLECTION_PERCENTILE,Mf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mf.DISABLED=new Mf(-1,0,0);var Uf=function(){function e(t,n,r,i){Qe(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return Je(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bf(e).jt({index:Ul.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=qf(e),o=Bf(e);return o.add({}).next((function(u){iu("number"==typeof u);var s,c=new pf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return yl(e.Gt,t)})),i=n.mutations.map((function(t){return yl(e.Gt,t)}));return new Ul(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new Oc((function(e,t){return bu(e.canonicalString(),t.canonicalString())})),d=Xe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Vl.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Vl.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),tf.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Bf(e).get(t).next((function(e){return e?(iu(e.userId===n.userId),_f(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?tf.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Bf(e).jt({index:Ul.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(iu(t.batchId>=r),a=_f(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Bf(e).jt({index:Ul.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bf(e).Bt(Ul.userMutationsIndex,n).next((function(e){return e.map((function(e){return _f(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Vl.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return qf(e).jt({range:i},(function(r,i,o){var u=we(r,3),s=u[0],c=u[1],l=u[2],f=Ll(c);if(s===n.userId&&t.path.isEqual(f))return Bf(e).get(l).next((function(e){if(!e)throw ru();iu(e.userId===n.userId),a.push(_f(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Oc(bu),i=[];return t.forEach((function(t){var a=Vl.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=qf(e).jt({range:o},(function(e,i,a){var o=we(e,3),u=o[0],s=o[1],c=o[2],l=Ll(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),tf.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Vl.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Oc(bu);return qf(e).jt({range:o},(function(e,t,a){var o=we(e,3),s=o[0],c=o[1],l=o[2],f=Ll(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Bf(e).get(t).next((function(e){if(null===e)throw ru();iu(e.userId===n.userId),r.push(_f(n.k,e))})))})),tf.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return jf(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),tf.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return tf.resolve();var r=IDBKeyRange.lowerBound(Vl.prefixForUser(t.userId)),i=[];return qf(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ll(e[1]);i.push(a)}else r.done()})).next((function(){iu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Vf(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return zf(e).get(this.userId).next((function(e){return e||new Fl(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return iu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Vf(e,t,n){var r=Vl.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return qf(e).jt({range:a,Kt:!0},(function(e,n,r){var a=we(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Bf(e){return df(e,Ul.store)}function qf(e){return df(e,Vl.store)}function zf(e){return df(e,Fl.store)}var Wf=function(){function e(t){Qe(this,e),this.se=t}return Je(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Kf=function(){function e(t,n){Qe(this,e),this.referenceDelegate=t,this.k=n}return Je(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Wf(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return _u.fromTimestamp(new xu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Hf(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return iu(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Hf(e).jt((function(o,u){var s=Ef(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return tf.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Hf(e).jt((function(e,n){var r=Ef(n);t(r)}))}},{key:"oe",value:function(e){return Gf(e).get(Gl.key).next((function(e){return iu(null!==e),e}))}},{key:"ae",value:function(e,t){return Gf(e).put(Gl.key,t)}},{key:"ce",value:function(e,t){return Hf(e).put(If(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ls(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hf(e).jt({range:r,index:Kl.queryTargetsIndexName},(function(e,n,r){var a=Ef(n);fs(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Qf(e);return t.forEach((function(t){var o=Pl(t.path);i.push(a.put(new Hl(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),tf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Qf(e);return tf.forEach(t,(function(t){var a=Pl(t.path);return tf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Qf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qf(e),i=Vc();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=Ll(e[1]),a=new Wu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Pl(t.path),r=IDBKeyRange.bound([n],[Au(n)],!1,!0),i=0;return Qf(e).jt({index:Hl.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=we(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Hf(e).get(t).next((function(e){return e?Ef(e):null}))}}]),e}();function Hf(e){return df(e,Kl.store)}function Gf(e){return df(e,Gl.store)}function Qf(e){return df(e,Hl.store)}function Yf(e){return Jf.apply(this,arguments)}function Jf(){return Jf=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ou.FAILED_PRECONDITION&&t.message===Zl){e.next=2;break}throw t;case 2:Zo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Jf.apply(this,arguments)}function Xf(e,t){var n=we(e,2),r=n[0],i=n[1],a=we(t,2),o=a[0],u=a[1],s=bu(r,o);return 0===s?bu(i,u):s}var $f=function(){function e(t){Qe(this,e),this.he=t,this.buffer=new Oc(Xf),this.le=0}return Je(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Zf=function(){function e(t,n){Qe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return Je(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Zo("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!uf(n.t0)){n.next=12;break}Zo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Yf(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),eh=function(){function e(t,n){Qe(this,e),this.ge=t,this.params=n}return Je(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return tf.resolve(mu.I);var r=new $f(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Zo("LruGarbageCollector","Garbage collection skipped; disabled"),tf.resolve(Lf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Zo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Lf):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Zo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),$o()<=Vt.DEBUG&&Zo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),tf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),th=function(){function e(t,n){Qe(this,e),this.db=t,this.garbageCollector=function(e,t){return new eh(e,t)}(this,n)}return Je(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nh(e,n)}},{key:"removeReference",value:function(e,t,n){return nh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nh(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return zf(e).Qt((function(r){return Vf(e,r,t).next((function(e){return e&&(n=!0),tf.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Qf(e).delete([0,Pl(o.path)])}))}));i.push(s)}})).next((function(){return tf.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nh(e,t)}},{key:"Ie",value:function(e,t){var n,r=Qf(e),i=mu.I;return r.jt({index:Hl.documentTargetsIndex},(function(e,r){var a=we(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==mu.I&&t(new Wu(Ll(n)),i),i=s,n=u):i=mu.I})).next((function(){i!==mu.I&&t(new Wu(Ll(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nh(e,t){return Qf(e).put(function(e,t){return new Hl(0,Pl(e.path),t)}(t,e.currentSequenceNumber))}var rh=function(){function e(t,n){Qe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Je(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Xe(n);try{for(i.s();!(r=i.n()).done;){var a=we(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Iu(this.inner,(function(t,n){var r,i=Xe(n);try{for(i.s();!(r=i.n()).done;){var a=we(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Tu(this.inner)}}]),e}(),ih=function(){function e(){Qe(this,e),this.changes=new rh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Je(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:_u.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:us.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?tf.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ah=function(){function e(t,n){Qe(this,e),this.k=t,this.Jt=n}return Je(e,[{key:"addEntry",value:function(e,t,n){return sh(e).put(ch(t),n)}},{key:"removeEntry",value:function(e,t){var n=sh(e),r=ch(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return sh(e).get(ch(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return sh(e).get(ch(t)).next((function(e){return{document:n.Pe(t,e),size:Ff(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Dc();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Dc(),i=new Sc(Wu.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,Ff(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return tf.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return sh(e).jt({range:r},(function(e,t,r){for(var o=Wu.fromSegments(e);a&&Wu.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Dc(),a=t.path.length+1,o={};if(n.isEqual(_u.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=bf(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=zl.collectionReadTimeIndex}return sh(e).jt(o,(function(e,n,o){if(e.length===a){var u=gf(r.k,n);t.path.isPrefixOf(u.key.path)?qs(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new oh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return uh(e).get(Wl.key).next((function(e){return iu(!!e),e}))}},{key:"Re",value:function(e,t){return uh(e).put(Wl.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=gf(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(_u.min()))return n}return us.newInvalidDocument(e)}}]),e}(),oh=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new rh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Je(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Oc((function(e,t){return bu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=kf(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Ff(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=kf(t.De.k,us.newNoDocument(a,_u.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),tf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(ih);function uh(e){return df(e,Wl.store)}function sh(e){return df(e,zl.store)}function ch(e){return e.path.toArray()}var lh=function(){function e(t){Qe(this,e),this.k=t}return Je(e,[{key:"Nt",value:function(e,t,n,r){var i=this;iu(n<r&&n>=0&&r<=11);var a=new nf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(jl.store)}(e),function(e){e.createObjectStore(Fl.store,{keyPath:Fl.keyPath}),e.createObjectStore(Ul.store,{keyPath:Ul.keyPath,autoIncrement:!0}).createIndex(Ul.userMutationsIndex,Ul.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Vl.store)}(e),fh(e),function(e){e.createObjectStore(zl.store)}(e));var o=tf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Hl.store),e.deleteObjectStore(Kl.store),e.deleteObjectStore(Gl.store)}(e),fh(e)),o=o.next((function(){return function(e){var t=e.store(Gl.store),n=new Gl(0,0,_u.min().toTimestamp(),0);return t.put(Gl.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Ul.store).Bt().next((function(n){e.deleteObjectStore(Ul.store),e.createObjectStore(Ul.store,{keyPath:Ul.keyPath,autoIncrement:!0}).createIndex(Ul.userMutationsIndex,Ul.userMutationsKeyPath,{unique:!0});var r=t.store(Ul.store),i=n.map((function(e){return r.put(e)}));return tf.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Yl.store,{keyPath:Yl.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Wl.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(zl.store);t.createIndex(zl.readTimeIndex,zl.readTimeIndexPath,{unique:!1}),t.createIndex(zl.collectionReadTimeIndex,zl.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Jl.store,{keyPath:Jl.keyPath})}(e),function(e){e.createObjectStore(Xl.store,{keyPath:Xl.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(zl.store).jt((function(e,n){t+=Ff(n)})).next((function(){var n=new Wl(t);return e.store(Wl.store).put(Wl.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(Fl.store),r=e.store(Ul.store);return n.Bt().next((function(n){return tf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Ul.userMutationsIndex,i).next((function(r){return tf.forEach(r,(function(r){iu(r.userId===n.userId);var i=_f(t.k,r);return jf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Hl.store),n=e.store(zl.store);return e.store(Gl.store).get(Gl.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new Cu(n),o=function(e){return[0,Pl(e)]}(a);r.push(t.get(o).next((function(n){return n?tf.resolve():function(n){return t.put(new Hl(0,Pl(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return tf.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(Ql.store,{keyPath:Ql.keyPath});var n=t.store(Ql.store),r=new Pf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Pl(i)})}};return t.store(zl.store).jt({Kt:!0},(function(e,t){var n=new Cu(e);return i(n.popLast())})).next((function(){return t.store(Vl.store).jt({Kt:!0},(function(e,t){var n=we(e,3),r=(n[0],n[1]),a=(n[2],Ll(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(Kl.store);return n.jt((function(e,r){var i=Ef(r),a=If(t.k,i);return n.put(a)}))}}]),e}();function fh(e){e.createObjectStore(Hl.store,{keyPath:Hl.keyPath}).createIndex(Hl.documentTargetsIndex,Hl.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Kl.store,{keyPath:Kl.keyPath}).createIndex(Kl.queryTargetsIndexName,Kl.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Gl.store)}var hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dh=function(){function e(t,n,r,i,a,o,u,s,c,l){if(Qe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new uu(ou.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new th(this,i),this.Ge=n+"main",this.k=new mf(s),this.ze=new rf(this.Ge,11,new lh(this.k)),this.He=new Kf(this.referenceDelegate,this.k),this.Jt=new Rf,this.Je=function(e,t){return new ah(e,t)}(this.k,this.Jt),this.Ye=new Sf,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&eu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Je(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new uu(ou.FAILED_PRECONDITION,hh);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new mu(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=Ke(Ge().mark((function n(r){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=Ke(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return vh(t).put(new Yl(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(uf(t))return Zo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Zo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return ph(e).get(jl.key).next((function(e){return tf.resolve(t.un(e))}))}},{key:"hn",value:function(e){return vh(e).delete(this.clientId)}},{key:"ln",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i,a=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=df(e,Yl.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return tf.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=Xe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?tf.resolve(!0):ph(e).get(jl.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new uu(ou.FAILED_PRECONDITION,hh);return!1}}return!(!t.networkEnabled||!t.inForeground)||vh(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Zo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ke(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[jl.store,Yl.store],(function(e){var n=new hf(e,mu.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return vh(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Uf.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Zo("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,$l,(function(a){return i=new hf(a,r.Be?r.Be.next():mu.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw eu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new uu(ou.FAILED_PRECONDITION,Zl);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return ph(e).get(jl.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new uu(ou.FAILED_PRECONDITION,hh)}))}},{key:"cn",value:function(e){var t=new jl(this.clientId,this.allowTabSynchronization,Date.now());return ph(e).put(jl.key,t)}},{key:"an",value:function(e){var t=this,n=ph(e);return n.get(jl.key).next((function(e){return t.un(e)?(Zo("IndexedDbPersistence","Releasing primary lease."),n.delete(jl.key)):tf.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(eu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!mt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Zo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return eu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(Qn){eu("Failed to set zombie client id.",Qn)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(Qn){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return rf.bt()}}]),e}();function ph(e){return df(e,jl.store)}function vh(e){return df(e,Yl.store)}function yh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var mh=Je((function e(t,n){Qe(this,e),this.progress=t,this.In=n})),gh=function(){function e(t,n,r){Qe(this,e),this.Je=t,this.An=n,this.Jt=r}return Je(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=Xe(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=Xe(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Wu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ls(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Wu(t)).next((function(e){var t=Mc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Mc();return this.Jt.getCollectionParents(e,i).next((function(o){return tf.forEach(o,(function(o){var u=function(e,t){return new Ss(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=Xe(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=Xe(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=us.newInvalidDocument(c),r=r.insert(c,l)),hc(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){qs(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=Vc(),a=Xe(t);try{for(a.s();!(r=a.n()).done;){var o,u=Xe(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof mc&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),kh=function(){function e(t,n,r,i){Qe(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return Je(e,null,[{key:"$n",value:function(t,n){var r,i=Vc(),a=Vc(),o=Xe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bh=function(){function e(){Qe(this,e)}return Je(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(_u.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(Os(t)||Ps(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):($o()<=Vt.DEBUG&&Zo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bs(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new Oc(zs(e));return t.forEach((function(t,r){qs(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return $o()<=Vt.DEBUG&&Zo("QueryEngine","Using full collection scan to execute query:",Bs(t)),this.On.getDocumentsMatchingQuery(e,t,_u.min())}}]),e}(),wh=function(){function e(t,n,r,i){Qe(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Sc(bu),this.Kn=new rh((function(e){return ls(e)}),fs),this.jn=_u.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new gh(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return Je(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Ah(e,t,n,r){return new wh(e,t,n,r)}function xh(e,t){return _h.apply(this,arguments)}function _h(){return _h=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new gh(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=Vc(),s=Xe(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=Xe(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Xe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Xe(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),_h.apply(this,arguments)}function Eh(e,t){var n=au(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=tf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);iu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function Ih(e){var t=au(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function Th(e,t){var n=au(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return iu(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var u=Dc();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Sh(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(_u.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return tf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function Sh(e,t,n,r,i){var a=Vc();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Dc();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(_u.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):Zo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function Ch(e,t){var n=au(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function Nh(e,t){var n=au(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,tf.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new yf(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function Oh(e,t,n){return Ph.apply(this,arguments)}function Ph(){return Ph=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=au(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),uf(e.t1)){e.next=12;break}throw e.t1;case 12:Zo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ph.apply(this,arguments)}function Rh(e,t,n){var r=au(e),i=_u.min(),a=Vc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=au(e),i=r.Kn.get(n);return void 0!==i?tf.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,js(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:_u.min(),n?a:Vc())})).next((function(e){return{documents:e,zn:a}}))}))}function Dh(e,t){var n=au(e),r=au(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Lh(e){var t=au(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=au(e),i=Dc(),a=bf(n),o=sh(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:zl.readTimeIndex,range:u},(function(e,t){var n=gf(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:wf(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function Mh(e){return jh.apply(this,arguments)}function jh(){return jh=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=au(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=sh(e),n=_u.min();return t.jt({index:zl.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=wf(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),jh.apply(this,arguments)}function Fh(e,t,n,r){return Uh.apply(this,arguments)}function Uh(){return Uh=Ke(Ge().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=au(t),o=Vc(),u=Dc(),s=Fc(),c=Xe(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Nh(a,function(e){return js(Ns(Cu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Sh(e,d,u,_u.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function Vh(e,t){return Bh.apply(this,arguments)}function Bh(){return Bh=Ke(Ge().mark((function e(t,n){var r,i,a,o=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Vc(),e.next=3,Nh(t,js(Tf(n.bundledQuery)));case 3:return i=e.sent,a=au(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=il(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(Ru.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}var qh=function(){function e(t){Qe(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return Je(e,[{key:"getBundleMetadata",value:function(e,t){return tf.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:il(n.createTime)}),tf.resolve()}},{key:"getNamedQuery",value:function(e,t){return tf.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:Tf(e.bundledQuery),readTime:il(e.readTime)}}(t)),tf.resolve()}}]),e}(),zh=function(){function e(){Qe(this,e),this.ts=new Oc(Wh.es),this.ns=new Oc(Wh.ss)}return Je(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Wh(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Wh(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Wu(new Cu([])),r=new Wh(n,e),i=new Wh(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Wu(new Cu([])),n=new Wh(t,e),r=new Wh(t,e+1),i=Vc();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Wh(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Wh=function(){function e(t,n){Qe(this,e),this.key=t,this.fs=n}return Je(e,null,[{key:"es",value:function(e,t){return Wu.comparator(e.key,t.key)||bu(e.fs,t.fs)}},{key:"ss",value:function(e,t){return bu(e.fs,t.fs)||Wu.comparator(e.key,t.key)}}]),e}(),Kh=function(){function e(t,n){Qe(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Oc(Wh.es)}return Je(e,[{key:"checkEmpty",value:function(e){return tf.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new pf(i,t,n,r);this.An.push(a);var o,u=Xe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new Wh(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return tf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return tf.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return tf.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return tf.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return tf.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Wh(t,0),i=new Wh(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),tf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Oc(bu);return t.forEach((function(e){var t=new Wh(e,0),i=new Wh(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),tf.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Wu.isDocumentKey(i)||(i=i.child(""));var a=new Wh(new Wu(i),0),o=new Oc(bu);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),tf.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;iu(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return tf.forEach(t.mutations,(function(i){var a=new Wh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Wh(t,0),r=this.ws.firstAfterOrEqual(n);return tf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,tf.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Hh=function(){function e(t,n){Qe(this,e),this.Jt=t,this.Ts=n,this.docs=new Sc(Wu.comparator),this.size=0}return Je(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return tf.resolve(n?n.document.clone():us.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Dc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():us.newInvalidDocument(e))})),tf.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Dc(),i=new Wu(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||qs(t,c)&&(r=r.insert(c.key,c.clone()))}return tf.resolve(r)}},{key:"Es",value:function(e,t){return tf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Gh(this)}},{key:"getSize",value:function(e){return tf.resolve(this.size)}}]),e}(),Gh=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).De=e,r}return Je(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),tf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(ih),Qh=function(){function e(t){Qe(this,e),this.persistence=t,this.Is=new rh((function(e){return ls(e)}),fs),this.lastRemoteSnapshotVersion=_u.min(),this.highestTargetId=0,this.As=0,this.Rs=new zh,this.targetCount=0,this.Ps=Wf.ie()}return Je(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),tf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return tf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return tf.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),tf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),tf.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new Wf(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,tf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),tf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,tf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),tf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return tf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return tf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),tf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),tf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),tf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return tf.resolve(n)}},{key:"containsKey",value:function(e,t){return tf.resolve(this.Rs.containsKey(t))}}]),e}(),Yh=function(){function e(t,n){var r=this;Qe(this,e),this.bs={},this.Be=new mu(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Qh(this),this.Jt=new Of,this.Je=function(e,t){return new Hh(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new mf(n),this.Ye=new qh(this.k)}return Je(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Kh(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Zo("MemoryPersistence","Starting transaction:",e);var i=new Jh(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return tf.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Jh=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Je(n)}(ef),Xh=function(){function e(t){Qe(this,e),this.persistence=t,this.Cs=new zh,this.Ns=null}return Je(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw ru()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),tf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),tf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),tf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tf.forEach(this.xs,(function(r){var i=Wu.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return tf.or([function(){return tf.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function $h(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ed(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var td=function(){function e(t,n,r,i){Qe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Je(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new uu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(eu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),nd=function(){function e(t,n,r){Qe(this,e),this.targetId=t,this.state=n,this.error=r}return Je(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uu(i.error.code,i.error.message))),a?new e(t,i.state,r):(eu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),rd=function(){function e(t,n){Qe(this,e),this.clientId=t,this.activeTargetIds=n}return Je(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=qc(),o=0;i&&o<r.activeTargetIds.length;++o)i=zu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(eu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),id=function(){function e(t,n){Qe(this,e),this.clientId=t,this.onlineState=n}return Je(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(eu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ad=function(){function e(){Qe(this,e),this.activeTargetIds=qc()}return Je(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),od=function(){function e(t,n,r,i,a){Qe(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Sc(bu),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=$h(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new ad),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return Je(e,[{key:"start",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=Xe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem($h(this.persistenceKey,i)))&&(o=rd.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=Xe(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ed(this.persistenceKey,e));if(n){var r=nd.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ed(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Zo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Zo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Zo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Zo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void eu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(Ke(Ge().mark((function e(){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=mu.I;if(null!=e)try{var n=JSON.parse(e);iu("number"==typeof n),t=n}catch(e){eu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==mu.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new td(this.currentUser,e,t,n),i=Zh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Zh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=ed(this.persistenceKey,e),i=new nd(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return rd.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return td.Fs(new Yo(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return nd.Fs(r,t)}},{key:"Zs",value:function(e){return id.Fs(e)}},{key:"fi",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Zo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=qc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ud=function(){function e(){Qe(this,e),this.pi=new ad,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Je(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new ad,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),sd=function(){function e(){Qe(this,e)}return Je(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),cd=function(){function e(){var t=this;Qe(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return Je(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Zo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Xe(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Zo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Xe(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ld={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fd=function(){function e(t){Qe(this,e),this.Vi=t.Vi,this.Si=t.Si}return Je(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),hd=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Je(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Go;o.listenOnce(qo.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Bo.NO_ERROR:var t=o.getResponseJson();Zo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Bo.TIMEOUT:Zo("Connection",'RPC "'+e+'" timed out'),a(new uu(ou.DEADLINE_EXCEEDED,"Request time out"));break;case Bo.HTTP_ERROR:var n=o.getStatus();if(Zo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ou).indexOf(t)>=0?t:ou.UNKNOWN}(r.status);a(new uu(u,r.message))}else a(new uu(ou.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new uu(ou.UNAVAILABLE,"Connection failed."));break;default:ru()}}finally{Zo("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Uo(),a=Vo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ko({})),this.qi(o.initMessageHeaders,t,n),yt()||kt()||vt().indexOf("Electron/")>=0||bt()||vt().indexOf("MSAppHost/")>=0||gt()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Zo("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new fd({Vi:function(e){l?Zo("Connection","Not sending because WebChannel is closed:",e):(c||(Zo("Connection","Opening WebChannel transport."),s.open(),c=!0),Zo("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ho.EventType.OPEN,(function(){l||Zo("Connection","WebChannel transport opened.")})),h(s,Ho.EventType.CLOSE,(function(){l||(l=!0,Zo("Connection","WebChannel transport closed"),f.Fi())})),h(s,Ho.EventType.ERROR,(function(e){l||(l=!0,tu("Connection","WebChannel transport errored:",e),f.Fi(new uu(ou.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ho.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];iu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Zo("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=wc[e];if(void 0!==t)return Tc(t)}(a),u=i.message;void 0===o&&(o=ou.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new uu(o,u)),s.close()}else Zo("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,zo.STAT_EVENT,(function(e){e.stat===Wo.PROXY?Zo("Connection","Detected buffering proxy"):e.stat===Wo.NOPROXY&&Zo("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){Qe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Je(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Zo("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Zo("RestConnection","Received: ",e),e}),(function(t){throw tu("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=ld[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function dd(){return"undefined"!=typeof window?window:null}function pd(){return"undefined"!=typeof document?document:null}function vd(e){return new el(e,!0)}var yd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Qe(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return Je(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Zo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),md=function(){function e(t,n,r,i,a,o,u,s){Qe(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new yd(t,n)}return Je(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===ou.RESOURCE_EXHAUSTED?(eu(n.toString()),eu("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===ou.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=we(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new uu(ou.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Zo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(Zo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),gd=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,s}return Je(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ru()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(iu(void 0===t||"string"==typeof t),Ru.fromBase64String(t||"")):(iu(void 0===t||t instanceof Uint8Array),Ru.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ou.UNKNOWN:Tc(e.code);return new uu(t,e.message||"")}(o);n=new Gc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=sl(e,s.document.name),l=il(s.document.updateTime),f=new as({mapValue:{fields:s.document.fields}}),h=us.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Kc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=sl(e,v.document),m=v.readTime?il(v.readTime):_u.min(),g=us.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Kc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=sl(e,b.document),A=b.removedTargetIds||[];n=new Kc([],A,w,null)}else{if(!("filter"in t))return ru();t.filter;var x=t.filter;x.targetId;var _=x.count||0,E=new Ec(_),I=x.targetId;n=new Hc(I,E)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return _u.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_u.min():t.readTime?il(t.readTime):_u.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=fl(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=hs(r)?{documents:gl(e,r)}:{query:kl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=nl(e,t.resumeToken):t.snapshotVersion.compareTo(_u.min())>0&&(n.readTime=tl(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ru()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=fl(this.k),t.removeTarget=e,this.gr(t)}}]),n}(md),kd=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,s.Vr=!1,s}return Je(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,Rn(et(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(iu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(iu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?il(e.updateTime):il(t);return n.isEqual(_u.min())&&(n=il(t)),new uc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=il(e.commitTime);return this.listener.Cr(n,t)}return iu(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=fl(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return yl(t.k,e)}))};this.gr(n)}}]),n}(md),bd=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a){var o;return Qe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return Je(n,[{key:"Fr",value:function(){if(this.$r)throw new uu(ou.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=we(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ou.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uu(ou.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=we(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ou.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uu(ou.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return Je((function e(){Qe(this,e)}))}()),wd=function(){function e(t,n){Qe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return Je(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(eu(t),this.Lr=!1):Zo("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),Ad=Je((function e(t,n,r,i,a){var o=this;Qe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Rd(o),!e.t0){e.next=5;break}return Zo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=au(t)).Gr.add(4),e.next=4,Ed(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,xd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new wd(r,i)}));function xd(e){return _d.apply(this,arguments)}function _d(){return _d=Ke(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rd(t)){e.next=18;break}n=Xe(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),_d.apply(this,arguments)}function Ed(e){return Id.apply(this,arguments)}function Id(){return Id=Ke(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xe(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Id.apply(this,arguments)}function Td(e,t){var n=au(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Pd(n)?Od(n):op(n).lr()&&Cd(n,t))}function Sd(e,t){var n=au(e),r=op(n);n.Wr.delete(t),r.lr()&&Nd(n,t),0===n.Wr.size&&(r.lr()?r._r():Rd(n)&&n.Jr.set("Unknown"))}function Cd(e,t){e.Yr.X(t.targetId),op(e).br(t)}function Nd(e,t){e.Yr.X(t),op(e).vr(t)}function Od(e){e.Yr=new Yc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),op(e).start(),e.Jr.Br()}function Pd(e){return Rd(e)&&!op(e).hr()&&e.Wr.size>0}function Rd(e){return 0===au(e).Gr.size}function Dd(e){e.Yr=void 0}function Ld(e){return Md.apply(this,arguments)}function Md(){return Md=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){Cd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function jd(e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dd(t),Pd(t)?(t.Jr.Kr(n),Od(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function Ud(e,t,n){return Vd.apply(this,arguments)}function Vd(){return Vd=Ke(Ge().mark((function e(t,n,r){var i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Gc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Xe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Zo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Bd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Kc?t.Yr.ot(n):n instanceof Hc?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(_u.min())){e.next=29;break}return e.prev=14,e.next=17,Ih(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Ru.EMPTY_BYTE_STRING,n.snapshotVersion)),Nd(e,t);var r=new yf(n.target,t,1,n.sequenceNumber);Cd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Zo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Bd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Vd.apply(this,arguments)}function Bd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=Ke(Ge().mark((function e(t,n,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uf(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,Ed(t);case 5:t.Jr.set("Offline"),r||(r=function(){return Ih(t.localStore)}),t.asyncQueue.enqueueRetryable(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,xd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function zd(e,t){return t().catch((function(n){return Bd(e,n,t)}))}function Wd(e){return Kd.apply(this,arguments)}function Kd(){return Kd=Ke(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=au(t),r=up(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Hd(n)){e.next=19;break}return e.prev=3,e.next=6,Ch(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,Gd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Bd(n,e.t0);case 17:e.next=2;break;case 19:Qd(n)&&Yd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Kd.apply(this,arguments)}function Hd(e){return Rd(e)&&e.Qr.length<10}function Gd(e,t){e.Qr.push(t);var n=up(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Qd(e){return Rd(e)&&!up(e).hr()&&e.Qr.length>0}function Yd(e){up(e).start()}function Jd(e){return Xd.apply(this,arguments)}function Xd(){return Xd=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:up(t).kr();case 1:case"end":return e.stop()}}),e)}))),Xd.apply(this,arguments)}function $d(e){return Zd.apply(this,arguments)}function Zd(){return Zd=Ke(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=up(t),r=Xe(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function ep(e,t,n){return tp.apply(this,arguments)}function tp(){return tp=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=vf.from(i,n,r),e.next=3,zd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Wd(t);case 5:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e,t){return rp.apply(this,arguments)}function rp(){return rp=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&up(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ic(i=n.code)||i===ou.ABORTED){e.next=7;break}return r=t.Qr.shift(),up(t).wr(),e.next=5,zd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Wd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Qd(t)&&Yd(t);case 5:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}function ip(e,t){return ap.apply(this,arguments)}function ap(){return ap=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=au(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,xd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,Ed(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e){return e.Xr||(e.Xr=function(e,t,n){var r=au(e);return r.Fr(),new gd(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Ld.bind(null,e),Ni:jd.bind(null,e),Pr:Ud.bind(null,e)}),e.zr.push(function(){var t=Ke(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),Pd(e)?Od(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Dd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function up(e){return e.Zr||(e.Zr=function(e,t,n){var r=au(e);return r.Fr(),new kd(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Jd.bind(null,e),Ni:np.bind(null,e),Nr:$d.bind(null,e),Cr:ep.bind(null,e)}),e.zr.push(function(){var t=Ke(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,Wd(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Zo("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var sp=function(){function e(t,n,r,i,a){Qe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Je(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uu(ou.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function cp(e,t){if(eu("AsyncQueue","".concat(t,": ").concat(e)),uf(e))return new uu(ou.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var lp=function(){function e(t){Qe(this,e),this.comparator=t?function(e,n){return t(e,n)||Wu.comparator(e.key,n.key)}:function(e,t){return Wu.comparator(e.key,t.key)},this.keyedMap=Mc(),this.sortedSet=new Sc(this.comparator)}return Je(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fp=function(){function e(){Qe(this,e),this.eo=new Sc(Wu.comparator)}return Je(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):ru():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),hp=function(){function e(t,n,r,i,a,o,u,s){Qe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Je(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Us(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,lp.emptySet(n),a,r,i,!0,!1)}}]),e}(),dp=Je((function e(){Qe(this,e),this.so=void 0,this.listeners=[]})),pp=Je((function e(){Qe(this,e),this.queries=new rh((function(e){return Vs(e)}),Us),this.onlineState="Unknown",this.io=new Set}));function vp(e,t){return yp.apply(this,arguments)}function yp(){return yp=Ke(Ge().mark((function e(t,n){var r,i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=au(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new dp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=cp(e.t0,"Initialization of query '".concat(Bs(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&wp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),yp.apply(this,arguments)}function mp(e,t){return gp.apply(this,arguments)}function gp(){return gp=Ke(Ge().mark((function e(t,n){var r,i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=au(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){var n,r=au(e),i=!1,a=Xe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Xe(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&wp(r)}function bp(e,t,n){var r=au(e),i=r.queries.get(t);if(i){var a,o=Xe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function wp(e){e.io.forEach((function(e){e.next()}))}var Ap=function(){function e(t,n,r){Qe(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return Je(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Xe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new hp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=hp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),xp=function(){function e(t,n){Qe(this,e),this.payload=t,this.byteLength=n}return Je(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),_p=function(){function e(t){Qe(this,e),this.k=t}return Je(e,[{key:"Hn",value:function(e){return sl(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?pl(this.k,e.document,!1):us.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return il(e)}}]),e}(),Ep=function(){function e(t,n,r){Qe(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=Ip(t)}return Je(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new _p(this.k),i=Xe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=Xe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Vc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh(this.localStore,new _p(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=Xe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Vh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new mh(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ip(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Tp=Je((function e(t){Qe(this,e),this.key=t})),Sp=Je((function e(t){Qe(this,e),this.key=t})),Cp=function(){function e(t,n){Qe(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=Vc(),this.mutatedKeys=Vc(),this.Ao=zs(t),this.Ro=new lp(this.Ao)}return Je(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new fp,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Os(this.query)&&i.size===this.query.limit?i.last():null,c=Ps(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=qs(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Os(this.query)||Ps(this.query))for(;o.size>this.query.limit;){var l=Os(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ru()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new hp(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new fp,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=Vc(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new Sp(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new Tp(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=Vc();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return hp.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),Np=Je((function e(t,n,r){Qe(this,e),this.query=t,this.targetId=n,this.view=r})),Op=Je((function e(t){Qe(this,e),this.key=t,this.$o=!1})),Pp=function(){function e(t,n,r,i,a,o){Qe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new rh((function(e){return Vs(e)}),Us),this.Mo=new Map,this.Lo=new Set,this.Bo=new Sc(Wu.comparator),this.Uo=new Map,this.qo=new zh,this.Ko={},this.jo=new Map,this.Qo=Wf.re(),this.onlineState="Unknown",this.Wo=void 0}return Je(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function Rp(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iv(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,Nh(r.localStore,js(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Lp(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&Td(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Lp(e,t,n,r){return Mp.apply(this,arguments)}function Mp(){return Mp=Ke(Ge().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=Ke(Ge().mark((function e(t,n,r,i){var a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,Rh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(nv(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Rh(t.localStore,n,!0);case 3:return a=e.sent,o=new Cp(n,a.zn),u=o.bo(a.documents),s=Wc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),nv(t,r,c.Co),l=new Np(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function jp(e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=au(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!Us(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Oh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Sd(r.remoteStore,i.targetId),ev(r,i.targetId)})).catch(Yf);case 9:e.next=14;break;case 11:return ev(r,i.targetId),e.next=14,Oh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Fp.apply(this,arguments)}function Up(e,t,n){return Vp.apply(this,arguments)}function Vp(){return Vp=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tv(t),e.prev=1,e.next=4,function(e,t){var n,r=au(e),i=xu.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Vc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=Xe(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=dc(c,n.get(c.key));null!=l&&u.push(new mc(c.key,l,os(l.value.mapValue),sc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Sc(bu)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,av(i,a.changes);case 9:return e.next=11,Wd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=cp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Vp.apply(this,arguments)}function Bp(e,t){return qp.apply(this,arguments)}function qp(){return qp=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),e.prev=1,e.next=4,Th(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(iu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?iu(n.$o):e.removedDocuments.size>0&&(iu(n.$o),n.$o=!1))})),e.next=8,av(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),qp.apply(this,arguments)}function zp(e,t,n){var r=au(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=au(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Xe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&wp(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Wp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return Kp=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=au(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Sc(Wu.comparator)).insert(o,us.newNoDocument(o,_u.min())),s=Vc().add(o),c=new zc(_u.min(),new Map,new Oc(bu),u,s),e.next=9,Bp(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),iv(i),e.next=16;break;case 14:return e.next=16,Oh(i.localStore,n,!1).then((function(){return ev(i,n,r)})).catch(Yf);case 16:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Hp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),i=n.batch.batchId,e.prev=1,e.next=4,Eh(r.localStore,n);case 4:return a=e.sent,Zp(r,i,null),$p(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,av(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Gp.apply(this,arguments)}function Qp(e,t,n){return Yp.apply(this,arguments)}function Yp(){return Yp=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=au(t),e.prev=1,e.next=4,function(e,t){var n=au(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return iu(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Zp(i,n,r),$p(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,av(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Yp.apply(this,arguments)}function Jp(e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rd((r=au(t)).remoteStore)||Zo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=au(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=cp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Xp.apply(this,arguments)}function $p(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function Zp(e,t,n){var r=au(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Xe(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||tv(e,t)}))}function tv(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Sd(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),iv(e))}function nv(e,t,n){var r,i=Xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Tp?(e.qo.addReference(a.key,t),rv(e,a)):a instanceof Sp?(Zo("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||tv(e,a.key)):ru()}}catch(o){i.e(o)}finally{i.f()}}function rv(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Zo("SyncEngine","New document in limbo: "+n),e.Lo.add(r),iv(e))}function iv(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Wu(Cu.fromString(t)),r=e.Qo.next();e.Uo.set(r,new Op(n)),e.Bo=e.Bo.insert(n,r),Td(e.remoteStore,new yf(js(Ns(n.path)),r,2,mu.I))}}function av(e,t,n){return ov.apply(this,arguments)}function ov(){return ov=Ke(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=au(t),a=[],o=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=kh.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return tf.forEach(n,(function(t){return tf.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return tf.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),uf(e.t0)){e.next=10;break}throw e.t0;case 10:Zo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Xe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),ov.apply(this,arguments)}function uv(e,t){return sv.apply(this,arguments)}function sv(){return sv=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=au(t)).currentUser.isEqual(n)){e.next=11;break}return Zo("SyncEngine","User change. New user:",n.toKey()),e.next=5,xh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new uu(ou.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,av(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),sv.apply(this,arguments)}function cv(e,t){var n=au(e),r=n.Uo.get(t);if(r&&r.$o)return Vc().add(r.key);var i=Vc(),a=n.Mo.get(t);if(!a)return i;var o,u=Xe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Oo.get(s);i=i.unionWith(c.view.Po)}}catch(l){u.e(l)}finally{u.f()}return i}function lv(e,t){return fv.apply(this,arguments)}function fv(){return fv=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),e.next=3,Rh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&nv(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e){return dv.apply(this,arguments)}function dv(){return dv=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=au(t),e.abrupt("return",Lh(n.localStore).then((function(e){return av(n,e)})));case 2:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t,n,r){return vv.apply(this,arguments)}function vv(){return vv=Ke(Ge().mark((function e(t,n,r,i){var a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=au(t),e.next=3,function(e,t){var n=au(e),r=au(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):tf.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Wd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Zp(a,n,i||null),$p(a,n),function(e,t){au(au(e).An).ee(t)}(a.localStore,n)):ru();case 11:return e.next=13,av(a,o);case 13:e.next=16;break;case 15:Zo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function yv(e,t){return mv.apply(this,arguments)}function mv(){return mv=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Iv(r=au(t)),Tv(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,gv(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,ip(r.remoteStore,!0);case 9:o=Xe(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Td(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ev(r,t),Oh(r.localStore,t,!0)})),Sd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,gv(r,c);case 21:return function(e){var t=au(e);t.Uo.forEach((function(e,n){Sd(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Sc(Wu.comparator)}(r),r.Wo=!1,e.next=25,ip(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function gv(e,t,n){return kv.apply(this,arguments)}function kv(){return kv=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=au(t),a=[],o=[],u=Xe(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,Nh(i.localStore,js(f[0]));case 11:l=e.sent,h=Xe(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,lv(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Dh(i.localStore,c);case 36:return m=e.sent,e.next=39,Nh(i.localStore,m);case 39:return l=e.sent,e.next=42,Lp(i,bv(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),kv.apply(this,arguments)}function bv(e){return Cs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function wv(e){var t=au(e);return au(au(t.localStore).persistence).Tn()}function Av(e,t,n,r){return xv.apply(this,arguments)}function xv(){return xv=Ke(Ge().mark((function e(t,n,r,i){var a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=au(t)).Wo){e.next=5;break}Zo("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Lh(a.localStore);case 11:return o=e.sent,u=zc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,av(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Oh(a.localStore,n,!0);case 18:return ev(a,n,i),e.abrupt("break",21);case 20:ru();case 21:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function _v(e,t,n){return Ev.apply(this,arguments)}function Ev(){return Ev=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Iv(t)).Wo){e.next=45;break}a=Xe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Mo.has(u)){e.next=10;break}return Zo("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Dh(i.localStore,u);case 12:return s=e.sent,e.next=15,Nh(i.localStore,s);case 15:return c=e.sent,e.next=18,Lp(i,bv(s),c.targetId,!1);case 18:Td(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Xe(r),e.prev=30,h=Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,Oh(i.localStore,t,!1).then((function(){Sd(i.remoteStore,t),ev(i,t)})).catch(Yf);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Ev.apply(this,arguments)}function Iv(e){var t=au(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wp.bind(null,t),t.Fo.Pr=kp.bind(null,t.eventManager),t.Fo.zo=bp.bind(null,t.eventManager),t}function Tv(e){var t=au(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qp.bind(null,t),t}function Sv(e,t,n){var r=au(e);(function(){var e=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=au(e),r=il(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Ip(i)),a=new Ep(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,av(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=au(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),tu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Cv=function(){function e(){Qe(this,e),this.synchronizeTabs=!1}return Je(e,[{key:"initialize",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=vd(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Ah(this.persistence,new bh,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new Yh(Xh.ks,this.k)}},{key:"Jo",value:function(e){return new ud}},{key:"terminate",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Nv=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Je(n,[{key:"initialize",value:function(){var e=Ke(Ge().mark((function e(t){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(et(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Mh(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,Tv(this.ta.syncEngine);case 8:return e.next=10,Wd(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Ah(this.persistence,new bh,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Zf(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mf.withCacheSize(this.cacheSizeBytes):Mf.DEFAULT;return new dh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dd(),pd(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new ud}}]),n}(Cv),Ov=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Je(n,[{key:"initialize",value:function(){var e=Ke(Ge().mark((function e(t){var r,i=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(et(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof od,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:pv.bind(null,r),gi:Av.bind(null,r),yi:_v.bind(null,r),Tn:wv.bind(null,r),_i:hv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yv(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=dd();if(!od.bt(t))throw new uu(ou.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new od(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Nv),Pv=function(){function e(){Qe(this,e)}return Je(e,[{key:"initialize",value:function(){var e=Ke(Ge().mark((function e(t,n){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return zp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=uv.bind(null,this.syncEngine),e.next=12,ip(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new pp}},{key:"createDatastore",value:function(e){var t,n=vd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new hd(t));return function(e,t,n,r){return new bd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return zp(o.syncEngine,e,0)},a=cd.bt()?new cd:new sd,new Ad(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Pp(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=au(t),Zo("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,Ed(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Rv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ke(Ge().mark((function r(){var i;return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Dv=function(){function e(t){Qe(this,e),this.observer=t,this.muted=!1}return Je(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Lv=function(){function e(t,n){var r=this;Qe(this,e),this.sa=t,this.k=n,this.metadata=new su,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Je(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new xp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=Ke(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=Ke(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Mv=function(){function e(t){Qe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Je(e,[{key:"lookup",value:function(){var e=Ke(Ge().mark((function e(t){var n,r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new uu(ou.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),i=fl(r.k)+"/documents",a={documents:n.map((function(e){return ul(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=vl(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());iu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ke(Ge().mark((function e(){var t,n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Wu.fromPath(t);n.mutations.push(new _c(r,n.precondition(r)))})),e.next=7,function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t),i=fl(r.k)+"/documents",a={writes:n.map((function(e){return yl(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ru();t=_u.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new uu(ou.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sc.updateTime(t):sc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_u.min()))throw new uu(ou.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sc.updateTime(t)}return sc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),jv=function(){function e(t,n,r,i){Qe(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new yd(this.asyncQueue,"transaction_retry")}return Je(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(Ke(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Mv(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!Bu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ic(t)}return!1}}]),e}(),Fv=function(){function e(t,n,r,i){var a=this;Qe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yo.UNAUTHENTICATED,this.clientId=ku.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return Je(e,[{key:"getConfiguration",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new uu(ou.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ke(Ge().mark((function n(){var r;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=cp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Uv(e,t){return Vv.apply(this,arguments)}function Vv(){return Vv=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Zo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,xh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Vv.apply(this,arguments)}function Bv(e,t){return qv.apply(this,arguments)}function qv(){return qv=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,zv(t);case 3:return r=e.sent,Zo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=au(t)).asyncQueue.verifyOperationInProgress(),Zo("RemoteStore","RemoteStore received new credentials"),i=Rd(r),r.Gr.add(3),e.next=6,Ed(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,xd(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),qv.apply(this,arguments)}function zv(e){return Wv.apply(this,arguments)}function Wv(){return Wv=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Zo("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Uv(t,new Cv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Kv(e){return Hv.apply(this,arguments)}function Hv(){return Hv=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Zo("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Bv(t,new Pv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Gv(e){return zv(e).then((function(e){return e.persistence}))}function Qv(e){return zv(e).then((function(e){return e.localStore}))}function Yv(e){return Kv(e).then((function(e){return e.remoteStore}))}function Jv(e){return Kv(e).then((function(e){return e.syncEngine}))}function Xv(e){return $v.apply(this,arguments)}function $v(){return $v=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Rp.bind(null,n.syncEngine),r.onUnlisten=jp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Zv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Dv({next:function(a){t.enqueueAndForget((function(){return mp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new uu(ou.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new uu(ou.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ap(Ns(n.path),a,{includeMetadataChanges:!0,wo:!0});return vp(e,o)},i.next=3,Xv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ey(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Dv({next:function(n){t.enqueueAndForget((function(){return mp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new uu(ou.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ap(n,a,{includeMetadataChanges:!0,wo:!0});return vp(e,o)},i.next=3,Xv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var ty=Je((function e(t,n,r,i,a,o,u,s){Qe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ny=function(){function e(t,n){Qe(this,e),this.projectId=t,this.database=n||"(default)"}return Je(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),ry=new Map;function iy(e,t,n){if(!n)throw new uu(ou.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ay(e,t,n,r){if(!0===t&&!0===r)throw new uu(ou.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function oy(e){if(!Wu.isDocumentKey(e))throw new uu(ou.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function uy(e){if(Wu.isDocumentKey(e))throw new uu(ou.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function sy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ru()}function cy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uu(ou.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sy(e);throw new uu(ou.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ly(e,t){if(t<=0)throw new uu(ou.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var fy=function(){function e(t){var n;if(Qe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new uu(ou.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uu(ou.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ay("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Je(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),hy=function(){function e(t,n,r){Qe(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fy({}),this._settingsFrozen=!1,t instanceof ny?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uu(ou.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ny(e.options.projectId)}(t))}return Je(e,[{key:"app",get:function(){if(!this._app)throw new uu(ou.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new uu(ou.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new lu;switch(e.type){case"gapi":var t=e.client;return iu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new pu(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new uu(ou.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ry.get(e);t&&(Zo("ComponentProvider","Removing Datastore"),ry.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function dy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=cy(e,hy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&tu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Yo.MOCK_USER;else{o=pt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new uu(ou.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yo(s)}e._authCredentials=new fu(new cu(o,u))}}var py=function(){function e(t,n,r){Qe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Je(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new yy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),vy=function(){function e(t,n,r){Qe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Je(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),yy=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,e,r,Ns(i)))._path=i,a.type="collection",a}return Je(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new py(this.firestore,null,new Wu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(vy);function my(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Lt(e),iy("collection","path",t),e instanceof hy){var a=Cu.fromString.apply(Cu,[t].concat(r));return uy(a),new yy(e,null,a)}if(!(e instanceof py||e instanceof yy))throw new uu(ou.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cu.fromString.apply(Cu,[t].concat(r)));return uy(o),new yy(e.firestore,null,o)}function gy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Lt(e),1===arguments.length&&(t=ku.A()),iy("doc","path",t),e instanceof hy){var a=Cu.fromString.apply(Cu,[t].concat(r));return oy(a),new py(e,null,new Wu(a))}if(!(e instanceof py||e instanceof yy))throw new uu(ou.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cu.fromString.apply(Cu,[t].concat(r)));return oy(o),new py(e.firestore,e instanceof yy?e.converter:null,new Wu(o))}function ky(e,t){return e=Lt(e),t=Lt(t),(e instanceof py||e instanceof yy)&&(t instanceof py||t instanceof yy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function by(e,t){return e=Lt(e),t=Lt(t),e instanceof vy&&t instanceof vy&&e.firestore===t.firestore&&Us(e._query,t._query)&&e.converter===t.converter}var wy=function(){function e(){var t=this;Qe(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new yd(this,"async_queue_retry"),this.Ra=function(){var e=pd();e&&Zo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=pd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return Je(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=pd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new su;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=Ke(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),uf(e.t0)){e.next=12;break}throw e.t0;case 12:Zo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw eu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=sp.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&ru()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=Xe(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Xe(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function Ay(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Xe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var xy=function(){function e(){Qe(this,e),this._progressObserver={},this._taskCompletionResolver=new su,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Je(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),_y=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new wy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Je(n,[{key:"_terminate",value:function(){return this._firestoreClient||Iy(this),this._firestoreClient.terminate()}}]),n}(hy);function Ey(e){return e._firestoreClient||Iy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Iy(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ty(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Fv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ty(e,t,n){var r=new su;return e.asyncQueue.enqueue(Ke(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Uv(e,n);case 3:return i.next=5,Bv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ou.FAILED_PRECONDITION||e.code===ou.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Sy(e){return function(e){return e.asyncQueue.enqueue(Ke(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Gv(e);case 2:return n=t.sent,t.next=5,Yv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=au(e);return t.Gr.delete(0),xd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ey(e=cy(e,_y)))}function Cy(e){return function(e){return e.asyncQueue.enqueue(Ke(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Gv(e);case 2:return n=t.sent,t.next=5,Yv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=au(t)).Gr.add(0),e.next=4,Ed(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ey(e=cy(e,_y)))}function Ny(e,t){var n=Ey(e=cy(e,_y)),r=new xy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Lv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Rv(e,t);if(e instanceof ArrayBuffer)return Rv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,vd(t));e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sv,t.next=3,Jv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Oy(e,t){return function(e,t){return e.asyncQueue.enqueue(Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=au(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,Qv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ey(e=cy(e,_y)),t).then((function(t){return t?new vy(e,null,t.query):null}))}function Py(e){if(e._initialized||e._terminated)throw new uu(ou.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ry=function(){function e(){Qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new uu(ou.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ou(n)}return Je(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Dy=function(){function e(t){Qe(this,e),this._byteString=t}return Je(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ru.fromBase64String(t))}catch(t){throw new uu(ou.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ru.fromUint8Array(t))}}]),e}(),Ly=Je((function e(t){Qe(this,e),this._methodName=t})),My=function(){function e(t,n){if(Qe(this,e),!isFinite(t)||t<-90||t>90)throw new uu(ou.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new uu(ou.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Je(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return bu(this._lat,e._lat)||bu(this._long,e._long)}}]),e}(),jy=/^__.*__$/,Fy=function(){function e(t,n,r){Qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Je(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}]),e}(),Uy=function(){function e(t,n,r){Qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Je(e,[{key:"toMutation",value:function(e,t){return new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Vy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ru()}}var By=function(){function e(t,n,r,i,a,o){Qe(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Je(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return um(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Vy(this.xa)&&jy.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),qy=function(){function e(t,n,r){Qe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||vd(t)}return Je(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new By({xa:e,methodName:t,Ka:n,path:Ou.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function zy(e){var t=e._freezeSettings(),n=vd(e._databaseId);return new qy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);rm("Data must be an object, but it was:",o,r);var u,s,c=tm(r,o);if(a.merge)u=new Pu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Xe(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=im(t,d,n);if(!o.contains(p))throw new uu(ou.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));sm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Pu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Fy(new as(c),u,s)}var Ky=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ly);function Hy(e,t,n){return new By({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var Gy=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"_toFieldTransform",value:function(e){return new oc(e.path,new $s)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ly),Qy=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e)).Qa=r,i}return Je(n,[{key:"_toFieldTransform",value:function(e){var t=Hy(this,e,!0),n=this.Qa.map((function(e){return em(e,t)})),r=new Zs(n);return new oc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ly),Yy=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e)).Qa=r,i}return Je(n,[{key:"_toFieldTransform",value:function(e){var t=Hy(this,e,!0),n=this.Qa.map((function(e){return em(e,t)})),r=new tc(n);return new oc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ly),Jy=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e)).Wa=r,i}return Je(n,[{key:"_toFieldTransform",value:function(e){var t=new rc(e.k,Gs(e.k,this.Wa));return new oc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ly);function Xy(e,t,n,r){var i=e.ja(1,t,n);rm("Data must be an object, but it was:",i,r);var a=[],o=as.empty();Iu(r,(function(e,r){var u=om(t,e,n);r=Lt(r);var s=i.La(u);if(r instanceof Ky)a.push(u);else{var c=em(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Pu(a);return new Uy(o,u,i.fieldTransforms)}function $y(e,t,n,r,i,a){var o=e.ja(1,t,n),u=[im(t,r,n)],s=[i];if(a.length%2!=0)throw new uu(ou.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(im(t,a[c])),s.push(a[c+1]);for(var l=[],f=as.empty(),h=u.length-1;h>=0;--h)if(!sm(l,u[h])){var d=u[h],p=s[h];p=Lt(p);var v=o.La(d);if(p instanceof Ky)l.push(d);else{var y=em(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Pu(l);return new Uy(f,m,o.fieldTransforms)}function Zy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return em(n,e.ja(r?4:3,t))}function em(e,t){if(nm(e=Lt(e)))return rm("Unsupported field value:",t,e),tm(e,t);if(e instanceof Ly)return function(e,t){if(!Vy(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Xe(e);try{for(a.s();!(n=a.n()).done;){var o=em(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Gs(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xu.fromDate(e);return{timestampValue:tl(t.k,n)}}if(e instanceof xu){var r=new xu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tl(t.k,r)}}if(e instanceof My)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dy)return{bytesValue:nl(t.k,e._byteString)};if(e instanceof py){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:al(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(sy(e)))}(e,t)}function tm(e,t){var n={};return Tu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Iu(e,(function(e,r){var i=em(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function nm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xu||e instanceof My||e instanceof Dy||e instanceof py||e instanceof Ly)}function rm(e,t,n){if(!nm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=sy(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function im(e,t,n){if((t=Lt(t))instanceof Ry)return t._internalPath;if("string"==typeof t)return om(e,t);throw um("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var am=new RegExp("[~\\*/\\[\\]]");function om(e,t,n){if(t.search(am)>=0)throw um("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return at(Ry,Ie(t.split(".")))._internalPath}catch(r){throw um("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function um(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new uu(ou.INVALID_ARGUMENT,u+e+s)}function sm(e,t){return e.some((function(e){return e.isEqual(t)}))}var cm=function(){function e(t,n,r,i,a){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Je(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new py(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new lm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),lm=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"data",value:function(){return Rn(et(n.prototype),"data",this).call(this)}}]),n}(cm);function fm(e,t){return"string"==typeof t?om(e,t):t instanceof Ry?t._internalPath:t._delegate._internalPath}var hm=function(){function e(t,n){Qe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Je(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),dm=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Je(n,[{key:"exists",value:function(){return Rn(et(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(cm),pm=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rn(et(n.prototype),"data",this).call(this,e)}}]),n}(dm),vm=function(){function e(t,n,r,i){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new hm(i.hasPendingWrites,i.fromCache),this.query=r}return Je(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new pm(n._firestore,n._userDataWriter,r.key,r,new hm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new uu(ou.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new pm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new pm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ym(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ym(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ru()}}function mm(e,t){return e instanceof dm&&t instanceof dm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof vm&&t instanceof vm&&e._firestore===t._firestore&&by(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function gm(e){if(Ps(e)&&0===e.explicitOrderBy.length)throw new uu(ou.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var km=Je((function e(){Qe(this,e)}));function bm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var wm=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return Je(n,[{key:"_apply",value:function(e){var t=zy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new uu(ou.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){Pm(o,a);var s,c=[],l=Xe(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Om(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Om(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Pm(o,a),u=Zy(n,"where",o,"in"===a||"not-in"===a);var h=ds.create(i,a,u);return function(e,t){if(t.V()){var n=Ds(e);if(null!==n&&!n.isEqual(t.field))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Rs(e);null!==r&&Rm(e,t.field,r)}var i=function(e,t){var n,r=Xe(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new uu(ou.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new uu(ou.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new vy(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(km);var Am=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return Je(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new uu(ou.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new uu(ou.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _s(t,n);return function(e,t){if(null===Rs(e)){var n=Ds(e);null!==n&&Rm(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new vy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ss(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(km);var xm=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return Je(n,[{key:"_apply",value:function(e){return new vy(e.firestore,e.converter,Fs(e._query,this.Ya,this.Xa))}}]),n}(km);var _m=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Je(n,[{key:"_apply",value:function(e){var t=Nm(e,this.type,this.Za,this.tc);return new vy(e.firestore,e.converter,function(e,t){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(km);function Em(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _m("startAt",t,!0)}function Im(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _m("startAfter",t,!1)}var Tm=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return Je(n,[{key:"_apply",value:function(e){var t=Nm(e,this.type,this.Za,this.tc);return new vy(e.firestore,e.converter,function(e,t){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(km);function Sm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tm("endBefore",t,!0)}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tm("endAt",t,!1)}function Nm(e,t,n,r){if(n[0]=Lt(n[0]),n[0]instanceof cm)return function(e,t,n,r,i){if(!r)throw new uu(ou.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Xe(Ms(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push($u(t,r.key));else{var c=r.data.field(s.field);if(Fu(c))throw new uu(ou.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new uu(ou.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new As(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=zy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new uu(ou.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new uu(ou.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ls(e)&&-1!==c.indexOf("/"))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Cu.fromString(c));if(!Wu.isDocumentKey(l))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Wu(l);u.push($u(t,f))}else{var h=Zy(n,r,c);u.push(h)}}return new As(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Om(e,t,n){if("string"==typeof(n=Lt(n))){if(""===n)throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ls(t)&&-1!==n.indexOf("/"))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Cu.fromString(n));if(!Wu.isDocumentKey(r))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $u(e,new Wu(r))}if(n instanceof py)return $u(e,n._key);throw new uu(ou.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(sy(n),"."))}function Pm(e,t){if(!Array.isArray(e)||0===e.length)throw new uu(ou.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new uu(ou.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Rm(e,t,n){if(!n.isEqual(t))throw new uu(ou.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Dm=function(){function e(){Qe(this,e)}return Je(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ru()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Iu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new My(Mu(e.latitude),Mu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Uu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Lu(e);return new xu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Cu.fromString(e);iu(Ol(n));var r=new ny(n.get(1),n.get(3)),i=new Wu(n.popFirst(5));return r.isEqual(t)||eu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Lm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Mm=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Je(n,[{key:"convertBytes",value:function(e){return new Dy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new py(this.firestore,null,t)}}]),n}(Dm),jm=function(){function e(t,n){Qe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zy(t)}return Je(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Fm(e,this._firestore),i=Lm(r.converter,t,n),a=Wy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,sc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Fm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Lt(t))||t instanceof Ry?$y(this._dataReader,"WriteBatch.update",i._key,t,n,o):Xy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,sc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new xc(t._key,sc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new uu(ou.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Fm(e,t){if((e=Lt(e)).firestore!==t)throw new uu(ou.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Um=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Je(n,[{key:"convertBytes",value:function(e){return new Dy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new py(this.firestore,null,t)}}]),n}(Dm);function Vm(e){e=cy(e,py);var t=cy(e.firestore,_y),n=Ey(t),r=new Um(t);return function(e,t){var n=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=au(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new uu(ou.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=cp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Qv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new dm(t,r,e._key,n,new hm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Bm(e){e=cy(e,vy);var t=cy(e.firestore,_y),n=Ey(t),r=new Um(t);return function(e,t){var n=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rh(t,n,!0);case 3:i=e.sent,a=new Cp(n,i.zn),o=a.bo(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=cp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Qv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new vm(t,r,e,n)}))}function qm(e,t,n){e=cy(e,py);var r=cy(e.firestore,_y),i=Lm(e.converter,t,n);return Hm(r,[Wy(zy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sc.none())])}function zm(e,t,n){e=cy(e,py);for(var r=cy(e.firestore,_y),i=zy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Hm(r,[("string"==typeof(t=Lt(t))||t instanceof Ry?$y(i,"updateDoc",e._key,t,n,o):Xy(i,"updateDoc",e._key,t)).toMutation(e._key,sc.exists(!0))])}function Wm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Lt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Ay(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Ay(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof py)l=cy(e.firestore,_y),f=Ns(e._key.path),c={next:function(t){n[s]&&n[s](Gm(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=cy(e,vy);l=cy(p.firestore,_y),f=p._query;var v=new Um(l);c={next:function(e){n[s]&&n[s](new vm(l,v,p,e))},error:n[s+1],complete:n[s+2]},gm(e._query)}return function(e,t,n,r){var i=new Dv(r),a=new Ap(t,i,n);return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vp,t.next=3,Xv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mp,t.next=3,Xv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ey(l),f,h,c)}function Km(e,t){return function(e,t){var n=new Dv(t);return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){au(e).io.add(t),t.next()},t.next=3,Xv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){au(e).io.delete(t)},t.next=3,Xv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ey(e=cy(e,_y)),Ay(t)?t:{next:t})}function Hm(e,t){return function(e,t){var n=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Up,r.next=3,Jv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ey(e),t)}function Gm(e,t,n){var r=n.docs.get(t._key),i=new Um(e);return new dm(e,i,t._key,r,new hm(n.hasPendingWrites,n.fromCache),t.converter)}var Qm=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Je(n,[{key:"get",value:function(e){var t=this,r=Fm(e,this._firestore),i=new Um(this._firestore);return Rn(et(n.prototype),"get",this).call(this,e).then((function(e){return new dm(t._firestore,i,r._key,e._document,new hm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Qe(this,e),this._firestore=t,this._transaction=n,this._dataReader=zy(t)}return Je(e,[{key:"get",value:function(e){var t=this,n=Fm(e,this._firestore),r=new Mm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ru();var i=e[0];if(i.isFoundDocument())return new cm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new cm(t._firestore,r,n._key,null,n.converter);throw ru()}))}},{key:"set",value:function(e,t,n){var r=Fm(e,this._firestore),i=Lm(r.converter,t,n),a=Wy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Fm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Lt(t))||t instanceof Ry?$y(this._dataReader,"Transaction.update",i._key,t,n,o):Xy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Fm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Ym(e,t){return function(e,t){var n=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function r(){var i;return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Kv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new jv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Ey(e=cy(e,_y)),(function(n){return t(new Qm(e,n))}))}function Jm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Qy("arrayUnion",t)}function Xm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Yy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Jo=e}(yn),un(new Mt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new _y(i,new hu(e.getProvider("auth-internal")),new yu(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),An(Qo,"3.4.1",e),An(Qo,"3.4.1","esm2017")}();function $m(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new uu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Zm(){if("undefined"===typeof Uint8Array)throw new uu("unimplemented","Uint8Arrays are not available in this environment.")}function eg(){if("undefined"==typeof atob)throw new uu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tg=function(){function e(t){Qe(this,e),this._delegate=t}return Je(e,[{key:"toBase64",value:function(){return eg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Zm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return eg(),new e(Dy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Zm(),new e(Dy.fromUint8Array(t))}}]),e}();function ng(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Xe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var rg=function(){function e(){Qe(this,e)}return Je(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Py(e=cy(e,_y));var n=Ey(e),r=e._freezeSettings(),i=new Pv;return Ty(n,i,new Nv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Py(e=cy(e,_y));var t=Ey(e),n=e._freezeSettings(),r=new Pv;return Ty(t,r,new Ov(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new uu(ou.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new su;return e._queue.enqueueAndForgetEvenWhileRestricted(Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rf.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,rf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(yh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ig=function(){function e(t,n,r){var i=this;Qe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ny||(this._appCompat=t)}return Je(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||tu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};dy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Sy(this._delegate)}},{key:"disableNetwork",value:function(){return Cy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ay("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new su;return e.asyncQueue.enqueueAndForget(Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Jp,n.next=3,Jv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ey(e=cy(e,_y)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Km(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new uu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new gg(this,my(this._delegate,e))}catch(t){throw lg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new cg(this,gy(this._delegate,e))}catch(t){throw lg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new vg(this,function(e,t){if(e=cy(e,hy),iy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new uu(ou.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new vy(e,null,function(e){return new Ss(Cu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw lg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Ym(this._delegate,(function(n){return e(new og(t,n))}))}},{key:"batch",value:function(){var e=this;return Ey(this._delegate),new ug(new jm(this._delegate,(function(t){return Hm(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Ny(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Oy(this._delegate,e).then((function(e){return e?new vg(t,e):null}))}}]),e}(),ag=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Je(n,[{key:"convertBytes",value:function(e){return new tg(new Dy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return cg.forKey(t,this.firestore,null)}}]),n}(Dm);var og=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new ag(t)}return Je(e,[{key:"get",value:function(e){var t=this,n=kg(e);return this._delegate.get(n).then((function(e){return new dg(t._firestore,new dm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=kg(e);return n?($m("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=kg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=kg(e);return this._delegate.delete(t),this}}]),e}(),ug=function(){function e(t){Qe(this,e),this._delegate=t}return Je(e,[{key:"set",value:function(e,t,n){var r=kg(e);return n?($m("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=kg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=kg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),sg=function(){function e(t,n,r){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Je(e,[{key:"fromFirestore",value:function(e,t){var n=new pm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ag(t),n),i.set(n,a)),a}}]),e}();sg.INSTANCES=new WeakMap;var cg=function(){function e(t,n){Qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ag(t)}return Je(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new gg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new gg(this.firestore,my(this._delegate,e))}catch(t){throw lg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Lt(e))instanceof py&&ky(this._delegate,e)}},{key:"set",value:function(e,t){t=$m("DocumentReference.set",t);try{return t?qm(this._delegate,e,t):qm(this._delegate,e)}catch(n){throw lg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?zm(this._delegate,e):zm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw lg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Hm(cy(e.firestore,_y),[new xc(e._key,sc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fg(n),a=hg(n,(function(t){return new dg(e.firestore,new dm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Wm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Vm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cy(e,py);var t=cy(e.firestore,_y);return Zv(Ey(t),e._key,{source:"server"}).then((function(n){return Gm(t,e,n)}))}(this._delegate):function(e){e=cy(e,py);var t=cy(e.firestore,_y);return Zv(Ey(t),e._key).then((function(n){return Gm(t,e,n)}))}(this._delegate),t.then((function(e){return new dg(n.firestore,new dm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(sg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new uu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new py(n._delegate,r,new Wu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new py(n._delegate,r,t))}}]),e}();function lg(e,t,n){return e.message=e.message.replace(t,n),e}function fg(e){var t,n=Xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ng(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function hg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ng(e[0])?e[0]:ng(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var dg=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Je(e,[{key:"ref",get:function(){return new cg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return mm(this._delegate,e._delegate)}}]),e}(),pg=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ru()}(void 0!==t),t}}]),n}(dg),vg=function(){function e(t,n){Qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new ag(t)}return Je(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,bm(this._delegate,function(e,t,n){var r=t,i=fm("where",e);return new wm(i,r,n)}(t,n,r)))}catch(i){throw lg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,bm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fm("orderBy",e);return new Am(n,t)}(t,n)))}catch(r){throw lg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,bm(this._delegate,function(e){return ly("limit",e),new xm("limit",e,"F")}(t)))}catch(n){throw lg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,bm(this._delegate,function(e){return ly("limitToLast",e),new xm("limitToLast",e,"L")}(t)))}catch(n){throw lg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,bm(this._delegate,Em.apply(void 0,arguments)))}catch(t){throw lg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,bm(this._delegate,Im.apply(void 0,arguments)))}catch(t){throw lg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,bm(this._delegate,Sm.apply(void 0,arguments)))}catch(t){throw lg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,bm(this._delegate,Cm.apply(void 0,arguments)))}catch(t){throw lg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return by(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Bm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cy(e,vy);var t=cy(e.firestore,_y),n=Ey(t),r=new Um(t);return ey(n,e._query,{source:"server"}).then((function(n){return new vm(t,r,e,n)}))}(this._delegate):function(e){e=cy(e,vy);var t=cy(e.firestore,_y),n=Ey(t),r=new Um(t);return gm(e._query),ey(n,e._query).then((function(n){return new vm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new mg(n.firestore,new vm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fg(n),a=hg(n,(function(t){return new mg(e.firestore,new vm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Wm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(sg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),yg=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Je(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new pg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),mg=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Je(e,[{key:"query",get:function(){return new vg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new pg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new yg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new pg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return mm(this._delegate,e._delegate)}}]),e}(),gg=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Je(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new cg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new cg(this.firestore,void 0===e?gy(this._delegate):gy(this._delegate,e))}catch(t){throw lg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=cy(e.firestore,_y),r=gy(e),i=Lm(e.converter,t);return Hm(n,[Wy(zy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new cg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return ky(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(sg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(vg);function kg(e){return cy(e,py)}var bg,wg=function(){function e(){Qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=at(Ry,n)}return Je(e,[{key:"isEqual",value:function(e){return(e=Lt(e))instanceof Ry&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ou.keyField().canonicalString())}}]),e}(),Ag=function(){function e(t){Qe(this,e),this._delegate=t}return Je(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Gy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Ky("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Jm.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Xm.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Jy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),xg={Firestore:ig,GeoPoint:My,Timestamp:xu,Blob:tg,Transaction:og,WriteBatch:ug,DocumentReference:cg,DocumentSnapshot:dg,Query:vg,QueryDocumentSnapshot:pg,QuerySnapshot:mg,CollectionReference:gg,FieldPath:wg,FieldValue:Ag,setLogLevel:function(e){!function(e){Xo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Mt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},xg)))})(bg=On,(function(e,t){return new ig(e,t,new rg)})),bg.registerVersion("@firebase/firestore-compat","0.1.10");function _g(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Eg;Object.create;var Ig="facebook.com",Tg="github.com",Sg="google.com",Cg="password",Ng="twitter.com",Og="EMAIL_SIGNIN",Pg="PASSWORD_RESET",Rg="RECOVER_EMAIL",Dg="REVERT_SECOND_FACTOR_ADDITION",Lg="VERIFY_AND_CHANGE_EMAIL",Mg="VERIFY_EMAIL";function jg(){return Ae({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Fg=function(){var e;return Ae(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ae(e,"argument-error",""),Ae(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ae(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ae(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ae(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ae(e,"cordova-not-ready","Cordova framework is not ready."),Ae(e,"cors-unsupported","This browser is not supported."),Ae(e,"credential-already-in-use","This credential is already associated with a different user account."),Ae(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ae(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ae(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ae(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ae(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ae(e,"email-already-in-use","The email address is already in use by another account."),Ae(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ae(e,"expired-action-code","The action code has expired."),Ae(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ae(e,"internal-error","An internal AuthError has occurred."),Ae(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ae(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ae(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ae(e,"invalid-auth-event","An internal AuthError has occurred."),Ae(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ae(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ae(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ae(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ae(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ae(e,"invalid-email","The email address is badly formatted."),Ae(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ae(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ae(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ae(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ae(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ae(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ae(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ae(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ae(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ae(e,"wrong-password","The password is invalid or the user does not have a password."),Ae(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ae(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ae(e,"invalid-provider-id","The specified provider ID is invalid."),Ae(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ae(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ae(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ae(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ae(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ae(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ae(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ae(e,"missing-continue-uri","A continue URL must be provided in the request."),Ae(e,"missing-iframe-start","An internal AuthError has occurred."),Ae(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ae(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ae(e,"missing-multi-factor-info","No second factor identifier is provided."),Ae(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ae(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ae(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ae(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ae(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ae(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ae(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ae(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ae(e,"no-auth-event","An internal AuthError has occurred."),Ae(e,"no-such-provider","User was not linked to an account with the given provider."),Ae(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ae(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ae(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ae(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ae(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ae(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ae(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ae(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ae(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ae(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ae(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ae(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ae(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ae(e,"timeout","The operation has timed out."),Ae(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ae(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ae(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ae(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ae(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ae(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ae(e,"unverified-email","The operation requires a verified email."),Ae(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ae(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ae(e,"user-disabled","The user account has been disabled by an administrator."),Ae(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ae(e,"user-signed-out",""),Ae(e,"weak-password","The password must be 6 characters long or more."),Ae(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ae(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Ug=jg,Vg=new xt("auth","Firebase",jg()),Bg=new Yt("@firebase/auth");function qg(e){if(Bg.logLevel<=Vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bg.error.apply(Bg,["Auth (".concat(yn,"): ").concat(e)].concat(n))}}function zg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gg.apply(void 0,[e].concat(n))}function Wg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gg.apply(void 0,[e].concat(n))}function Kg(e,t,n){var r=Object.assign(Object.assign({},Ug()),Ae({},t,n));return new xt("auth","Firebase",r).create(t,{appName:e.name})}function Hg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&zg(e,"argument-error"),Kg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Gg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ie(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ie(o)))}return Vg.create.apply(Vg,[e].concat(n))}function Qg(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Gg.apply(void 0,[t].concat(r))}}function Yg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw qg(t),new Error(t)}function Jg(e,t){e||Yg(t)}var Xg=new Map;function $g(e){Jg(e instanceof Function,"Expected a class definition");var t=Xg.get(e);return t?(Jg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xg.set(e,t),t)}function Zg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ek(){return"http:"===tk()||"https:"===tk()}function tk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var nk=function(){function e(t,n){Qe(this,e),this.shortDelay=t,this.longDelay=n,Jg(n>t,"Short delay should be less than long delay!"),this.isMobile=yt()||kt()}return Je(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ek()||gt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function rk(e,t){Jg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ik=function(){function e(){Qe(this,e)}return Je(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Yg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Yg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Yg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ak=(Ae(Eg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ae(Eg,"MISSING_CUSTOM_TOKEN","internal-error"),Ae(Eg,"INVALID_IDENTIFIER","invalid-email"),Ae(Eg,"MISSING_CONTINUE_URI","internal-error"),Ae(Eg,"INVALID_PASSWORD","wrong-password"),Ae(Eg,"MISSING_PASSWORD","internal-error"),Ae(Eg,"EMAIL_EXISTS","email-already-in-use"),Ae(Eg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ae(Eg,"INVALID_IDP_RESPONSE","invalid-credential"),Ae(Eg,"INVALID_PENDING_TOKEN","invalid-credential"),Ae(Eg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ae(Eg,"MISSING_REQ_TYPE","internal-error"),Ae(Eg,"EMAIL_NOT_FOUND","user-not-found"),Ae(Eg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ae(Eg,"EXPIRED_OOB_CODE","expired-action-code"),Ae(Eg,"INVALID_OOB_CODE","invalid-action-code"),Ae(Eg,"MISSING_OOB_CODE","internal-error"),Ae(Eg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ae(Eg,"INVALID_ID_TOKEN","invalid-user-token"),Ae(Eg,"TOKEN_EXPIRED","user-token-expired"),Ae(Eg,"USER_NOT_FOUND","user-token-expired"),Ae(Eg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ae(Eg,"INVALID_CODE","invalid-verification-code"),Ae(Eg,"INVALID_SESSION_INFO","invalid-verification-id"),Ae(Eg,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ae(Eg,"MISSING_SESSION_INFO","missing-verification-id"),Ae(Eg,"SESSION_EXPIRED","code-expired"),Ae(Eg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ae(Eg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ae(Eg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ae(Eg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ae(Eg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ae(Eg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ae(Eg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ae(Eg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ae(Eg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ae(Eg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ae(Eg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Eg),ok=new nk(3e4,6e4);function uk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function sk(e,t,n,r){return ck.apply(this,arguments)}function ck(){return ck=Ke(Ge().mark((function e(t,n,r,i){var a,o=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",lk(t,a,Ke(Ge().mark((function e(){var a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ct(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ik.fetch()(pk(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ck.apply(this,arguments)}function lk(e,t,n){return fk.apply(this,arguments)}function fk(){return fk=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ak),n),e.prev=2,a=new vk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw yk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=we(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw yk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw yk(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw Kg(t,d,h);case 30:zg(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof At)){e.next=37;break}throw e.t0;case 37:zg(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),fk.apply(this,arguments)}function hk(e,t,n,r){return dk.apply(this,arguments)}function dk(){return dk=Ke(Ge().mark((function e(t,n,r,i){var a,o,u=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,sk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&zg(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),dk.apply(this,arguments)}function pk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var vk=function(){function e(t){var n=this;Qe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Wg(n.auth,"timeout"))}),ok.get())}))}return Je(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Wg(e,t,r);return i.customData._tokenResponse=n,i}function mk(e,t){return gk.apply(this,arguments)}function gk(){return gk=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function kk(e,t){return bk.apply(this,arguments)}function bk(){return bk=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),bk.apply(this,arguments)}function wk(e,t){return Ak.apply(this,arguments)}function Ak(){return Ak=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ak.apply(this,arguments)}function xk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function _k(){return _k=Ke(Ge().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Lt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Qg((a=Ik(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:xk(Ek(a.auth_time)),issuedAtTime:xk(Ek(a.iat)),expirationTime:xk(Ek(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),_k.apply(this,arguments)}function Ek(e){return 1e3*Number(e)}function Ik(e){var t=we(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return qg("JWT malformed, contained fewer than 3 sections"),null;try{var a=lt(r);return a?JSON.parse(a):(qg("Failed to decode base64 JWT payload"),null)}catch(o){return qg("Caught error parsing JWT payload as JSON",o),null}}function Tk(e,t){return Sk.apply(this,arguments)}function Sk(){return Sk=Ke(Ge().mark((function e(t,n){var r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof At&&Ck(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Sk.apply(this,arguments)}function Ck(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Nk=function(){function e(t){Qe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Je(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ok=function(){function e(t,n){Qe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Je(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=xk(this.lastLoginAt),this.creationTime=xk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Pk(e){return Rk.apply(this,arguments)}function Rk(){return Rk=Ke(Ge().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Tk(t,wk(r,{idToken:i}));case 6:Qg(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Mk(o.providerUserInfo):[],s=Lk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ok(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}function Dk(){return(Dk=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lt(t),e.next=3,Pk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ie(n),Ie(t))}function Mk(e){return e.map((function(e){var t=e.providerId,n=_g(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function jk(e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lk(t,{},Ke(Ge().mark((function e(){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ct({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=pk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ik.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}var Uk=function(){function e(){Qe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Je(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Qg(e.idToken,"internal-error"),Qg("undefined"!==typeof e.idToken,"internal-error"),Qg("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ik(e);return Qg(t,"internal-error"),Qg("undefined"!==typeof t.exp,"internal-error"),Qg("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ke(Ge().mark((function e(t){var n,r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Qg(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Yg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Qg("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Qg("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Qg("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Vk(e,t){Qg("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Bk=function(){function e(t){Qe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=_g(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Nk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new Ok(a.createdAt||void 0,a.lastLoginAt||void 0)}return Je(e,[{key:"getIdToken",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Qg(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return _k.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Dk.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Qg(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Qg(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ke(Ge().mark((function e(t){var n,r,i=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Pk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Tk(this,mk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,A=n.providerData,x=n.stsTokenManager;Qg(k&&x,t,"internal-error");var _=Uk.fromJSON(this.name,x);Qg("string"===typeof k,t,"internal-error"),Vk(f,t.name),Vk(h,t.name),Qg("boolean"===typeof b,t,"internal-error"),Qg("boolean"===typeof w,t,"internal-error"),Vk(d,t.name),Vk(p,t.name),Vk(v,t.name),Vk(y,t.name),Vk(m,t.name),Vk(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return A&&Array.isArray(A)&&(E.providerData=A.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Ke(Ge().mark((function t(n,r){var i,a,o,u=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Uk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Pk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),qk=function(){function e(){Qe(this,e),this.type="NONE",this.storage={}}return Je(e,[{key:"_isAvailable",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();qk.type="NONE";var zk=qk;function Wk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Kk=function(){function e(t,n,r){Qe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Wk(this.userKey,a.apiKey,o),this.fullPersistenceKey=Wk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Je(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Bk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ke(Ge().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e($g(zk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||$g(zk),u=Wk(i,n.config.apiKey,n.name),s=null,c=Xe(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Bk._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Hk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($k(t))return"Blackberry";if(Zk(t))return"Webos";if(Qk(t))return"Safari";if((t.includes("chrome/")||Yk(t))&&!t.includes("edge/"))return"Chrome";if(Xk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Gk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/firefox\//i.test(e)}function Qk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/crios\//i.test(e)}function Jk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iemobile/i.test(e)}function Xk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/android/i.test(e)}function $k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/blackberry/i.test(e)}function Zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/webos/i.test(e)}function eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iphone|ipad|ipod/i.test(e)}function tb(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return eb(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function nb(){return bt()&&10===document.documentMode}function rb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return eb(e)||Xk(e)||Zk(e)||$k(e)||/windows phone/i.test(e)||Jk(e)}function ib(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Hk(vt());break;case"Worker":t="".concat(Hk(vt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(yn,"/").concat(r)}var ab=function(){function e(t,n){Qe(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return Je(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=$g(t)),this._initializationPromise=this.queue(Ke(Ge().mark((function r(){var i,a;return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Kk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ke(Ge().mark((function e(t){var n,r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Qg(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Lt(t):null)&&Qg(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ke(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Qg(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence($g(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new xt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Qg(n=t&&$g(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Kk.create(this,[$g(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ke(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Qg(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Qg(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ib(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ae({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ob(e){return Lt(e)}var ub=function(){function e(t){var n=this;Qe(this,e),this.auth=t,this.observer=null,this.addObserver=Pt((function(e){return n.observer=e}))}return Je(e,[{key:"next",get:function(){return Qg(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function sb(e,t,n){var r=ob(e);Qg(r._canInitEmulator,r,"emulator-config-failed"),Qg(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=cb(t),o=function(e){var t=cb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:lb(r.substr(a.length+1))}}var o=we(r.split(":"),2);return{host:o[0],port:lb(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cb(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lb(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var fb=function(){function e(t,n){Qe(this,e),this.providerId=t,this.signInMethod=n}return Je(e,[{key:"toJSON",value:function(){return Yg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Yg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Yg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Yg("not implemented")}}]),e}();function hb(e,t){return db.apply(this,arguments)}function db(){return db=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:resetPassword",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){return mb.apply(this,arguments)}function mb(){return mb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:update",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}function gb(e,t){return kb.apply(this,arguments)}function kb(){return kb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithPassword",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function bb(e,t){return wb.apply(this,arguments)}function wb(){return wb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:sendOobCode",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function Ab(e,t){return xb.apply(this,arguments)}function xb(){return xb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bb(t,n));case 1:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function _b(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bb(t,n));case 1:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Ib(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bb(t,n));case 1:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Sb(e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bb(t,n));case 1:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Nb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithEmailLink",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Pb(e,t){return Rb.apply(this,arguments)}function Rb(){return Rb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithEmailLink",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}var Db=function(e){Ze(n,e);var t=it(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Qe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Je(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",gb(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Nb(t,{email:this._email,oobCode:this._password}));case 5:zg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",pb(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pb(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:zg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(fb);function Lb(e,t){return Mb.apply(this,arguments)}function Mb(){return Mb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithIdp",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}var jb=function(e){Ze(n,e);var t=it(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Je(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Lb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Lb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Lb(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ct(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=_g(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(fb);function Fb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:sendVerificationCode",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(){return Vb=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithPhoneNumber",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function Bb(){return Bb=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hk(t,"POST","/v1/accounts:signInWithPhoneNumber",uk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}var qb=Ae({},"USER_NOT_FOUND","user-not-found");function zb(){return zb=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithPhoneNumber",uk(t,r),qb));case 2:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}var Wb=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Je(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Vb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Bb.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return zb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(fb);var Kb=function(){function e(t){var n,r,i,a,o,u;Qe(this,e);var s=Nt(Ot(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Qg(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Je(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Nt(Ot(e)).link,n=t?Nt(Ot(t)).deep_link_id:null,r=Nt(Ot(e)).deep_link_id;return(r?Nt(Ot(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch($p){return null}}}]),e}();var Hb=function(){function e(){Qe(this,e),this.providerId=e.PROVIDER_ID}return Je(e,null,[{key:"credential",value:function(e,t){return Db._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Kb.parseLink(t);return Qg(n,"argument-error"),Db._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Hb.PROVIDER_ID="password",Hb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gb=function(){function e(t){Qe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Je(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qb=function(e){Ze(n,e);var t=it(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Je(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ie(this.scopes)}}]),n}(Gb),Yb=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Je(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Qg(e.idToken||e.accessToken,"argument-error"),jb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Qg("providerId"in t&&"signInMethod"in t,"argument-error"),jb._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Qb),Jb=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.call(this,"facebook.com")}return Je(n,null,[{key:"credential",value:function(e){return jb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($p){return null}}}]),n}(Qb);Jb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jb.PROVIDER_ID="facebook.com";var Xb=function(e){Ze(n,e);var t=it(n);function n(){var e;return Qe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Je(n,null,[{key:"credential",value:function(e,t){return jb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch($p){return null}}}]),n}(Qb);Xb.GOOGLE_SIGN_IN_METHOD="google.com",Xb.PROVIDER_ID="google.com";var $b=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.call(this,"github.com")}return Je(n,null,[{key:"credential",value:function(e){return jb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($p){return null}}}]),n}(Qb);$b.GITHUB_SIGN_IN_METHOD="github.com",$b.PROVIDER_ID="github.com";var Zb=function(e){Ze(n,e);var t=it(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Je(n,[{key:"_getIdTokenResponse",value:function(e){return Lb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Lb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Lb(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(fb),ew=function(e){Ze(n,e);var t=it(n);function n(e){return Qe(this,n),Qg(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Je(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Zb.fromJSON(e);return Qg(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Zb._create(r,n)}catch(i){return null}}}]),n}(Gb),tw=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.call(this,"twitter.com")}return Je(n,null,[{key:"credential",value:function(e,t){return jb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch($p){return null}}}]),n}(Qb);function nw(e,t){return rw.apply(this,arguments)}function rw(){return rw=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signUp",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}tw.TWITTER_SIGN_IN_METHOD="twitter.com",tw.PROVIDER_ID="twitter.com";var iw=function(){function e(t){Qe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Je(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ke(Ge().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Bk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=aw(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ke(Ge().mark((function t(n,r,i){var a;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=aw(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function aw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ow(){return ow=Ke(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ob(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new iw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,nw(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,iw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}var uw=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a){var o,u;return Qe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf($e(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Je(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(At);function sw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw uw._fromErrorAndOperation(e,n,t,r);throw n}))}function cw(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lt(t),e.next=3,pw(!0,r,n);case 3:return e.t0=kk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=cw(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return dw.apply(this,arguments)}function dw(){return dw=Ke(Ge().mark((function e(t,n){var r,i,a=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Tk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",iw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t,n){return vw.apply(this,arguments)}function vw(){return(vw=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pk(n);case 2:i=cw(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Qg(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yw(e,t){return mw.apply(this,arguments)}function mw(){return mw=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Tk(t,sw(i,a,n,t),r);case 6:return Qg((o=e.sent).idToken,i,"internal-error"),Qg(u=Ik(o.idToken),i,"internal-error"),s=u.sub,Qg(t.uid===s,i,"user-mismatch"),e.abrupt("return",iw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&zg(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),mw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=Ke(Ge().mark((function e(t,n){var r,i,a,o,u=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,sw(t,i,n);case 4:return a=e.sent,e.next=7,iw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function bw(e,t){return ww.apply(this,arguments)}function ww(){return ww=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gw(ob(t),n));case 1:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function Aw(e,t){return xw.apply(this,arguments)}function xw(){return(xw=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lt(t),e.next=3,pw(!1,r,n.providerId);case 3:return e.abrupt("return",hw(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _w(e,t){return Ew.apply(this,arguments)}function Ew(){return(Ew=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yw(Lt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iw(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:signInWithCustomToken",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Sw(){return Sw=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ob(t),e.next=3,Iw(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,iw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}var Cw=function(){function e(t,n){Qe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Je(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Nw._fromServerResponse(e,t):zg(e,"internal-error")}}]),e}(),Nw=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Je(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Cw);function Ow(e,t,n){var r;Qg((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qg("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qg(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qg(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Pw(){return Pw=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ow(i,a,r),e.next=5,_b(i,a);case 5:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Rw(){return Rw=Ke(Ge().mark((function e(t,n,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hb(Lt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Dw(){return Dw=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yb(Lt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lt(t),e.next=3,hb(r,{oobCode:n});case 3:i=e.sent,Qg(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Qg(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Qg(i.mfaInfo,r,"internal-error");case 13:Qg(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Cw._fromServerResponse(ob(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function jw(){return jw=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw(Lt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Fw(e,t,n){return Uw.apply(this,arguments)}function Uw(){return Uw=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ob(t),e.next=3,nw(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,iw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function Vw(){return Vw=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),a={requestType:"EMAIL_SIGNIN",email:n},Qg(r.handleCodeInApp,i,"argument-error"),r&&Ow(i,a,r),e.next=6,Ib(i,a);case 6:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function Bw(){return Bw=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),Qg((a=Hb.credentialWithLink(n,r||Zg()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",bw(i,a));case 4:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function qw(e,t){return zw.apply(this,arguments)}function zw(){return zw=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:createAuthUri",uk(t,n)));case 1:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Ww(){return Ww=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ek()?Zg():"http://localhost",i={identifier:n,continueUri:r},e.next=4,qw(Lt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Kw(){return(Kw=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ow(r.auth,a,n),e.next=8,Ab(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hw(){return(Hw=Ke(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ow(i.auth,o,r),e.next=8,Sb(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function Yw(){return(Yw=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Lt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Tk(a,Gw(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jw(e,t,n){return Xw.apply(this,arguments)}function Xw(){return Xw=Ke(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Tk(t,pb(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}var $w=Je((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Zw=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a){var o;return Qe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Je(n)}($w),eA=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"facebook.com",r)}return Je(n)}($w),tA=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Je(n)}(Zw),nA=function(e){Ze(n,e);var t=it(n);function n(e,r){return Qe(this,n),t.call(this,e,"google.com",r)}return Je(n)}($w),rA=function(e){Ze(n,e);var t=it(n);function n(e,r,i){return Qe(this,n),t.call(this,e,"twitter.com",r,i)}return Je(n)}(Zw);function iA(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ik(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new $w(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new eA(a,i);case"github.com":return new tA(a,i);case"google.com":return new nA(a,i);case"twitter.com":return new rA(a,i,e.screenName||null);case"custom":case"anonymous":return new $w(a,null);default:return new $w(a,r,i)}}(n)}var aA=function(){function e(t,n){Qe(this,e),this.type=t,this.credential=n}return Je(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ae({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),oA=function(){function e(t,n,r){Qe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Je(e,[{key:"resolveSignIn",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ob(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Cw._fromServerResponse(r,e)}));Qg(i.mfaPendingCredential,r,"internal-error");var o=aA._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ke(Ge().mark((function e(t){var a,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,iw._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Qg(n.user,r,"internal-error"),e.abrupt("return",iw._forOperation(n.user,n.operationType,u));case 17:zg(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function uA(e,t){return sk(e,"POST","/v2/accounts/mfaEnrollment:start",uk(e,t))}function sA(e,t){return sk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",uk(e,t))}var cA=function(){function e(t){var n=this;Qe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Cw._fromServerResponse(t.auth,e)})))}))}return Je(e,[{key:"getSession",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=aA,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Tk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ke(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Tk(this.user,sA(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),lA=new WeakMap;var fA="__sak",hA=function(){function e(t,n){Qe(this,e),this.storageRetriever=t,this.type=n}return Je(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(fA,"1"),this.storage.removeItem(fA),Promise.resolve(!0)):Promise.resolve(!1)}catch($p){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var dA=function(e){Ze(n,e);var t=it(n);function n(){var e;return Qe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=vt();return Qk(e)||eb(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=rb(),e._shouldAllowMigration=!0,e}return Je(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);nb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ke(Ge().mark((function e(t,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(et(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ke(Ge().mark((function e(t){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(et(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(et(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(hA);dA.type="LOCAL";var pA=dA,vA=function(e){Ze(n,e);var t=it(n);function n(){return Qe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Je(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(hA);vA.type="SESSION";var yA=vA;function mA(e){return Promise.all(e.map(function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var gA=function(){function e(t){Qe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Je(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ke(Ge().mark((function e(t){var n,r,i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,mA(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function kA(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}gA.receivers=[];var bA=function(){function e(t){Qe(this,e),this.target=t,this.handlers=new Set}return Je(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=kA("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function wA(){return window}function AA(){return"undefined"!==typeof wA().WorkerGlobalScope&&"function"===typeof wA().importScripts}function xA(){return _A.apply(this,arguments)}function _A(){return(_A=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function EA(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var IA="firebaseLocalStorageDb",TA="firebaseLocalStorage",SA="fbase_key",CA=function(){function e(t){Qe(this,e),this.request=t}return Je(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function NA(e,t){return e.transaction([TA],t?"readwrite":"readonly").objectStore(TA)}function OA(){var e=indexedDB.deleteDatabase(IA);return new CA(e).toPromise()}function PA(){var e=indexedDB.open(IA,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(TA,{keyPath:SA})}catch(r){n(r)}})),e.addEventListener("success",Ke(Ge().mark((function n(){var r;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(TA)){n.next=12;break}return r.close(),n.next=5,OA();case 5:return n.t0=t,n.next=8,PA();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function RA(e,t,n){return DA.apply(this,arguments)}function DA(){return DA=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=NA(t,!0).put((Ae(i={},SA,n),Ae(i,"value",r),i)),e.abrupt("return",new CA(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function LA(e,t){return MA.apply(this,arguments)}function MA(){return MA=Ke(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=NA(t,!1).get(n),e.next=3,new CA(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),MA.apply(this,arguments)}function jA(e,t){var n=NA(e,!0).delete(t);return new CA(n).toPromise()}var FA=function(){function e(){Qe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Je(e,[{key:"_openDb",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,PA();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",AA()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ke(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=gA._getInstance(AA()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ke(Ge().mark((function e(n,r){var i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xA();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new bA(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&EA()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,PA();case 5:return t=e.sent,e.next=8,RA(t,fA,"1");case 8:return e.next=10,jA(t,fA);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ke(Ge().mark((function e(t,n){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return RA(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return LA(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ke(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return jA(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=NA(e,!1).getAll();return new CA(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Xe(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ke(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();FA.type="LOCAL";var UA=FA;function VA(e,t){return sk(e,"POST","/v2/accounts/mfaSignIn:start",uk(e,t))}function BA(e){return qA.apply(this,arguments)}function qA(){return qA=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function zA(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Wg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function WA(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var KA=1e12,HA=function(){function e(t){Qe(this,e),this.auth=t,this.counter=KA,this._widgets=new Map}return Je(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new GA(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||KA;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||KA;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||KA,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),GA=function(){function e(t,n,r){var i=this;Qe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Qg(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Je(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var QA=WA("rcb"),YA=new nk(3e4,6e4),JA="https://www.google.com/recaptcha/api.js?",XA=function(){function e(){Qe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wA().grecaptcha}return Je(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Qg($A(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(wA().grecaptcha):new Promise((function(r,i){var a=wA().setTimeout((function(){i(Wg(e,"network-request-failed"))}),YA.get());wA()[QA]=function(){wA().clearTimeout(a),delete wA()[QA];var o=wA().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Wg(e,"internal-error"))},zA("".concat(JA,"?").concat(Ct({onload:QA,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Wg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!wA().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function $A(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ZA=function(){function e(){Qe(this,e)}return Je(e,[{key:"load",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new HA(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ex="recaptcha",tx={theme:"light",type:"image"},nx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},tx),r=arguments.length>2?arguments[2]:void 0;Qe(this,e),this.parameters=n,this.type=ex,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ob(r),this.isInvisible="invisible"===this.parameters.size,Qg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Qg(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ZA:new XA,this.validateStartingState()}return Je(e,[{key:"verify",value:function(){var e=Ke(Ge().mark((function e(){var t,n,r,i=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Qg(!this.parameters.sitekey,this.auth,"argument-error"),Qg(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Qg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=wA()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Qg(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ke(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qg(ek()&&!AA(),this.auth,"internal-error"),e.next=3,rx();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,BA(this.auth);case 8:Qg(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Qg(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function rx(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ix=function(){function e(t,n){Qe(this,e),this.verificationId=t,this.onConfirmation=n}return Je(e,[{key:"confirm",value:function(e){var t=Wb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function ax(){return ax=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ob(t),e.next=3,cx(i,n,Lt(r));case 3:return a=e.sent,e.abrupt("return",new ix(a,(function(e){return bw(i,e)})));case 5:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t,n){return ux.apply(this,arguments)}function ux(){return(ux=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),e.next=3,pw(!1,i,"phone");case 3:return e.next=5,cx(i.auth,n,Lt(r));case 5:return a=e.sent,e.abrupt("return",new ix(a,(function(e){return Aw(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sx(){return(sx=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lt(t),e.next=3,cx(i.auth,n,Lt(r));case 3:return a=e.sent,e.abrupt("return",new ix(a,(function(e){return _w(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Qg("string"===typeof a,t,"argument-error"),Qg(r.type===ex,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Qg("enroll"===u.type,t,"internal-error"),e.next=13,uA(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Qg("signin"===u.type,t,"internal-error"),Qg(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,VA(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Fb(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),lx.apply(this,arguments)}function fx(){return(fx=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hw(Lt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hx=function(){function e(t){Qe(this,e),this.providerId=e.PROVIDER_ID,this.auth=ob(t)}return Je(e,[{key:"verifyPhoneNumber",value:function(e,t){return cx(this.auth,e,Lt(t))}}],[{key:"credential",value:function(e,t){return Wb._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Wb._fromTokenResponse(n,r):null}}]),e}();function dx(e,t){return t?$g(t):(Qg(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hx.PROVIDER_ID="phone",hx.PHONE_SIGN_IN_METHOD="phone";var px=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Je(n,[{key:"_getIdTokenResponse",value:function(e){return Lb(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Lb(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Lb(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(fb);function vx(e){return gw(e.auth,new px(e),e.bypassAuthState)}function yx(e){var t=e.auth,n=e.user;return Qg(n,t,"internal-error"),yw(n,new px(e),e.bypassAuthState)}function mx(e){return gx.apply(this,arguments)}function gx(){return gx=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Qg(r=t.user,n,"internal-error"),e.abrupt("return",hw(r,new px(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}var kx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Qe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Je(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ke(Ge().mark((function t(n,r){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ke(Ge().mark((function e(t){var n,r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vx;case"linkViaPopup":case"linkViaRedirect":return mx;case"reauthViaPopup":case"reauthViaRedirect":return yx;default:zg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Jg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Jg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),bx=new nk(2e3,1e4);function wx(e,t,n){return Ax.apply(this,arguments)}function Ax(){return Ax=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ob(t),Hg(t,n,Gb),a=dx(i,r),o=new Ix(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function xx(){return(xx=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg((i=Lt(t)).auth,n,Gb),a=dx(i.auth,r),o=new Ix(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _x(e,t,n){return Ex.apply(this,arguments)}function Ex(){return(Ex=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg((i=Lt(t)).auth,n,Gb),a=dx(i.auth,r),o=new Ix(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ix=function(e){Ze(n,e);var t=it(n);function n(e,r,i,a,o){var u;return Qe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=$e(u),u}return Je(n,[{key:"executeNotNull",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Qg(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ke(Ge().mark((function e(){var t,n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jg(1===this.filter.length,"Popup operations only handle one event"),t=kA(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Wg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Wg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Wg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,bx.get())}()}}]),n}(kx);Ix.currentPopupAction=null;var Tx=new Map,Sx=function(e){Ze(n,e);var t=it(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Qe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Je(n,[{key:"execute",value:function(){var e=Ke(Ge().mark((function e(){var t,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Tx.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Cx(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Rn(et(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Tx.set(this.auth._key(),t);case 21:return this.bypassAuthState||Tx.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ke(Ge().mark((function e(t){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Rn(et(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Rn(et(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(kx);function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=Ke(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dx(n),i=Rx(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ox(e,t){return Px.apply(this,arguments)}function Px(){return Px=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rx(t)._set(Dx(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Rx(e){return $g(e._redirectPersistence)}function Dx(e){return Wk("pendingRedirect",e.config.apiKey,e.name)}function Lx(e,t,n){return function(e,t,n){return Mx.apply(this,arguments)}(e,t,n)}function Mx(){return Mx=Ke(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ob(t),Hg(t,n,Gb),a=dx(i,r),e.next=5,Ox(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function jx(e,t,n){return function(e,t,n){return Fx.apply(this,arguments)}(e,t,n)}function Fx(){return(Fx=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg((i=Lt(t)).auth,n,Gb),a=dx(i.auth,r),e.next=5,Ox(a,i.auth);case 5:return e.next=7,Kx(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ux(e,t,n){return function(e,t,n){return Vx.apply(this,arguments)}(e,t,n)}function Vx(){return(Vx=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hg((i=Lt(t)).auth,n,Gb),a=dx(i.auth,r),e.next=5,pw(!1,i,n.providerId);case 5:return e.next=7,Ox(a,i.auth);case 7:return e.next=9,Kx(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return qx=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ob(t)._initializationPromise;case 2:return e.abrupt("return",zx(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function zx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ob(t),a=dx(i,n),o=new Sx(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Kx(e){return Hx.apply(this,arguments)}function Hx(){return(Hx=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kA("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gx=function(){function e(t){Qe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Je(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yx(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Yx(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qx(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Qx(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Qx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Yx(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Jx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=Ke(Ge().mark((function e(t){var n,r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",sk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}var $x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zx=/^https?/;function e_(){return e_=Ke(Ge().mark((function e(t){var n,r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jx(t);case 4:n=e.sent,r=n.authorizedDomains,i=Xe(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!t_(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:zg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),e_.apply(this,arguments)}function t_(e){var t=Zg(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Zx.test(r))return!1;if($x.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var n_=new nk(3e4,6e4);function r_(){var e=wA().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ie(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var i_=null;function a_(e){return i_=i_||function(e){return new Promise((function(t,n){var r,i,a;function o(){r_(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){r_(),n(Wg(e,"network-request-failed"))},timeout:n_.get()})}if(null===(i=null===(r=wA().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=wA().gapi)||void 0===a?void 0:a.load)){var u=WA("iframefcb");return wA()[u]=function(){gapi.load?o():n(Wg(e,"network-request-failed"))},zA("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw i_=null,e}))}(e),i_}var o_=new nk(5e3,15e3),u_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c_(e){var t=e.config;Qg(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?rk(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:yn},i=s_.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ct(r).slice(1))}function l_(e){return f_.apply(this,arguments)}function f_(){return f_=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a_(t);case 2:return n=e.sent,Qg(r=wA().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:c_(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u_,dontclear:!0},(function(e){return new Promise(function(){var n=Ke(Ge().mark((function n(r,i){var a,o,u;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){wA().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Wg(t,"network-request-failed"),o=wA().setTimeout((function(){i(a)}),o_.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}var h_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d_="_blank",p_="http://localhost",v_=function(){function e(t){Qe(this,e),this.window=t,this.associatedEvent=null}return Je(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function y_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},h_),{width:r.toString(),height:i.toString(),top:a,left:o}),c=vt().toLowerCase();n&&(u=Yk(c)?d_:n),Gk(c)&&(t=t||p_,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=we(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(tb(c)&&"_self"!==u)return m_(t||"",u),new v_(null);var f=window.open(t||"",u,l);Qg(f,e,"popup-blocked");try{f.focus()}catch(h){}return new v_(f)}function m_(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var g_="__/auth/handler",k_="emulator/auth/handler";function b_(e,t,n,r,i,a){Qg(e.config.authDomain,e,"auth-domain-config-required"),Qg(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yn,eventId:i};if(t instanceof Gb){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=we(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Qb){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(g_);return rk(t,k_)}(e),"?").concat(Ct(d).slice(1))}var w_="webStorageSupport",A_=function(){function e(){Qe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yA,this._completeRedirectFn=zx}return Je(e,[{key:"_openPopup",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){var a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=b_(t,n,r,Zg(),i),e.abrupt("return",y_(t,o,kA()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=b_(t,n,r,Zg(),i),wA().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Jg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l_(t);case 2:return n=e.sent,r=new Gx(t),n.register("authEvent",(function(e){return Qg(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(w_,{type:w_},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),zg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return e_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return rb()||Qk()||eb()}}]),e}(),x_=A_,__=function(){function e(t){Qe(this,e),this.factorId=t}return Je(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Yg("unexpected MultiFactorSessionType")}}}]),e}(),E_=function(e){Ze(n,e);var t=it(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone")).credential=e,r}return Je(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return sk(e,"POST","/v2/accounts/mfaEnrollment:finalize",uk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return sk(e,"POST","/v2/accounts/mfaSignIn:finalize",uk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(__),I_=function(){function e(){Qe(this,e)}return Je(e,null,[{key:"assertion",value:function(e){return E_._fromCredential(e)}}]),e}();I_.FACTOR_ID="phone";var T_,S_="@firebase/auth",C_="0.19.4",N_=function(){function e(t){Qe(this,e),this.auth=t,this.internalListeners=new Map}return Je(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Qg(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function O_(){return window}T_="Browser",un(new Mt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Qg(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Qg(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:T_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ib(T_)},r=new ab(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($g);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),un(new Mt("auth-internal",(function(e){return function(e){return new N_(e)}(ob(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),An(S_,C_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T_)),An(S_,C_,"esm2017");function P_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=Ke(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O_(),o=a.BuildInfo,Jg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,U_(n.sessionId);case 4:return u=e.sent,s={},eb()?s.ibi=o.packageName:Xk()?s.apn=o.packageName:zg(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",b_(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function D_(){return D_=Ke(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O_(),r=n.BuildInfo,i={},eb()?i.iosBundleId=r.packageName:Xk()?i.androidPackageName=r.packageName:zg(t,"operation-not-supported-in-this-environment"),e.next=5,Jx(t,i);case 5:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function L_(e){var t=O_().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function M_(e,t,n){return j_.apply(this,arguments)}function j_(){return j_=Ke(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=O_(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Wg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Xk()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),j_.apply(this,arguments)}function F_(e){var t,n,r,i,a,o,u,s,c,l,f=O_();Qg("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Qg("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Qg("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qg("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qg("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function U_(e){return V_.apply(this,arguments)}function V_(){return(V_=Ke(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B_(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B_(e){if(Jg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var q_=function(e){Ze(n,e);var t=it(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Je(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Rn(et(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Gx);function z_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Q_(),postBody:null,tenantId:e.tenantId,error:Wg(e,"no-auth-event")}}function W_(e,t){return Y_()._set(J_(e),t)}function K_(e){return H_.apply(this,arguments)}function H_(){return H_=Ke(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y_()._get(J_(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Y_()._remove(J_(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function G_(e,t){var n,r,i=function(e){var t=X_(e),n=t.link?decodeURIComponent(t.link):void 0,r=X_(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return X_(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=X_(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Wg(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Q_(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Y_(){return $g(pA)}function J_(e){return Wk("authEvent",e.config.apiKey,e.name)}function X_(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=me(t=n)||Ee(t)||ke(t)||be();r[0];return Nt(r.slice(1).join("?"))}var $_=function(){function e(){Qe(this,e),this._redirectPersistence=yA,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zx}return Je(e,[{key:"_initialize",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new q_(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){zg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){var a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F_(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Tx.clear(),e.next=10,this._originValidation(t);case 10:return o=z_(t,r,i),e.next=13,W_(t,o);case 13:return e.next=15,P_(t,o,n);case 15:return u=e.sent,e.next=18,L_(u);case 18:return s=e.sent,e.abrupt("return",M_(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return D_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=O_(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ke(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K_(e);case 2:t.onEvent(eE());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ke(Ge().mark((function n(r){var i,a;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,K_(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=G_(i,r.url)),t.onEvent(a||eE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");O_().handleOpenURL=function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Z_=$_;function eE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Wg("no-auth-event")}}function tE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function nE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return!("file:"!==tE()&&"ionic:"!==tE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function rE(){return bt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function iE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/Edge\/\d+/.test(e)}function aE(){try{var e=self.localStorage,t=kA();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return rE()||iE(e)}()||wt()}catch(n){return oE()&&wt()}return!1}function oE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function uE(){return("http:"===tE()||"https:"===tE()||gt()||nE())&&!(kt()||mt())&&aE()&&!oE()}function sE(){return nE()&&"undefined"!==typeof document}function cE(){return lE.apply(this,arguments)}function lE(){return(lE=Ke(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fE={LOCAL:"local",NONE:"none",SESSION:"session"},hE=Qg,dE="persistence";function pE(e,t){hE(Object.values(fE).includes(t),e,"invalid-persistence-type"),kt()?hE(t!==fE.SESSION,e,"unsupported-persistence-type"):mt()?hE(t===fE.NONE,e,"unsupported-persistence-type"):oE()?hE(t===fE.NONE||t===fE.LOCAL&&wt(),e,"unsupported-persistence-type"):hE(t===fE.NONE||aE(),e,"unsupported-persistence-type")}function vE(e){return yE.apply(this,arguments)}function yE(){return yE=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=mE(),r=Wk(dE,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),yE.apply(this,arguments)}function mE(){return"undefined"!==typeof window?window:null}var gE=Qg,kE=function(){function e(){Qe(this,e),this.browserResolver=$g(x_),this.cordovaResolver=$g(Z_),this.underlyingResolver=null,this._redirectPersistence=yA,this._completeRedirectFn=zx}return Je(e,[{key:"_initialize",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ke(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return sE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return gE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bE(e){return e.unwrap()}function wE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new IE(e,function(e,t){var n,r=Lt(e),i=t;return Qg(t.customData.operationType,r,"argument-error"),Qg(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),oA._fromError(r,i)}(e,t));else if(r){var i=AE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function AE(e){var t=(e instanceof At?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof At)&&"temporaryProof"in t&&"phoneNumber"in t)return hx.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Cg)return null;switch(r){case Sg:n=Xb;break;case Ig:n=Jb;break;case Tg:n=$b;break;case Ng:n=tw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Zb._create(r,u):jb._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Yb(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof At?n.credentialFromError(e):n.credentialFromResult(e)}function xE(e,t){return t.catch((function(t){throw t instanceof At&&wE(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,AE(t)),additionalUserInfo:iA(e),user:TE.getOrCreate(r)}}))}function _E(e,t){return EE.apply(this,arguments)}function EE(){return EE=Ke(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return xE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}var IE=function(){function e(t,n){Qe(this,e),this.resolver=n,this.auth=t.wrapped()}return Je(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return xE(bE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),TE=function(){function e(t){Qe(this,e),this._delegate=t,this.multiFactor=function(e){var t=Lt(e);return lA.has(t)||lA.set(t,cA._fromUser(t)),lA.get(t)}(t)}return Je(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xE(this.auth,Aw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_E(this.auth,ox(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xE(this.auth,_x(this._delegate,t,kE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vE(ob(this.auth));case 2:return e.abrupt("return",Ux(this._delegate,t,kE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xE(this.auth,_w(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return _E(this.auth,function(e,t,n){return sx.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return xE(this.auth,function(e,t,n){return xx.apply(this,arguments)}(this._delegate,e,kE))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vE(ob(this.auth));case 2:return e.abrupt("return",jx(this._delegate,t,kE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Kw.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lw(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Jw(Lt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Jw(Lt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return fx.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Yw.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Hw.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();TE.USER_MAP=new WeakMap;var SE=Qg,CE=function(){function e(t,n){if(Qe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;SE(r,"invalid-api-key",{appName:t.name});var i=[zk];if("undefined"!==typeof window){i=function(e,t){var n=mE();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Wk(dE,e,t);switch(n.sessionStorage.getItem(r)){case fE.NONE:return[zk];case fE.LOCAL:return[UA,yA];case fE.SESSION:return[yA];default:return[]}}(r,t.name);for(var a=0,o=[UA,pA,yA];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}SE(r,"invalid-api-key",{appName:t.name});var s="undefined"!==typeof window?kE:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(Fg),this.linkUnderlyingAuth()}return Je(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?TE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){sb(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Dw.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Lw(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Rw.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ke(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xE(this._delegate,Fw(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ww.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Kb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SE(uE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Bx(this._delegate,kE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",xE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ob(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=NE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=NE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Vw.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Pw.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ke(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pE(this._delegate,t),e.t0=t,e.next=e.t0===fE.SESSION?4:e.t0===fE.LOCAL?6:e.t0===fE.NONE?11:13;break;case 4:return n=yA,e.abrupt("break",14);case 6:return e.next=8,$g(UA)._isAvailable();case 8:return r=e.sent,n=r?UA:pA,e.abrupt("break",14);case 11:return n=zk,e.abrupt("break",14);case 13:return e.abrupt("return",zg("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return xE(this._delegate,function(e){return ow.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return xE(this._delegate,bw(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return xE(this._delegate,function(e,t){return Sw.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return xE(this._delegate,function(e,t,n){return bw(Lt(e),Hb.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return xE(this._delegate,function(e,t,n){return Bw.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return _E(this._delegate,function(e,t,n){return ax.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SE(uE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",xE(this._delegate,wx(this._delegate,t,kE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SE(uE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,vE(this._delegate);case 3:return e.abrupt("return",Lx(this._delegate,t,kE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return jw.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function NE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&TE.getOrCreate(e))},error:t,complete:n}}CE.Persistence=fE;var OE=function(){function e(){Qe(this,e),this.providerId="phone",this._delegate=new hx(bE(On.auth()))}return Je(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return hx.credential(e,t)}}]),e}();OE.PHONE_SIGN_IN_METHOD=hx.PHONE_SIGN_IN_METHOD,OE.PROVIDER_ID=hx.PROVIDER_ID;var PE=Qg,RE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:On.app();Qe(this,e),PE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new nx(t,n,i.auth()),this.type=this._delegate.type}return Je(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Mt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new CE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Og,PASSWORD_RESET:Pg,RECOVER_EMAIL:Rg,REVERT_SECOND_FACTOR_ADDITION:Dg,VERIFY_AND_CHANGE_EMAIL:Lg,VERIFY_EMAIL:Mg}},EmailAuthProvider:Hb,FacebookAuthProvider:Jb,GithubAuthProvider:$b,GoogleAuthProvider:Xb,OAuthProvider:Yb,SAMLAuthProvider:ew,PhoneAuthProvider:OE,PhoneMultiFactorGenerator:I_,RecaptchaVerifier:RE,TwitterAuthProvider:tw,Auth:CE,AuthCredential:fb,Error:At}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.4")}(On);On.initializeApp({apiKey:"AIzaSyATPDO3ltQjioL4h_LwzgvW2PfFIMSS_ZQ",authDomain:"nomad-bags-store.firebaseapp.com",databaseURL:"https://nomad-bags-store.firebaseio.com",projectId:"nomad-bags-store",storageBucket:"nomad-bags-store.appspot.com",messagingSenderId:"463459585373",appId:"1:463459585373:web:382c9dac918e125a106cb4"});var DE=On.firestore(),LE=On.auth(),ME=function(){var e=Ke(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=DE.doc("users/".concat(t.uid)),e.next=6,r.get();case 6:if(e.sent.exists){e.next=18;break}return i=t.displayName,a=t.email,o=new Date,e.prev=10,e.next=13,r.set(_e({displayName:i,email:a,createdAt:o},n));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("error creating user",e.t0.message);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,n){return e.apply(this,arguments)}}(),jE=function(e,t){return t.find((function(t){return t.id===e.id}))},FE="http://localhost:8080";function UE(e,t){return VE.apply(this,arguments)}function VE(){return(VE=Ke(Ge().mark((function e(t,n){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_e({method:"POST",body:null},n),i=r.method,a=r.body,o=LE.currentUser,e.t0=o,!e.t0){e.next=7;break}return e.next=6,o.getIdToken();case 6:e.t0=e.sent;case 7:return u=e.t0,e.next=10,fetch("".concat(FE,"/").concat(t),_e(_e({method:i},a&&{body:JSON.stringify(a)}),{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}}));case 10:return s=e.sent,e.abrupt("return",s.json());case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var BE=oe((function(e){var n=e.title,r=e.imageUrl,i=e.price,a=e.history,o=e.id,u=e.description,s={title:n,imageUrl:r,price:i,id:o,description:u},c=(0,t.useContext)(Ne),l=c.addProduct,f=c.cartItems,h=c.increase,d=jE(s,f);return(0,Ce.jsxs)("div",{className:"featured-product",children:[(0,Ce.jsx)("div",{className:"featured-image",onClick:function(){return a.push("/product/".concat(o))},children:(0,Ce.jsx)("img",{src:r,alt:"product"})}),(0,Ce.jsxs)("div",{className:"name-price",children:[(0,Ce.jsx)("h3",{children:n}),(0,Ce.jsxs)("p",{children:["$ ",i]}),!d&&(0,Ce.jsx)("button",{className:"button is-black nomad-btn",onClick:function(){return l(s)},children:"ADD TO CART"}),d&&(0,Ce.jsx)("button",{className:"button is-white nomad-btn",id:"btn-white-outline",onClick:function(){return h(s)},children:"ADD MORE"})]})]})})),qE=function(){var e=(0,t.useContext)(qe).products.filter((function(e,t){return t<4})).map((function(e){return(0,t.createElement)(BE,_e(_e({},e),{},{key:e.id}))}));return(0,Ce.jsxs)("div",{className:"featured-collection container",children:[(0,Ce.jsx)("h2",{className:"featured-section-title",children:" Featured Collection "}),(0,Ce.jsx)("div",{className:"products",children:e})]})},zE=function(){return(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsxs)(je,{children:[(0,Ce.jsx)(Fe,{}),(0,Ce.jsx)(Ve,{}),(0,Ce.jsx)(qE,{})]})})},WE=function(){return(0,Ce.jsx)(je,{children:(0,Ce.jsx)("p",{style:{fontWeight:"bold",textAlign:"center"},children:"Page Not Loading"})})},KE=function(){var e=(0,t.useContext)(qe).products.map((function(e){return(0,t.createElement)(BE,_e(_e({},e),{},{key:e.id}))}));return(0,Ce.jsx)(je,{children:(0,Ce.jsxs)("div",{className:"product-list-container",children:[(0,Ce.jsx)("h2",{className:"product-list-title",children:"Shop"}),(0,Ce.jsx)("div",{className:"product-list",children:e})]})})},HE=oe((function(e){var n=e.match,r=e.history.push,i=(0,t.useContext)(qe).products,a=(0,t.useContext)(Ne),o=a.addProduct,u=a.cartItems,s=a.increase,c=n.params.id,l=we((0,t.useState)(null),2),f=l[0],h=l[1];if((0,t.useEffect)((function(){var e=i.find((function(e){return Number(e.id)===Number(c)}));if(!e)return r("/shop");h(e)}),[c,f,r,i]),!f)return null;var d=f.imageUrl,p=f.title,v=f.price,y=f.description,m=jE(f,u);return(0,Ce.jsx)(je,{children:(0,Ce.jsxs)("div",{className:"single-product-container",children:[(0,Ce.jsx)("div",{className:"product-image",children:(0,Ce.jsx)("img",{src:d,alt:"product"})}),(0,Ce.jsxs)("div",{className:"product-details",children:[(0,Ce.jsxs)("div",{className:"name-price",children:[(0,Ce.jsx)("h3",{children:p}),(0,Ce.jsx)("p",{children:v})]}),(0,Ce.jsxs)("div",{className:"add-to-cart-btns",children:[!m&&(0,Ce.jsx)("button",{className:"button is-white nomad-btn",id:"btn-white-outline",onClick:function(){return o(f)},children:"ADD TO CART"}),m&&(0,Ce.jsx)("button",{className:"button is-white nomad-btn",id:"btn-white-outline",onClick:function(){return s(f)},children:"ADD MORE"}),(0,Ce.jsx)("button",{onClick:function(){return r("/checkout")},className:"button is-black nomad-btn",id:"btn-white-outline",children:"PROCEED TO CHECKOUT"})]}),(0,Ce.jsx)("div",{className:"product-description",children:(0,Ce.jsx)("p",{children:y})})]})]})})})),GE=function(e){var t=e.width;return(0,Ce.jsx)("svg",{width:t,fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ce.jsx)("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd",fillRule:"evenodd"})})},QE=function(e){var t=e.width;return(0,Ce.jsx)("svg",{width:t,fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ce.jsx)("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd",fillRule:"evenodd"})})},YE=function(e){var t=e.width;return(0,Ce.jsx)("svg",{width:t,fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ce.jsx)("path",{d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd",fillRule:"evenodd"})})},JE=function(e){var t=e.title,n=e.imageUrl,r=e.price,i=e.quantity,a=e.id,o=e.description,u=e.increase,s=e.decrease,c=e.removeProduct,l={title:t,imageUrl:n,price:r,quantity:i,id:a,description:o};return(0,Ce.jsxs)("div",{className:"cart-item",children:[(0,Ce.jsx)("div",{className:"item-image",children:(0,Ce.jsx)("img",{src:n,alt:"product"})}),(0,Ce.jsxs)("div",{className:"name-price",children:[(0,Ce.jsx)("h4",{children:t}),(0,Ce.jsxs)("p",{children:["$ ",r," "]})]}),(0,Ce.jsx)("div",{className:"quantity",children:(0,Ce.jsx)("p",{children:"Quantity: ".concat(i)})}),(0,Ce.jsxs)("div",{className:"btns-container",children:[(0,Ce.jsx)("button",{className:"btn-increase",onClick:function(){return u(l)},children:(0,Ce.jsx)(QE,{width:"20px"})}),1===i&&(0,Ce.jsx)("button",{className:"btn-trash",onClick:function(){return c(l)},children:(0,Ce.jsx)(YE,{width:"20px"})}),i>1&&(0,Ce.jsx)("button",{className:"btn-decrease",onClick:function(){return s(l)},children:(0,Ce.jsx)(GE,{width:"20px"})})]})]})},XE=oe((function(e){var t=e.itemCount,n=e.total,r=e.history,i=e.clearCart;return(0,Ce.jsxs)("div",{className:"total-container",children:[(0,Ce.jsxs)("div",{className:"total",children:[(0,Ce.jsxs)("p",{children:[" Total Items: ",t]}),(0,Ce.jsx)("p",{children:"Total: $".concat(n)})]}),(0,Ce.jsxs)("div",{className:"checkout",children:[(0,Ce.jsx)("button",{className:"button is-black",onClick:function(){return r.push("/checkout")},children:"CHECKOUT"}),(0,Ce.jsx)("button",{className:"button is-white",onClick:function(){return i()},children:"CLEAR"})]})]})})),$E=function(){var e=(0,t.useContext)(Ne),n=e.cartItems,r=e.itemCount,i=e.total,a=e.increase,o=e.decrease,u=e.removeProduct,s=e.clearCart,c={increase:a,decrease:o,removeProduct:u};return(0,Ce.jsx)(je,{children:(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)("h1",{children:"Cart"}),0===n.length?(0,Ce.jsx)("div",{className:"empty-cart",children:"Cart Is Empty"}):(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsxs)("div",{className:"cart-page",children:[(0,Ce.jsx)("div",{className:"cart-item-container",children:n.map((function(e){return(0,t.createElement)(JE,_e(_e({},e),{},{key:e.id},c))}))}),(0,Ce.jsx)(XE,{itemCount:r,total:i,clearCart:s})]})})]})})},ZE=n(77),eI=n.n(ZE),tI=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===nI}(e)}(e)};var nI="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function rI(e,t){return!1!==t.clone&&t.isMergeableObject(e)?aI((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function iI(e,t,n){return e.concat(t).map((function(e){return rI(e,n)}))}function aI(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||iI,n.isMergeableObject=n.isMergeableObject||tI;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=rI(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=aI(e[i],t[i],n):r[i]=rI(t[i],n)})),r}(e,t,n):rI(t,n)}aI.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return aI(e,n,t)}),{})};var oI=function(){this.__data__=[],this.size=0};var uI=function(e,t){return e===t||e!==e&&t!==t};var sI=function(e,t){for(var n=e.length;n--;)if(uI(e[n][0],t))return n;return-1},cI=Array.prototype.splice;var lI=function(e){var t=this.__data__,n=sI(t,e);return!(n<0)&&(n==t.length-1?t.pop():cI.call(t,n,1),--this.size,!0)};var fI=function(e){var t=this.__data__,n=sI(t,e);return n<0?void 0:t[n][1]};var hI=function(e){return sI(this.__data__,e)>-1};var dI=function(e,t){var n=this.__data__,r=sI(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function pI(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pI.prototype.clear=oI,pI.prototype.delete=lI,pI.prototype.get=fI,pI.prototype.has=hI,pI.prototype.set=dI;var vI=pI;var yI=function(){this.__data__=new vI,this.size=0};var mI=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var gI=function(e){return this.__data__.get(e)};var kI=function(e){return this.__data__.has(e)},bI="object"==typeof global&&global&&global.Object===Object&&global,wI="object"==typeof self&&self&&self.Object===Object&&self,AI=bI||wI||Function("return this")(),xI=AI.Symbol,_I=Object.prototype,EI=_I.hasOwnProperty,II=_I.toString,TI=xI?xI.toStringTag:void 0;var SI=function(e){var t=EI.call(e,TI),n=e[TI];try{e[TI]=void 0;var r=!0}catch(a){}var i=II.call(e);return r&&(t?e[TI]=n:delete e[TI]),i},CI=Object.prototype.toString;var NI=function(e){return CI.call(e)},OI=xI?xI.toStringTag:void 0;var PI=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":OI&&OI in Object(e)?SI(e):NI(e)};var RI=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var DI=function(e){if(!RI(e))return!1;var t=PI(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},LI=AI["__core-js_shared__"],MI=function(){var e=/[^.]+$/.exec(LI&&LI.keys&&LI.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var jI=function(e){return!!MI&&MI in e},FI=Function.prototype.toString;var UI=function(e){if(null!=e){try{return FI.call(e)}catch(t){}try{return e+""}catch(t){}}return""},VI=/^\[object .+?Constructor\]$/,BI=Function.prototype,qI=Object.prototype,zI=BI.toString,WI=qI.hasOwnProperty,KI=RegExp("^"+zI.call(WI).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var HI=function(e){return!(!RI(e)||jI(e))&&(DI(e)?KI:VI).test(UI(e))};var GI=function(e,t){return null==e?void 0:e[t]};var QI=function(e,t){var n=GI(e,t);return HI(n)?n:void 0},YI=QI(AI,"Map"),JI=QI(Object,"create");var XI=function(){this.__data__=JI?JI(null):{},this.size=0};var $I=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ZI=Object.prototype.hasOwnProperty;var eT=function(e){var t=this.__data__;if(JI){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ZI.call(t,e)?t[e]:void 0},tT=Object.prototype.hasOwnProperty;var nT=function(e){var t=this.__data__;return JI?void 0!==t[e]:tT.call(t,e)};var rT=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=JI&&void 0===t?"__lodash_hash_undefined__":t,this};function iT(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}iT.prototype.clear=XI,iT.prototype.delete=$I,iT.prototype.get=eT,iT.prototype.has=nT,iT.prototype.set=rT;var aT=iT;var oT=function(){this.size=0,this.__data__={hash:new aT,map:new(YI||vI),string:new aT}};var uT=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var sT=function(e,t){var n=e.__data__;return uT(t)?n["string"==typeof t?"string":"hash"]:n.map};var cT=function(e){var t=sT(this,e).delete(e);return this.size-=t?1:0,t};var lT=function(e){return sT(this,e).get(e)};var fT=function(e){return sT(this,e).has(e)};var hT=function(e,t){var n=sT(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function dT(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dT.prototype.clear=oT,dT.prototype.delete=cT,dT.prototype.get=lT,dT.prototype.has=fT,dT.prototype.set=hT;var pT=dT;var vT=function(e,t){var n=this.__data__;if(n instanceof vI){var r=n.__data__;if(!YI||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pT(r)}return n.set(e,t),this.size=n.size,this};function yT(e){var t=this.__data__=new vI(e);this.size=t.size}yT.prototype.clear=yI,yT.prototype.delete=mI,yT.prototype.get=gI,yT.prototype.has=kI,yT.prototype.set=vT;var mT=yT;var gT=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},kT=function(){try{var e=QI(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var bT=function(e,t,n){"__proto__"==t&&kT?kT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},wT=Object.prototype.hasOwnProperty;var AT=function(e,t,n){var r=e[t];wT.call(e,t)&&uI(r,n)&&(void 0!==n||t in e)||bT(e,t,n)};var xT=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var u=t[a],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?bT(n,u,s):AT(n,u,s)}return n};var _T=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var ET=function(e){return null!=e&&"object"==typeof e};var IT=function(e){return ET(e)&&"[object Arguments]"==PI(e)},TT=Object.prototype,ST=TT.hasOwnProperty,CT=TT.propertyIsEnumerable,NT=IT(function(){return arguments}())?IT:function(e){return ET(e)&&ST.call(e,"callee")&&!CT.call(e,"callee")},OT=NT,PT=Array.isArray;var RT=function(){return!1},DT="object"==typeof exports&&exports&&!exports.nodeType&&exports,LT=DT&&"object"==typeof module&&module&&!module.nodeType&&module,MT=LT&&LT.exports===DT?AI.Buffer:void 0,jT=(MT?MT.isBuffer:void 0)||RT,FT=/^(?:0|[1-9]\d*)$/;var UT=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&FT.test(e))&&e>-1&&e%1==0&&e<t};var VT=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},BT={};BT["[object Float32Array]"]=BT["[object Float64Array]"]=BT["[object Int8Array]"]=BT["[object Int16Array]"]=BT["[object Int32Array]"]=BT["[object Uint8Array]"]=BT["[object Uint8ClampedArray]"]=BT["[object Uint16Array]"]=BT["[object Uint32Array]"]=!0,BT["[object Arguments]"]=BT["[object Array]"]=BT["[object ArrayBuffer]"]=BT["[object Boolean]"]=BT["[object DataView]"]=BT["[object Date]"]=BT["[object Error]"]=BT["[object Function]"]=BT["[object Map]"]=BT["[object Number]"]=BT["[object Object]"]=BT["[object RegExp]"]=BT["[object Set]"]=BT["[object String]"]=BT["[object WeakMap]"]=!1;var qT=function(e){return ET(e)&&VT(e.length)&&!!BT[PI(e)]};var zT=function(e){return function(t){return e(t)}},WT="object"==typeof exports&&exports&&!exports.nodeType&&exports,KT=WT&&"object"==typeof module&&module&&!module.nodeType&&module,HT=KT&&KT.exports===WT&&bI.process,GT=function(){try{var e=KT&&KT.require&&KT.require("util").types;return e||HT&&HT.binding&&HT.binding("util")}catch(t){}}(),QT=GT&&GT.isTypedArray,YT=QT?zT(QT):qT,JT=Object.prototype.hasOwnProperty;var XT=function(e,t){var n=PT(e),r=!n&&OT(e),i=!n&&!r&&jT(e),a=!n&&!r&&!i&&YT(e),o=n||r||i||a,u=o?_T(e.length,String):[],s=u.length;for(var c in e)!t&&!JT.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||UT(c,s))||u.push(c);return u},$T=Object.prototype;var ZT=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$T)};var eS=function(e,t){return function(n){return e(t(n))}},tS=eS(Object.keys,Object),nS=Object.prototype.hasOwnProperty;var rS=function(e){if(!ZT(e))return tS(e);var t=[];for(var n in Object(e))nS.call(e,n)&&"constructor"!=n&&t.push(n);return t};var iS=function(e){return null!=e&&VT(e.length)&&!DI(e)};var aS=function(e){return iS(e)?XT(e):rS(e)};var oS=function(e,t){return e&&xT(t,aS(t),e)};var uS=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},sS=Object.prototype.hasOwnProperty;var cS=function(e){if(!RI(e))return uS(e);var t=ZT(e),n=[];for(var r in e)("constructor"!=r||!t&&sS.call(e,r))&&n.push(r);return n};var lS=function(e){return iS(e)?XT(e,!0):cS(e)};var fS=function(e,t){return e&&xT(t,lS(t),e)},hS="object"==typeof exports&&exports&&!exports.nodeType&&exports,dS=hS&&"object"==typeof module&&module&&!module.nodeType&&module,pS=dS&&dS.exports===hS?AI.Buffer:void 0,vS=pS?pS.allocUnsafe:void 0;var yS=function(e,t){if(t)return e.slice();var n=e.length,r=vS?vS(n):new e.constructor(n);return e.copy(r),r};var mS=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var gS=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var kS=function(){return[]},bS=Object.prototype.propertyIsEnumerable,wS=Object.getOwnPropertySymbols,AS=wS?function(e){return null==e?[]:(e=Object(e),gS(wS(e),(function(t){return bS.call(e,t)})))}:kS;var xS=function(e,t){return xT(e,AS(e),t)};var _S=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},ES=eS(Object.getPrototypeOf,Object),IS=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)_S(t,AS(e)),e=ES(e);return t}:kS;var TS=function(e,t){return xT(e,IS(e),t)};var SS=function(e,t,n){var r=t(e);return PT(e)?r:_S(r,n(e))};var CS=function(e){return SS(e,aS,AS)};var NS=function(e){return SS(e,lS,IS)},OS=QI(AI,"DataView"),PS=QI(AI,"Promise"),RS=QI(AI,"Set"),DS=QI(AI,"WeakMap"),LS="[object Map]",MS="[object Promise]",jS="[object Set]",FS="[object WeakMap]",US="[object DataView]",VS=UI(OS),BS=UI(YI),qS=UI(PS),zS=UI(RS),WS=UI(DS),KS=PI;(OS&&KS(new OS(new ArrayBuffer(1)))!=US||YI&&KS(new YI)!=LS||PS&&KS(PS.resolve())!=MS||RS&&KS(new RS)!=jS||DS&&KS(new DS)!=FS)&&(KS=function(e){var t=PI(e),n="[object Object]"==t?e.constructor:void 0,r=n?UI(n):"";if(r)switch(r){case VS:return US;case BS:return LS;case qS:return MS;case zS:return jS;case WS:return FS}return t});var HS=KS,GS=Object.prototype.hasOwnProperty;var QS=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&GS.call(e,"index")&&(n.index=e.index,n.input=e.input),n},YS=AI.Uint8Array;var JS=function(e){var t=new e.constructor(e.byteLength);return new YS(t).set(new YS(e)),t};var XS=function(e,t){var n=t?JS(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},$S=/\w*$/;var ZS=function(e){var t=new e.constructor(e.source,$S.exec(e));return t.lastIndex=e.lastIndex,t},eC=xI?xI.prototype:void 0,tC=eC?eC.valueOf:void 0;var nC=function(e){return tC?Object(tC.call(e)):{}};var rC=function(e,t){var n=t?JS(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var iC=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return JS(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return XS(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rC(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return ZS(e);case"[object Symbol]":return nC(e)}},aC=Object.create,oC=function(){function e(){}return function(t){if(!RI(t))return{};if(aC)return aC(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var uC=function(e){return"function"!=typeof e.constructor||ZT(e)?{}:oC(ES(e))};var sC=function(e){return ET(e)&&"[object Map]"==HS(e)},cC=GT&&GT.isMap,lC=cC?zT(cC):sC;var fC=function(e){return ET(e)&&"[object Set]"==HS(e)},hC=GT&&GT.isSet,dC=hC?zT(hC):fC,pC="[object Arguments]",vC="[object Function]",yC="[object Object]",mC={};mC[pC]=mC["[object Array]"]=mC["[object ArrayBuffer]"]=mC["[object DataView]"]=mC["[object Boolean]"]=mC["[object Date]"]=mC["[object Float32Array]"]=mC["[object Float64Array]"]=mC["[object Int8Array]"]=mC["[object Int16Array]"]=mC["[object Int32Array]"]=mC["[object Map]"]=mC["[object Number]"]=mC["[object Object]"]=mC["[object RegExp]"]=mC["[object Set]"]=mC["[object String]"]=mC["[object Symbol]"]=mC["[object Uint8Array]"]=mC["[object Uint8ClampedArray]"]=mC["[object Uint16Array]"]=mC["[object Uint32Array]"]=!0,mC["[object Error]"]=mC[vC]=mC["[object WeakMap]"]=!1;var gC=function e(t,n,r,i,a,o){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=a?r(t,i,a,o):r(t)),void 0!==u)return u;if(!RI(t))return t;var f=PT(t);if(f){if(u=QS(t),!s)return mS(t,u)}else{var h=HS(t),d=h==vC||"[object GeneratorFunction]"==h;if(jT(t))return yS(t,s);if(h==yC||h==pC||d&&!a){if(u=c||d?{}:uC(t),!s)return c?TS(t,fS(u,t)):xS(t,oS(u,t))}else{if(!mC[h])return a?t:{};u=iC(t,h,s)}}o||(o=new mT);var p=o.get(t);if(p)return p;o.set(t,u),dC(t)?t.forEach((function(i){u.add(e(i,n,r,i,t,o))})):lC(t)&&t.forEach((function(i,a){u.set(a,e(i,n,r,a,t,o))}));var v=f?void 0:(l?c?NS:CS:c?lS:aS)(t);return gT(v||t,(function(i,a){v&&(i=t[a=i]),AT(u,a,e(i,n,r,a,t,o))})),u};var kC=function(e){return gC(e,4)};var bC=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var wC=function(e){return"symbol"==typeof e||ET(e)&&"[object Symbol]"==PI(e)};function AC(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(AC.Cache||pT),n}AC.Cache=pT;var xC=AC;var _C=function(e){var t=xC(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},EC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IC=/\\(\\)?/g,TC=_C((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(EC,(function(e,n,r,i){t.push(r?i.replace(IC,"$1"):n||e)})),t}));var SC=function(e){if("string"==typeof e||wC(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},CC=xI?xI.prototype:void 0,NC=CC?CC.toString:void 0;var OC=function e(t){if("string"==typeof t)return t;if(PT(t))return bC(t,e)+"";if(wC(t))return NC?NC.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var PC=function(e){return null==e?"":OC(e)};var RC=function(e){return PT(e)?bC(e,SC):wC(e)?[e]:mS(TC(PC(e)))};var DC=function(e,t){};var LC=function(e){return gC(e,5)};function MC(){return MC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MC.apply(this,arguments)}function jC(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function FC(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function UC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var VC=function(e){return Array.isArray(e)&&0===e.length},BC=function(e){return"function"===typeof e},qC=function(e){return null!==e&&"object"===typeof e},zC=function(e){return String(Math.floor(Number(e)))===e},WC=function(e){return 0===t.Children.count(e)};function KC(e,t,n,r){void 0===r&&(r=0);for(var i=RC(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function HC(e,t,n){for(var r=kC(e),i=r,a=0,o=RC(t);a<o.length-1;a++){var u=o[a],s=KC(e,o.slice(0,a+1));if(s&&(qC(s)||Array.isArray(s)))i=i[u]=kC(s);else{var c=o[a+1];i=i[u]=zC(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}var GC=(0,t.createContext)(void 0);GC.displayName="FormikContext";GC.Provider,GC.Consumer;function QC(){var e=(0,t.useContext)(GC);return e||DC(!1),e}"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;(0,t.forwardRef)((function(e,n){var r=e.action,i=FC(e,["action"]),a=null!=r?r:"#",o=QC(),u=o.handleReset,s=o.handleSubmit;return(0,t.createElement)("form",Object.assign({onSubmit:s,ref:n,onReset:u,action:a},i))})).displayName="Form";var YC=function(e,t,n){var r=JC(e);return r.splice(t,0,n),r},JC=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(MC({},e,{length:t+1}))}return[]},XC=function(e){function n(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,u=HC(n.values,a,e(KC(n.values,a))),s=r?i(KC(n.errors,a)):void 0,c=t?o(KC(n.touched,a)):void 0;return VC(s)&&(s=void 0),VC(c)&&(c=void 0),MC({},n,{values:u,errors:r?HC(n.errors,a,s):n.errors,touched:t?HC(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(JC(t),[LC(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=JC(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=JC(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return YC(n,e,t)}),(function(t){return YC(t,e,null)}),(function(t){return YC(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=JC(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(UC(n)),n.pop=n.pop.bind(UC(n)),n}jC(n,e);var r=n.prototype;return r.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!eI()(KC(e.formik.values,e.name),KC(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?JC(n):[];return t||(t=r[e]),BC(r.splice)&&r.splice(e,1),r}),!0,!0),t},r.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},r.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},n=this.props,r=n.component,i=n.render,a=n.children,o=n.name,u=MC({},e,{form:FC(n.formik,["validate","validationSchema"]),name:o});return r?(0,t.createElement)(r,u):i?i(u):a?"function"===typeof a?a(u):WC(a)?null:t.Children.only(a):null},n}(t.Component);XC.defaultProps={validateOnChange:!0};t.Component,t.Component;var $C=n(764),ZC=(0,t.createContext)(),eN=function(e){var n=e.children,r=we((0,t.useState)(null),2),i=r[0],a=r[1],o=we((0,t.useState)(!0),2),u=o[0],s=o[1];(0,t.useEffect)((function(){var e=LE.onAuthStateChanged(function(){var e=Ke(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,ME(t);case 3:e.sent.onSnapshot((function(e){a(_e({id:e.id},e.data())),s(!1)})),e.next=9;break;case 7:a(t),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var c={user:i,loading:u};return u?(0,Ce.jsx)("div",{children:"Loading..."}):(0,Ce.jsx)(ZC.Provider,{value:c,children:n})},tN=(oe((function(e){var n=e.shipping,r=e.cartItems,i=e.history.push,a=(0,t.useContext)(ZC).user,o=we((0,t.useState)(!1),2),u=o[0],s=o[1],c=we((0,t.useState)(null),2),l=c[0],f=c[1],h=we((0,t.useState)(null),2),d=h[0],p=h[1],v=we((0,t.useState)(null),2),y=v[0],m=v[1],g=we((0,t.useState)(""),2),k=g[0],b=g[1],w=we((0,t.useState)(!1),2),A=w[0],x=w[1],_=we((0,t.useState)(null),2),E=_[0],I=_[1],T=(0,$C.useStripe)(),S=(0,$C.useElements)();(0,t.useEffect)((function(){var e=r.map((function(e){return{price:e.price,quantity:e.quantity}}));if(a){var t=function(){var e=Ke(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,UE("get-payment-methods",{method:"GET"});case 3:t=e.sent,m(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();t()}if(n){var i={cartItems:e,shipping:{name:n.name,address:{line1:n.address}},description:"payment intent for nomad shop",receipt_email:n.email},o=function(){var e=Ke(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UE("create-payment-intent",{body:i});case 2:t=e.sent,n=t.clientSecret,r=t.id,p(n),I(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o()}}),[n,r,a]);var C,N=function(){var e=Ke(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!0),!A){e.next=5;break}return e.next=4,UE("save-payment-method");case 4:t=e.sent;case 5:return e.next=7,T.confirmCardPayment(d,{payment_method:{card:S.getElement($C.CardNumberElement)}});case 7:if(!(n=e.sent).error){e.next=12;break}f("Payment Failed: ".concat(n.error.message)),e.next=19;break;case 12:if(!A||!t){e.next=18;break}return e.next=15,T.confirmCardSetup(t.client_secret,{payment_method:{card:S.getElement($C.CardNumberElement)}});case 15:i("/success"),e.next=19;break;case 18:i("/success");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Ke(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,UE("update-payment-intent",{body:{paymentIntentId:E},method:"PUT"});case 3:return t=e.sent,n=t.clientSecret,e.next=7,T.confirmCardPayment(n,{payment_method:k});case 7:(r=e.sent).error?(f("Payment Failed: ".concat(r.error.message)),s(!1)):i("/success");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){var t=e.error;f(t?t.message:"")},R={style:{base:{color:"#000",fontFamily:"Roboto, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#606060"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}};return y&&(C=y.map((function(e){var t=e.card,n=t.brand,r=t.last4,i=t.exp_month,a=t.exp_year;return(0,Ce.jsx)("option",{value:e.id,children:"".concat(n,"/ **** **** **** ").concat(r," ").concat(i,"/").concat(a)},e.id)}))).unshift((0,Ce.jsx)("option",{value:"",children:"Select A Card"},"Select a card")),(0,Ce.jsxs)("div",{children:[a&&y&&y.length>0&&(0,Ce.jsxs)("div",{children:[(0,Ce.jsx)("h4",{children:"Pay with saved card"}),(0,Ce.jsx)("select",{value:k,onChange:function(e){return b(e.target.value)},children:C}),(0,Ce.jsx)("button",{type:"submit",disabled:u||!k,className:"button is-black nomad-btn submit saved-card-btn",onClick:function(){return O()},children:u?"PROCESSING":"PAY WITH SAVED CARD"})]}),(0,Ce.jsx)("h4",{children:"Enter Payment Details"}),(0,Ce.jsx)("div",{className:"stripe-card",children:(0,Ce.jsx)($C.CardNumberElement,{className:"card-element",options:R,onChange:P})}),(0,Ce.jsx)("div",{className:"stripe-card",children:(0,Ce.jsx)($C.CardExpiryElement,{className:"card-element",options:R,onChange:P})}),(0,Ce.jsx)("div",{className:"stripe-card",children:(0,Ce.jsx)($C.CardCvcElement,{className:"card-element",options:R,onChange:P})}),a&&(0,Ce.jsxs)("div",{className:"save-card",children:[(0,Ce.jsx)("label",{children:"Save Card"}),(0,Ce.jsx)("input",{type:"checkbox",checked:A,onChange:function(e){return x(e.target.checked)}})]}),(0,Ce.jsx)("div",{className:"submit-btn",children:(0,Ce.jsx)("button",{disabled:u,className:"button is-black nomad-btn submit",onClick:function(){return N()},children:u?"PROCESSING":"PAY"})}),l&&(0,Ce.jsx)("p",{className:"error-message",children:l})]})})),function(){var e=we((0,t.useState)(""),2),n=e[0],r=e[1],i=(0,t.useContext)(Ne).cartItems,a=(0,$C.useStripe)(),o=function(){var e=Ke(Ge().mark((function e(t){var r,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=i.map((function(e){return{quantity:e.quantity,price_data:{currency:"usd",unit_amount:100*e.price,product_data:{name:e.title,description:e.description,images:[e.imageUrl]}}}})),e.next=4,UE("create-checkout-session",{body:{line_items:r,customer_email:n}});case 4:return o=e.sent,u=o.sessionId,e.next=8,a.redirectToCheckout({sessionId:u});case 8:s=e.sent,(c=s.error)&&console.log(c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Ce.jsxs)("form",{onSubmit:o,children:[(0,Ce.jsx)("div",{children:(0,Ce.jsx)("input",{type:"email",onChange:function(e){return r(e.target.value)},placeholder:"Email",value:n,className:"nomad-input"})}),(0,Ce.jsx)("div",{className:"submit-btn",children:(0,Ce.jsx)("button",{type:"submit",className:"button is-black nomad-btn submit",children:"Checkout"})})]})}),nN=function(){var e=(0,t.useContext)(Ne),n=e.itemCount,r=e.total,i=(e.cartItems,we((0,t.useState)(null),2));i[0],i[1];return(0,Ce.jsx)(je,{children:(0,Ce.jsxs)("div",{className:"checkout",children:[(0,Ce.jsx)("h2",{children:"Checkout Summary"}),(0,Ce.jsx)("h3",{children:"Total Items: ".concat(n)}),(0,Ce.jsx)("h4",{children:"Amount to Pay: $".concat(r)}),(0,Ce.jsx)(tN,{})]})})},rN=oe((function(e){var n=e.history,r=(0,t.useContext)(Ne),i=r.clearCart,a=r.cartItems;return(0,t.useEffect)((function(){0!==a.length&&i()}),[i,a]),(0,Ce.jsx)(je,{children:(0,Ce.jsxs)("div",{className:"checkout",children:[(0,Ce.jsx)("h1",{children:"Thank you for your order"}),(0,Ce.jsx)("p",{children:"We are currently processing your order and will send you a confirmation email shortly"}),(0,Ce.jsx)("div",{children:(0,Ce.jsx)("button",{className:"button is-black nomad-btn submit",onClick:function(){return n.push("/shop")},children:"Continue Shopping"})})]})})})),iN=oe((function(e){var t=e.history;return(0,Ce.jsx)(je,{children:(0,Ce.jsxs)("div",{className:"checkout",children:[(0,Ce.jsx)("h1",{children:"Payment failed"}),(0,Ce.jsx)("p",{children:"Payment was not successful"}),(0,Ce.jsx)("div",{children:(0,Ce.jsx)("button",{className:"button is-black nomad-btn submit",onClick:function(){return t.push("/shop")},children:"Continue Shopping"})})]})})}));var aN=function(){return(0,Ce.jsx)("div",{className:"App",children:(0,Ce.jsxs)(ae,{children:[(0,Ce.jsx)(Z,{exact:!0,path:"/",component:zE}),(0,Ce.jsx)(Z,{path:"/shop",component:KE}),(0,Ce.jsx)(Z,{path:"/product/:id",component:HE}),(0,Ce.jsx)(Z,{path:"/cart",component:$E}),(0,Ce.jsx)(Z,{path:"/checkout",component:nN}),(0,Ce.jsx)(Z,{path:"/success",component:rN}),(0,Ce.jsx)(Z,{path:"canceled",component:iN}),(0,Ce.jsx)(Z,{path:"*",component:WE})]})})},oN=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},uN="https://js.stripe.com/v3",sN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,cN="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",lN=null,fN=function(e){return null!==lN||(lN=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(cN),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(uN,'"]')),t=0;t<e.length;t++){var n=e[t];if(sN.test(n.src))return n}return null}();r&&e?console.warn(cN):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(uN).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),lN},hN=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.22.0",startTime:t})}(r,n),r},dN=Promise.resolve().then((function(){return fN(null)})),pN=!1;dN.catch((function(e){pN||console.warn(e)}));var vN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];pN=!0;var r=Date.now();return dN.then((function(e){return hN(e,t,r)}))}("pk_test_51JCr8WEPBHX2DtKyQOxVQoHK8PfoakHuygut8PJ9YICaFFrzebSXz6AXxeAz9O5ORVpwLeIAsvF4wSN80LXt2WZ100sFt7JkY5");r.render((0,Ce.jsx)(ue,{children:(0,Ce.jsx)(ze,{children:(0,Ce.jsx)(Re,{children:(0,Ce.jsx)($C.Elements,{stripe:vN,children:(0,Ce.jsx)(eN,{children:(0,Ce.jsx)(aN,{})})})})})}),document.getElementById("root")),oN()}()}();
//# sourceMappingURL=main.c22ed774.js.map